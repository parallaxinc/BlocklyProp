// Do not edit this file; automatically generated by build_propc.py.
"use strict";
var COMPILED=!0,goog=goog||{};goog.global=this;goog.isDef=function(a){return void 0!==a};goog.isString=function(a){return"string"==typeof a};goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&goog.isDef(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}};
goog.define=function(a,b){var c=b;COMPILED||(goog.global.CLOSURE_UNCOMPILED_DEFINES&&void 0===goog.global.CLOSURE_UNCOMPILED_DEFINES.nodeType&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES,a)?c=goog.global.CLOSURE_UNCOMPILED_DEFINES[a]:goog.global.CLOSURE_DEFINES&&void 0===goog.global.CLOSURE_DEFINES.nodeType&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]));goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";
goog.TRUSTED_SITE=!0;goog.STRICT_MODE_COMPATIBLE=!1;goog.DISALLOW_TEST_ONLY_CODE=COMPILED&&!goog.DEBUG;goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1;goog.provide=function(a){if(goog.isInModuleLoader_())throw Error("goog.provide can not be used within a goog.module.");if(!COMPILED&&goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');goog.constructNamespace_(a)};
goog.constructNamespace_=function(a,b){if(!COMPILED){delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a,b)};goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/;
goog.module=function(a){if(!goog.isString(a)||!a||-1==a.search(goog.VALID_MODULE_RE_))throw Error("Invalid module identifier");if(!goog.isInModuleLoader_())throw Error("Module "+a+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");
goog.moduleLoaderState_.moduleName=a;if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a]}};goog.module.get=function(a){return goog.module.getInternal_(a)};goog.module.getInternal_=function(a){if(!COMPILED){if(a in goog.loadedModules_)return goog.loadedModules_[a];if(!goog.implicitNamespaces_[a])return a=goog.getObjectByName(a),null!=a?a:null}return null};goog.moduleLoaderState_=null;
goog.isInModuleLoader_=function(){return null!=goog.moduleLoaderState_};goog.module.declareLegacyNamespace=function(){if(!COMPILED&&!goog.isInModuleLoader_())throw Error("goog.module.declareLegacyNamespace must be called from within a goog.module");if(!COMPILED&&!goog.moduleLoaderState_.moduleName)throw Error("goog.module must be called prior to goog.module.declareLegacyNamespace.");goog.moduleLoaderState_.declareLegacyNamespace=!0};
goog.setTestOnly=function(a){if(goog.DISALLOW_TEST_ONLY_CODE)throw a=a||"",Error("Importing test-only code into non-debug environment"+(a?": "+a:"."));};goog.forwardDeclare=function(a){};COMPILED||(goog.isProvided_=function(a){return a in goog.loadedModules_||!goog.implicitNamespaces_[a]&&goog.isDefAndNotNull(goog.getObjectByName(a))},goog.implicitNamespaces_={"goog.module":!0});
goog.getObjectByName=function(a,b){for(var c=a.split("."),d=b||goog.global,e=0;e<c.length;e++)if(d=d[c[e]],!goog.isDefAndNotNull(d))return null;return d};goog.globalize=function(a,b){var c=b||goog.global,d;for(d in a)c[d]=a[d]};goog.addDependency=function(a,b,c,d){if(goog.DEPENDENCIES_ENABLED){var e=goog.getLoader_();e&&e.addDependency(a,b,c,d)}};goog.ENABLE_DEBUG_LOADER=!0;goog.logToConsole_=function(a){goog.global.console&&goog.global.console.error(a)};
goog.require=function(a){goog.ENABLE_DEBUG_LOADER&&goog.debugLoader_&&goog.getLoader_().earlyProcessLoad(a);if(!COMPILED){if(goog.isProvided_(a)){if(goog.isInModuleLoader_())return goog.module.getInternal_(a)}else if(goog.ENABLE_DEBUG_LOADER){var b=goog.moduleLoaderState_;goog.moduleLoaderState_=null;try{var c=goog.getLoader_();c?c.load(a):goog.logToConsole_("Could not load "+a+" because there is no debug loader.")}finally{goog.moduleLoaderState_=b}}return null}};goog.basePath="";
goog.nullFunction=function(){};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};goog.addSingletonGetter=function(a){a.instance_=void 0;a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.LOAD_MODULE_USING_EVAL=!0;goog.SEAL_MODULE_EXPORTS=goog.DEBUG;goog.loadedModules_={};goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.TRANSPILE="detect";goog.TRANSPILER="transpile.js";goog.DEBUG_LOADER="";goog.hasBadLetScoping=null;goog.useSafari10Workaround=function(){if(null==goog.hasBadLetScoping){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(b){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping};goog.workaroundSafari10EvalBug=function(a){return"(function(){"+a+"\n;})();\n"};
goog.loadModule=function(a){var b=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:void 0,declareLegacyNamespace:!1};if(goog.isFunction(a))var c=a.call(void 0,{});else if(goog.isString(a))goog.useSafari10Workaround()&&(a=goog.workaroundSafari10EvalBug(a)),c=goog.loadModuleFromSource_.call(void 0,a);else throw Error("Invalid module definition");var d=goog.moduleLoaderState_.moduleName;if(!goog.isString(d)||!d)throw Error('Invalid module name "'+d+'"');goog.moduleLoaderState_.declareLegacyNamespace?
goog.constructNamespace_(d,c):goog.SEAL_MODULE_EXPORTS&&Object.seal&&"object"==typeof c&&null!=c&&Object.seal(c);goog.loadedModules_[d]=c}finally{goog.moduleLoaderState_=b}};goog.loadModuleFromSource_=function(a){eval(a);return{}};goog.normalizePath_=function(a){a=a.split("/");for(var b=0;b<a.length;)"."==a[b]?a.splice(b,1):b&&".."==a[b]&&a[b-1]&&".."!=a[b-1]?a.splice(--b,2):b++;return a.join("/")};
goog.loadFileSync_=function(a){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(a);try{var b=new goog.global.XMLHttpRequest;b.open("get",a,!1);b.send();return 0==b.status||200==b.status?b.responseText:null}catch(c){return null}};
goog.transpile_=function(a,b){var c=goog.global.$jscomp;c||(goog.global.$jscomp=c={});var d=c.transpile;if(!d){var e=goog.basePath+goog.TRANSPILER,f=goog.loadFileSync_(e);if(f){(function(){eval(f+"\n//# sourceURL="+e)}).call(goog.global);if(goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile;
c=goog.global.$jscomp;d=c.transpile}}d||(d=c.transpile=function(a,b){goog.logToConsole_(b+" requires transpilation but no transpiler was found.");return a});return d(a,b)};
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isFunction=function(a){return"function"==goog.typeOf(a)};
goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;
goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval){if(null==goog.evalWorksForGlobals_){try{goog.global.eval("var _evalTest_ = 1;")}catch(d){}if("undefined"!=typeof goog.global._evalTest_){try{delete goog.global._evalTest_}catch(d){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("SCRIPT");c.type="text/javascript";c.defer=
!1;c.appendChild(b.createTextNode(a));b.head.appendChild(c);b.head.removeChild(c)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;
goog.getCssName=function(a,b){if("."==String(a).charAt(0))throw Error('className passed in goog.getCssName must not start with ".". You passed: '+a);var c=function(a){return goog.cssNameMapping_[a]||a},d=function(a){a=a.split("-");for(var b=[],d=0;d<a.length;d++)b.push(c(a[d]));return b.join("-")};d=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:d:function(a){return a};d=b?a+"-"+d(b):d(a);return goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(d):d};
goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){b&&(a=a.replace(/\{\$([^}]+)}/g,function(a,d){return null!=b&&d in b?b[d]:a}));return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.base=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};
goog.base=function(a,b,c){var d=arguments.callee.caller;if(goog.STRICT_MODE_COMPATIBLE||goog.DEBUG&&!d)throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(d.superClass_){for(var e=Array(arguments.length-1),f=1;f<arguments.length;f++)e[f-1]=arguments[f];return d.superClass_.constructor.apply(a,e)}e=Array(arguments.length-2);for(f=2;f<arguments.length;f++)e[f-2]=arguments[f];f=!1;for(var g=a.constructor;g;g=
g.superClass_&&g.superClass_.constructor)if(g.prototype[b]===d)f=!0;else if(f)return g.prototype[b].apply(a,e);if(a[b]===d)return a.constructor.prototype[b].apply(a,e);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a goog.module.");a.call(goog.global)};COMPILED||(goog.global.COMPILED=COMPILED);
goog.defineClass=function(a,b){var c=b.constructor,d=b.statics;c&&c!=Object.prototype.constructor||(c=function(){throw Error("cannot instantiate an interface (no constructor defined).");});c=goog.defineClass.createSealingConstructor_(c,a);a&&goog.inherits(c,a);delete b.constructor;delete b.statics;goog.defineClass.applyProperties_(c.prototype,b);null!=d&&(d instanceof Function?d(c):goog.defineClass.applyProperties_(c,d));return c};goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG;
goog.defineClass.createSealingConstructor_=function(a,b){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return a;var c=!goog.defineClass.isUnsealable_(b),d=function(){var b=a.apply(this,arguments)||this;b[goog.UID_PROPERTY_]=b[goog.UID_PROPERTY_];this.constructor===d&&c&&Object.seal instanceof Function&&Object.seal(b);return b};return d};goog.defineClass.isUnsealable_=function(a){return a&&a.prototype&&a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]};goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
goog.defineClass.applyProperties_=function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c]);for(var d=0;d<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;d++)c=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d],Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])};goog.tagUnsealableClass=function(a){!COMPILED&&goog.defineClass.SEAL_CLASS_INSTANCES&&(a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]=!0)};goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable";
goog.DEPENDENCIES_ENABLED&&(goog.inHtmlDocument_=function(){var a=goog.global.document;return null!=a&&"write"in a},goog.findBasePath_=function(){if(goog.isDef(goog.global.CLOSURE_BASE_PATH)&&goog.isString(goog.global.CLOSURE_BASE_PATH))goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_()){var a=goog.global.document,b=a.currentScript;a=b?[b]:a.getElementsByTagName("SCRIPT");for(b=a.length-1;0<=b;--b){var c=a[b].src,d=c.lastIndexOf("?");d=-1==d?c.length:d;if("base.js"==c.substr(d-
7,7)){goog.basePath=c.substr(0,d-7);break}}}},goog.findBasePath_(),goog.Transpiler=function(){this.requiresTranspilation_=null},goog.Transpiler.prototype.createRequiresTranspilation_=function(){function a(a,b){d?c[a]=!0:b()?c[a]=!1:d=c[a]=!0}function b(a){try{return!!eval(a)}catch(g){return!1}}var c={es3:!1},d=!1,e=goog.global.navigator&&goog.global.navigator.userAgent?goog.global.navigator.userAgent:"";a("es5",function(){return b("[1,].length==1")});a("es6",function(){var a=e.match(/Edge\/(\d+)(\.\d)*/i);
return a&&15>Number(a[1])?!1:b('(()=>{"use strict";class X{constructor(){if(new.target!=String)throw 1;this.x=42}}let q=Reflect.construct(X,[],String);if(q.x!=42||!(q instanceof String))throw 1;for(const a of[2,3]){if(a==2)continue;function f(z={a}){let a=0;return z.a}{function f(){return 0;}}return f()==3}})()')});a("es6-impl",function(){return!0});a("es7",function(){return b("2 ** 2 == 4")});a("es8",function(){return b("async () => 1, true")});return c},goog.Transpiler.prototype.needsTranspile=
function(a){if("always"==goog.TRANSPILE)return!0;if("never"==goog.TRANSPILE)return!1;this.requiresTranspilation_||(this.requiresTranspilation_=this.createRequiresTranspilation_());if(a in this.requiresTranspilation_)return this.requiresTranspilation_[a];throw Error("Unknown language mode: "+a);},goog.Transpiler.prototype.transpile=function(a,b){return goog.transpile_(a,b)},goog.transpiler_=new goog.Transpiler,goog.DebugLoader=function(){this.dependencies_={loadFlags:{},nameToPath:{},requires:{},visited:{},
written:{},deferred:{}};this.oldIeWaiting_=!1;this.queuedModules_=[];this.lastNonModuleScriptIndex_=0},goog.DebugLoader.IS_OLD_IE_=!(goog.global.atob||!goog.global.document||!goog.global.document.all),goog.DebugLoader.prototype.earlyProcessLoad=function(a){goog.DebugLoader.IS_OLD_IE_&&this.maybeProcessDeferredDep_(a)},goog.DebugLoader.prototype.load=function(a){var b=this.getPathFromDeps_(a);if(b){var c=function(a){if(!(a in f.written||a in f.visited)){f.visited[a]=!0;if(a in f.requires)for(var b in f.requires[a])if(!g.isProvided(b))if(b in
f.nameToPath)c(f.nameToPath[b]);else throw Error("Undefined nameToPath for "+b);a in e||(e[a]=!0,d.push(a))}},d=[],e={},f=this.dependencies_,g=this;c(b);for(a=0;a<d.length;a++)b=d[a],this.dependencies_.written[b]=!0;for(a=0;a<d.length;a++)if(b=d[a]){var h=f.loadFlags[b]||{},k=h.lang||"es3";k=this.getTranspiler().needsTranspile(k);"goog"==h.module||k?this.importProcessedScript_(goog.basePath+b,"goog"==h.module,k):this.importScript_(goog.basePath+b)}else throw Error("Undefined script input");}else throw a=
"goog.require could not find: "+a,this.logToConsole(a),Error(a);},goog.DebugLoader.prototype.addDependency=function(a,b,c,d){var e;a=a.replace(/\\/g,"/");var f=this.dependencies_;d&&"boolean"!==typeof d||(d=d?{module:"goog"}:{});for(var g=0;e=b[g];g++)f.nameToPath[e]=a,f.loadFlags[a]=d;for(d=0;b=c[d];d++)a in f.requires||(f.requires[a]={}),f.requires[a][b]=!0},goog.DebugLoader.prototype.importScript_=function(a,b){(goog.global.CLOSURE_IMPORT_SCRIPT||goog.bind(this.writeScriptTag_,this))(a,b)&&(this.dependencies_.written[a]=
!0)},goog.DebugLoader.prototype.importProcessedScript_=function(a,b,c){this.importScript_("",'goog.debugLoader_.retrieveAndExec_("'+a+'", '+b+", "+c+");")},goog.DebugLoader.prototype.retrieveAndExec_=function(a,b,c){if(!COMPILED){var d=a;a=this.normalizePath(a);var e=goog.global.CLOSURE_IMPORT_SCRIPT||goog.bind(this.writeScriptTag_,this),f=this.loadFileSync(a);if(null==f)throw Error('Load of "'+a+'" failed');c&&(f=this.getTranspiler().transpile(f,a));f=b?this.wrapModule_(a,f):f+("\n//# sourceURL="+
a);goog.DebugLoader.IS_OLD_IE_&&this.oldIeWaiting_?(this.dependencies_.deferred[d]=f,this.queuedModules_.push(d)):e(a,f)}},goog.DebugLoader.prototype.wrapModule_=function(a,b){return goog.LOAD_MODULE_USING_EVAL&&goog.isDef(goog.global.JSON)?"goog.loadModule("+goog.global.JSON.stringify(b+"\n//# sourceURL="+a+"\n")+");":'goog.loadModule(function(exports) {"use strict";'+b+"\n;return exports});\n//# sourceURL="+a+"\n"},goog.DebugLoader.prototype.loadQueuedModules_=function(){var a=this.queuedModules_.length;
if(0<a){var b=this.queuedModules_;this.queuedModules_=[];for(var c=0;c<a;c++)this.maybeProcessDeferredPath_(b[c])}this.oldIeWaiting_=!1},goog.DebugLoader.prototype.maybeProcessDeferredDep_=function(a){this.isDeferredModule_(a)&&this.allDepsAreAvailable_(a)&&(a=this.getPathFromDeps_(a),this.maybeProcessDeferredPath_(goog.basePath+a))},goog.DebugLoader.prototype.isDeferredModule_=function(a){var b=(a=this.getPathFromDeps_(a))&&this.dependencies_.loadFlags[a]||{},c=b.lang||"es3";return a&&("goog"==b.module||
this.getTranspiler().needsTranspile(c))?goog.basePath+a in this.dependencies_.deferred:!1},goog.DebugLoader.prototype.allDepsAreAvailable_=function(a){if((a=this.getPathFromDeps_(a))&&a in this.dependencies_.requires)for(var b in this.dependencies_.requires[a])if(!this.isProvided(b)&&!this.isDeferredModule_(b))return!1;return!0},goog.DebugLoader.prototype.maybeProcessDeferredPath_=function(a){if(a in this.dependencies_.deferred){var b=this.dependencies_.deferred[a];delete this.dependencies_.deferred[a];
goog.globalEval(b)}},goog.DebugLoader.prototype.writeScriptSrcNode_=function(a){goog.global.document.write('<script type="text/javascript" src="'+a+'">\x3c/script>')},goog.DebugLoader.prototype.appendScriptSrcNode_=function(a){var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.src=a;c.defer=!1;c.async=!1;b.head.appendChild(c)},goog.DebugLoader.prototype.writeScriptTag_=function(a,b){if(this.inHtmlDocument()){var c=goog.global.document;if(!goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING&&
"complete"==c.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}if(void 0===b)if(goog.DebugLoader.IS_OLD_IE_){this.oldIeWaiting_=!0;var d=" onreadystatechange='goog.debugLoader_.onScriptLoad_(this, "+ ++this.lastNonModuleScriptIndex_+")' ";c.write('<script type="text/javascript" src="'+a+'"'+d+">\x3c/script>")}else goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING?this.appendScriptSrcNode_(a):this.writeScriptSrcNode_(a);else c.write('<script type="text/javascript">'+
this.protectScriptTag_(b)+"\x3c/script>");return!0}return!1},goog.DebugLoader.prototype.protectScriptTag_=function(a){return a.replace(/<\/(SCRIPT)/ig,"\\x3c/$1")},goog.DebugLoader.prototype.onScriptLoad_=function(a,b){"complete"==a.readyState&&this.lastNonModuleScriptIndex_==b&&this.loadQueuedModules_();return!0},goog.DebugLoader.prototype.getPathFromDeps_=function(a){return a in this.dependencies_.nameToPath?this.dependencies_.nameToPath[a]:null},goog.DebugLoader.prototype.getTranspiler=function(){return goog.transpiler_},
goog.DebugLoader.prototype.isProvided=function(a){return goog.isProvided_(a)},goog.DebugLoader.prototype.inHtmlDocument=function(){return goog.inHtmlDocument_()},goog.DebugLoader.prototype.logToConsole=function(a){goog.logToConsole_(a)},goog.DebugLoader.prototype.loadFileSync=function(a){return goog.loadFileSync_(a)},goog.DebugLoader.prototype.normalizePath=function(a){return goog.normalizePath_(a)},goog.debugLoader_=null,goog.registerDebugLoader=function(a){if(goog.debugLoader_)throw Error("Debug loader already registered!");
if(!(a instanceof goog.DebugLoader))throw Error("Not a goog.DebugLoader.");goog.debugLoader_=a},goog.getLoader_=function(){if(!goog.debugLoader_&&goog.DEBUG_LOADER)throw Error("Loaded debug loader file but no loader was registered!");goog.debugLoader_||(goog.debugLoader_=new goog.DebugLoader);return goog.debugLoader_},function(){if(goog.DEBUG_LOADER){var a=new goog.DebugLoader;a.importScript_(goog.basePath+goog.DEBUG_LOADER)}goog.global.CLOSURE_NO_DEPS||(a=a||new goog.DebugLoader,goog.DEBUG_LOADER||
goog.registerDebugLoader(a),a.importScript_(goog.basePath+"deps.js"))}());Blockly.Blocks||(Blockly.Blocks={});
Blockly.Blocks.math_number={init:function(){"Scribbler Robot"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_S3_MATH_HELPURL),this.setColour(colorPalette.getColor("math"))):(this.setHelpUrl(Blockly.MSG_VALUES_HELPURL),this.setColour(colorPalette.getColor("programming")));this.setTooltip(Blockly.MSG_MATH_NUMBER_TOOLTIP);this.appendDummyInput("MAIN").appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"NUM");this.appendDummyInput("HIDDENVALS").appendField("","RVALS").appendField("",
"CONN").setVisible(!1);this.setOutput(!0,"Number");this.connection_id_=null;this.onchange()},onchange:function(){var a=["N","-100","100","0"],b=[-100,100,0],c=this.getFieldValue("NUM");if(this.outputConnection)if(null!==this.outputConnection.targetBlock()){var d,e=this.outputConnection.targetBlock().getInputWithBlock(this).fieldRow;for(d in e)if(e.hasOwnProperty(d)&&!isNaN(parseInt(d,10))){var f=e[d].name||" ";if("RANGEVALS"===f.substring(0,9)){var g=f;break}}if(d=this.outputConnection.targetBlock())if(g=
d.getFieldValue(g))if(a=g.split(","),"S"===a[0]||"R"===a[0]||"A"===a[0])for(g=1;g<=a.length;g++)b[g-1]=Number(a[g]);this.outputConnection.targetBlock().getInputWithBlock(this)!==this.connection_id_&&(g=this.getFieldValue("NUM"),this.removeInput("MAIN"),"S"===a[0]?(g=Number(g),g>b[1]&&(g=b[1]),g<b[0]&&(g=b[0]),this.setWarningText(null),this.appendDummyInput("MAIN").appendField(new Blockly.FieldRange(g.toString(10),b[0].toString(10),b[1].toString(10)),"NUM")):this.appendDummyInput("MAIN").appendField(new Blockly.FieldTextInput(g,
Blockly.FieldTextInput.numberValidator),"NUM"));this.connection_id_=this.outputConnection.targetBlock().getInputWithBlock(this)}else this.connection_id_&&(g=this.getFieldValue("NUM"),this.removeInput("MAIN"),this.appendDummyInput("MAIN").appendField(new Blockly.FieldTextInput(g,Blockly.FieldTextInput.numberValidator),"NUM")),this.connection_id_=null,a=["N","-100","100","0"];b[2]=Number(this.getFieldValue("NUM"));if(a){if("R"===a[0])b[2]<b[0]?this.setWarningText("WARNING: Your value is too small!  It must be greater than or equal to "+
b[0].toString(10)):b[2]>b[1]?this.setWarningText("WARNING: Your value is too large!  It must be less than or equal to "+b[1].toString(10)):this.setWarningText(null);else if("A"===a[0]){d="none";for(g=0;g<b.length;g++)b[2]===Number(a[g])&&(d="match");"none"===d?this.setWarningText("WARNING: The value you entered is not available or not allowed!"):this.setWarningText(null)}else this.setWarningText(null);"R"===a[0]&&(b[2]<b[0]||b[2]>b[1])&&1E7>=Math.abs(b[0]-b[1])?this.getField("TITLE")?2147483647<=
b[1]?this.setFieldValue("(\u2265 "+b[0].toString(10)+")","TITLE"):-2147483647>=b[0]?this.setFieldValue("(\u2264"+b[1].toString(10)+")","TITLE"):Math.abs(b[0])===Math.abs(b[1])?this.setFieldValue("(+/- "+Math.abs(b[0]).toString(10)+")","TITLE"):this.setFieldValue("("+b[0].toString(10)+" to "+b[1].toString(10)+")","TITLE"):(this.removeInput("MAIN"),this.appendDummyInput("MAIN").appendField(new Blockly.FieldTextInput(c,Blockly.FieldTextInput.numberValidator),"NUM").appendField("","TITLE")):this.getField("TITLE")&&
(this.removeInput("MAIN"),"S"===a[0]?this.appendDummyInput("MAIN").appendField(new Blockly.FieldRange(c,b[0].toString(10),b[1].toString(10)),"NUM"):this.appendDummyInput("MAIN").appendField(new Blockly.FieldTextInput(c,Blockly.FieldTextInput.numberValidator),"NUM"));this.setFieldValue(a.toString(),"RVALS")}else this.getField("TITLE")&&(this.removeInput("MAIN"),this.appendDummyInput("MAIN").appendField(new Blockly.FieldTextInput(c,Blockly.FieldTextInput.numberValidator),"NUM")),this.setFieldValue("",
"RVALS"),this.setWarningText(null)}};Blockly.propc.math_number=function(){var a=window.parseInt(this.getFieldValue("NUM"));return[a,0>a?Blockly.propc.ORDER_UNARY_PREFIX:Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.math_arithmetic={init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_MATH_HELPURL):this.setHelpUrl(Blockly.MSG_NUMBERS_HELPURL);this.setTooltip(Blockly.MSG_MATH_ARITHMETIC_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.setOutput(!0,"Number");this.appendValueInput("A").setCheck("Number");this.appendValueInput("B").setCheck("Number").appendField(new Blockly.FieldDropdown([["+"," + "],["-"," - "],["\u00d7"," * "],["\u00f7"," / "],
["% (remainder after division)"," % "],["^ (raise to the power of)"," p "]]),"OP");this.setInputsInline(!0);this.myChildren_="B";this.myConnection_=null;this.setMutator(new Blockly.Mutator(["math_arithmatic_term"]))},mutationToDom:function(a){a=document.createElement("mutation");a.setAttribute("terms",this.myChildren_);return a},domToMutation:function(a){this.myChildren_=a.getAttribute("terms");if(66<this.myChildren_.charCodeAt(0))for(a=67;a<=this.myChildren_.charCodeAt(0);a++)this.appendValueInput(String.fromCharCode(a)).setCheck("Number").appendField(new Blockly.FieldDropdown([["+",
" + "],["-"," - "],["\u00d7"," * "],["\u00f7"," / "],["% (remainder after division)"," % "],["^ (raise to the power of)"," p "]]),"OP"+String.fromCharCode(a))},decompose:function(a){var b=Blockly.Block.obtain(a,"math_arithmatic_container");b.initSvg();var c=b.getInput("STACK").connection;if(66<this.myChildren_.charCodeAt(0))for(var d=67;d<=this.myChildren_.charCodeAt(0);d++){var e=a.newBlock("math_arithmatic_term");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){for(var b=
67;this.getInput(String.fromCharCode(b));)this.removeInput(String.fromCharCode(b)),b++;b=67;for(a=a.getInputTargetBlock("STACK");a;){var c=this.appendValueInput(String.fromCharCode(b)).setCheck("Number").appendField(new Blockly.FieldDropdown([["+"," + "],["-"," - "],["\u00d7"," * "],["\u00f7"," / "],["% (remainder after division)"," % "],["^ (raise to the power of)"," p "]]),"OP"+String.fromCharCode(b));a.valueConnection_&&c.connection.connect(a.valueConnection_);b++;a=a.nextConnection&&a.nextConnection.targetBlock()}this.myChildren_=
String.fromCharCode(b-1)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=67;a;){var c=this.getInput(String.fromCharCode(b));a.valueConnection_=c&&c.connection.targetConnection;a=a.nextConnection&&a.nextConnection.targetBlock();b++}}};
Blockly.Blocks.math_arithmatic_container={init:function(){this.setColour(colorPalette.getColor("math"));this.appendDummyInput().appendField("Math");this.appendDummyInput().appendField("  term");this.appendDummyInput().appendField("  term");this.setInputsInline(!1);this.appendStatementInput("STACK");this.contextMenu=!1}};
Blockly.Blocks.math_arithmatic_term={init:function(){this.setColour(colorPalette.getColor("math"));this.appendDummyInput().appendField("term");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.contextMenu=!1}};
Blockly.propc.math_arithmetic=function(){var a=[this.getFieldValue("OP")],b=[Blockly.propc.valueToCode(this,"A",Blockly.propc.ORDER_MULTIPLICATIVE)||"0"];b.push(Blockly.propc.valueToCode(this,"B",Blockly.propc.ORDER_MULTIPLICATIVE)||"0");for(var c="",d=67;90>=d;d++)Blockly.propc.valueToCode(this,String.fromCharCode(d),Blockly.propc.ORDER_MULTIPLICATIVE)?(a.push(this.getFieldValue("OP"+String.fromCharCode(d))),b.push(Blockly.propc.valueToCode(this,String.fromCharCode(d),Blockly.propc.ORDER_MULTIPLICATIVE))):
(a.push(""),b.push(""));a.push("");for(d=0;26>d;d++)if(" p "===a[d])c+="pow("+b[d]+", ";else if(0<d){for(var e="",f=d-1;-1<f;){if(" p "===a[f])e+=")";else break;f--}c+=b[d]+e+a[d]}else c+=b[d],c+=a[d];return[c,Blockly.propc.ORDER_NONE]};
Blockly.Blocks.math_limit={helpUrl:Blockly.MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MATH_LIMIT_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("A").setCheck("Number").appendField(new Blockly.FieldDropdown([["highest of"," > "],["lowest of"," < "]]),"OP");this.appendValueInput("B").setCheck("Number").appendField("and");this.setInputsInline(!0);this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.math_limit=function(){var a=this.getFieldValue("OP"),b=Blockly.propc.valueToCode(this,"A",Blockly.propc.ORDER_ASSIGNMENT)||"0",c=Blockly.propc.valueToCode(this,"B",Blockly.propc.ORDER_ASSIGNMENT)||"0";return["("+b+a+c+" ? "+b+" : "+c+")",Blockly.propc.ORDER_ASSIGNMENT]};
Blockly.Blocks.math_crement={init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_MATH_HELPURL):this.setHelpUrl(Blockly.MSG_NUMBERS_HELPURL);this.setTooltip(Blockly.MSG_MATH_CREMENT_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("VAR").setCheck("Number").appendField(new Blockly.FieldDropdown([["decrement","--"],["increment","++"]]),"OP");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0)}};
Blockly.propc.math_crement=function(){var a=this.getFieldValue("OP");return(Blockly.propc.valueToCode(this,"VAR",Blockly.propc.ORDER_UNARY_PREFIX)||"0")+a+";\n"};
Blockly.Blocks.math_random={init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_MATH_HELPURL):this.setHelpUrl(Blockly.MSG_NUMBERS_HELPURL);this.setTooltip(Blockly.MSG_MATH_RANDOM_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("A").setCheck("Number").appendField("random number from");this.appendValueInput("B").setCheck("Number").appendField("to");this.setInputsInline(!0);this.setPreviousStatement(!1,null);this.setNextStatement(!1,
null);this.setOutput(!0,"Number")}};Blockly.propc.math_random=function(){Blockly.propc.setups_.random_seed="srand(INA + CNT);\n";var a=Blockly.propc.valueToCode(this,"A",Blockly.propc.ORDER_ATOMIC)||"0",b=Blockly.propc.valueToCode(this,"B",Blockly.propc.ORDER_ATOMIC)||"99";return["("+a+" + rand() % ("+b+" - "+a+" + 1))",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.math_bitwise={helpUrl:Blockly.MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MATH_BITWISE_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("A").setCheck("Number");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["& (bitwise AND)"," & "],["| (bitwise OR)"," | "],["^ (bitwise XOR)"," ^ "],[">> (bitwise right shift)"," >> "],["<< (bitwise left shift)"," << "]]),"OP");this.appendValueInput("B").setCheck("Number");this.setOutput(!0,
"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};Blockly.propc.math_bitwise=function(){var a=Blockly.propc.valueToCode(this,"A",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"B",Blockly.propc.ORDER_NONE),c=this.getFieldValue("OP");return[a+c+b,Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.base_delay={helpUrl:Blockly.MSG_CONTROL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_BASE_DELAY_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendValueInput("DELAY_TIME","Number").appendField("pause (ms)").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},onchange:function(a){}};
Blockly.propc.base_delay=function(){return"pause("+(Blockly.propc.valueToCode(this,"DELAY_TIME",Blockly.propc.ORDER_ATOMIC)||"1000")+");\n"};
Blockly.Blocks.string_type_block={helpUrl:Blockly.MSG_VALUES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_STRING_TYPE_BLOCK_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField("\u201c").appendField(new Blockly.FieldTextInput("Hello"),"TEXT").appendField("\u201d");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"String")}};
Blockly.propc.string_type_block=function(){return['"'+this.getFieldValue("TEXT").replace(/"/g,'\\"')+'"',Blockly.propc.ORDER_NONE]};
Blockly.Blocks.char_type_block={helpUrl:Blockly.MSG_VALUES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CHAR_TYPE_BLOCK_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField("character").appendField(new Blockly.FieldDropdown([["32 - space","32"],["33 - !","33"],['34 - "',"34"],["35 - #","35"],["36 - $","36"],["37 - %","37"],["38 - &","38"],["39 - '","39"],["40 - (","40"],["41 - )","41"],["42 - *","42"],["43 - +","43"],["44 - ,","44"],["45 - -","45"],
["46 - .","46"],["47 - /","47"],["48 - 0","48"],["49 - 1","49"],["50 - 2","50"],["51 - 3","51"],["52 - 4","52"],["53 - 5","53"],["54 - 6","54"],["55 - 7","55"],["56 - 8","56"],["57 - 9","57"],["58 - :","58"],["59 - ;","59"],["60 - <","60"],["61 - =","61"],["62 - >","62"],["63 - ?","63"],["64 - @","64"],["65 - A","65"],["66 - B","66"],["67 - C","67"],["68 - D","68"],["69 - E","69"],["70 - F","70"],["71 - G","71"],["72 - H","72"],["73 - I","73"],["74 - J","74"],["75 - K","75"],["76 - L","76"],["77 - M",
"77"],["78 - N","78"],["79 - O","79"],["80 - P","80"],["81 - Q","81"],["82 - R","82"],["83 - S","83"],["84 - T","84"],["85 - U","85"],["86 - V","86"],["87 - W","87"],["88 - X","88"],["89 - Y","89"],["90 - Z","90"],["91 - [","91"],["92 - \\","92"],["93 - ]","93"],["94 - ^","94"],["95 - _","95"],["96 - `","96"],["97 - a","97"],["98 - b","98"],["99 - c","99"],["100 - d","100"],["101 - e","101"],["102 - f","102"],["103 - g","103"],["104 - h","104"],["105 - i","105"],["106 - j","106"],["107 - k","107"],
["108 - l","108"],["109 - m","109"],["110 - n","110"],["111 - o","111"],["112 - p","112"],["113 - q","113"],["114 - r","114"],["115 - s","115"],["116 - t","116"],["117 - u","117"],["118 - v","118"],["119 - w","119"],["120 - x","120"],["121 - y","121"],["122 - z","122"],["123 - {","123"],["124 - |","124"],["125 - }","125"],["126 - ~","126"],["7 - bell","7"],["10 - line feed","10"],["11 - tab","11"],["13 - carriage return","13"],["127 - delete","127"]]),"CHAR");this.setPreviousStatement(!1,null);this.setNextStatement(!1,
null);this.setOutput(!0,"Number")}};Blockly.propc.char_type_block=function(){return[this.getFieldValue("CHAR"),Blockly.propc.ORDER_NONE]};
Blockly.Blocks.music_note={helpUrl:Blockly.MSG_VALUES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MUSIC_NOTE_BLOCK_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField("music note").appendField(new Blockly.FieldDropdown([["B","3951.07"],["A\u266f/B\u266d","3729.31"],["A","3520.00"],["G\u266f/A\u266d","3322.44"],["G","3135.96"],["F\u266f/G\u266d","2959.96"],["F","2793.83"],["E","2637.02"],["D\u266f/E\u266d","2489.02"],["D","2349.32"],["C\u266f/D\u266d",
"2217.46"],["C","2093.00"]]),"NOTE").appendField("octave").appendField(new Blockly.FieldDropdown([["1st","0.015625"],["2nd","0.03125"],["3th","0.0625"],["4th","0.125"],["5th","0.25"],["6th","0.5"],["7th","1"],["8th","2"]]),"OCTAVE");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number")}};Blockly.propc.music_note=function(){return[Math.round(parseFloat(this.getFieldValue("NOTE"))*parseFloat(this.getFieldValue("OCTAVE"))).toString(10),Blockly.propc.ORDER_NONE]};
Blockly.Blocks.system_counter={init:function(){this.setTooltip(Blockly.MSG_SYSTEM_COUNTER_TOOLTIP);"Other Propeller Boards"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_SYSTEM_HELPURL),this.setColour(colorPalette.getColor("system"))):(this.setColour(colorPalette.getColor("programming")),this.setHelpUrl(Blockly.MSG_VALUES_HELPURL));this.appendDummyInput().appendField("system").appendField(new Blockly.FieldDropdown([["counter","CNT"],["clock frequency","CLKFREQ"]]),"CMD");this.setOutput(!0,
"Number")}};Blockly.propc.system_counter=function(){return[this.getFieldValue("CMD"),Blockly.propc.ORDER_NONE]};Blockly.Blocks.waitcnt={helpUrl:Blockly.MSG_SYSTEM_HELPURL,init:function(){this.setTooltip(Blockly.MSG_WAITCNT_TOOLTIP);this.setColour(colorPalette.getColor("system"));this.appendValueInput("TARGET").setCheck("Number").appendField("Wait until");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.waitcnt=function(){return"waitcnt("+Blockly.propc.valueToCode(this,"TARGET",Blockly.propc.ORDER_NONE)+");\n"};
Blockly.Blocks.register_set={helpUrl:Blockly.MSG_SYSTEM_HELPURL,init:function(){this.setTooltip(Blockly.MSG_REGISTER_SET_TOOLTIP);this.setColour(colorPalette.getColor("system"));this.appendValueInput("TARGET").setCheck("Number").appendField("cog").appendField(new Blockly.FieldDropdown([["pin output","OUTA"],["pin direction","DIRA"],["counter A","CTRA"],["counter B","CTRB"],["frequency A","FRQA"],["frequency B","FRQB"],["phase accumulator A","PHSA"],["phase accumulator B","PHSB"]]),"CMD").appendField("register =");
this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};Blockly.propc.register_set=function(){var a=Blockly.propc.valueToCode(this,"TARGET",Blockly.propc.ORDER_NONE);return this.getFieldValue("CMD")+" = "+a+";\n"};
Blockly.Blocks.register_get={helpUrl:Blockly.MSG_SYSTEM_HELPURL,init:function(){this.setTooltip(Blockly.MSG_REGISTER_GET_TOOLTIP);this.setColour(colorPalette.getColor("system"));this.appendDummyInput().appendField("cog").appendField(new Blockly.FieldDropdown([["pin input","INA"],["pin output","OUTA"],["pin direction","DIRA"],["counter A","CTRA"],["counter B","CTRB"],["frequency A","FRQA"],["frequency B","FRQB"],["phase accumulator A","PHSA"],["phase accumulator B","PHSB"]]),"CMD").appendField("register");
this.setOutput(!0,"Number")}};Blockly.propc.register_get=function(){return[this.getFieldValue("CMD"),Blockly.propc.ORDER_NONE]};var cCode;
Blockly.Blocks.custom_code={helpUrl:Blockly.MSG_SYSTEM_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CUSTOM_CODE_TOOLTIP);this.setColour(colorPalette.getColor("system"));this.appendDummyInput().appendField("user code").appendField(new Blockly.FieldTextInput(""),"CODE").appendField("in").appendField(new Blockly.FieldDropdown([["main","main"],["setup","setup"],["definitions","definitions"],["includes","includes"]]),"LOC");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,
null)}};Blockly.propc.custom_code=function(){var a=this.getFieldValue("LOC"),b=this.getFieldValue("CODE"),c="";"includes"===a?Blockly.definitions_["cCode"+cCode]=b:"setup"===a?Blockly.propc.setups_["cCode"+cCode]=b:"definitions"===a?Blockly.propc.global_vars_["cCode"+cCode]=b:c=b;cCode++;return c};
Blockly.Blocks.string_length={helpUrl:Blockly.MSG_STRINGS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_STRING_LENGTH_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("VALUE").setCheck("String").appendField("length of string");this.setInputsInline(!0);this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.string_length=function(){return["strlen("+Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_NONE)+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.high_low_value={helpUrl:Blockly.MSG_VALUES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_HIGH_LOW_VALUE_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField(new Blockly.FieldDropdown([["high","1"],["low","0"]]),"VALUE");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};Blockly.propc.high_low_value=function(){return[this.getFieldValue("VALUE"),Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.comment={helpUrl:Blockly.MSG_CONTROL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_COMMENT_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput("MAIN").appendField("add","TITLE").appendField(new Blockly.FieldDropdown([["comment","COMMENT"],["blank separator","SPACER"],["***       ","SPACER"]],function(a){this.sourceBlock_.updateShape_({ACTION:a})}),"ACTION").appendField(new Blockly.FieldTextInput(""),"COMMENT_TEXT");this.setPreviousStatement(!0,
"Block");this.setNextStatement(!0,null)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("ACTION");a.setAttribute("action",b);return a},domToMutation:function(a){a=a.getAttribute("action");this.updateShape_({ACTION:a})},updateShape_:function(a){var b=a.ACTION;void 0===a.ACTION&&(b=this.getFieldValue("ACTION"));this.getFieldValue("COMMENT_TEXT");this.removeInput("MAIN");"COMMENT"===b?(this.setColour(colorPalette.getColor("programming")),this.appendDummyInput("MAIN").appendField("add",
"TITLE").appendField(new Blockly.FieldDropdown([["comment","COMMENT"],["blank separator","SPACER"]],function(a){this.sourceBlock_.updateShape_({ACTION:a})}),"ACTION").appendField(new Blockly.FieldTextInput(""),"COMMENT_TEXT")):"SPACER"===b&&"#FFFFFF"!==this.getColour&&(this.setColour("#FFFFFF"),this.appendDummyInput("MAIN").appendField("   ","TITLE").appendField(new Blockly.FieldDropdown([["comment","COMMENT"],["       \u25bd       ","SPACER"]],function(a){this.sourceBlock_.updateShape_({ACTION:a})}),
"ACTION").appendField(new Blockly.FieldTextInput(""),"COMMENT_TEXT"),this.setFieldValue("SPACER","ACTION"),this.getField("COMMENT_TEXT").setVisible(!1))}};Blockly.propc.comment=function(){return"// "+this.getFieldValue("COMMENT_TEXT")+"\n"};
Blockly.Blocks.color_picker={helpUrl:Blockly.MSG_VALUES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_COLOR_PICKER_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField("color").appendField((new Blockly.FieldColour("#FFFFFF")).setColours("#FFFFFF #CCCCCC #C0C0C0 #999999 #666666 #333333 #000000 #FFCCCC #FF6666 #FF0000 #CC0000 #990000 #660000 #330000 #FFCC99 #FF9966 #FF9900 #FF6600 #CC6600 #993300 #663300 #FFFF99 #FFFF66 #FFCC66 #FFCC33 #CC9933 #996633 #663333 #FFFFCC #FFFF33 #FFFF00 #FFCC00 #999900 #666600 #333300 #99FF99 #66FF99 #33FF33 #33CC00 #009900 #006600 #003300 #99FFFF #33FFFF #66CCCC #00CCCC #339999 #336666 #003333 #CCFFFF #66FFFF #33CCFF #3366FF #3333FF #000099 #000066 #CCCCFF #9999FF #6666CC #6633FF #6600CC #333399 #330099 #FFCCFF #FF66FF #CC66CC #CC33CC #993399 #663366 #330033".split(" ")).setColumns(7),"COLOR");
this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number")}};Blockly.propc.color_picker=function(){var a=this.getFieldValue("COLOR");a="0x"+a.substr(1);return[a]};
Blockly.Blocks.color_value_from={helpUrl:Blockly.MSG_VALUES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_COLOR_VALUE_FROM_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField("color value from:");this.appendValueInput("RED_VALUE").appendField("R,0,255,0","RANGEVALS0").appendField("red").setCheck("Number");this.appendValueInput("GREEN_VALUE").appendField("R,0,255,0","RANGEVALS1").appendField("green").setCheck("Number");this.appendValueInput("BLUE_VALUE").appendField("R,0,255,0",
"RANGEVALS2").appendField("blue").setCheck("Number");this.getField("RANGEVALS0").setVisible(!1);this.getField("RANGEVALS1").setVisible(!1);this.getField("RANGEVALS2").setVisible(!1);this.setOutput(!0,"Number");this.setInputsInline(!0);this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.color_value_from=function(){var a=Blockly.propc.valueToCode(this,"RED_VALUE",Blockly.propc.ORDER_NONE)||"0",b=Blockly.propc.valueToCode(this,"GREEN_VALUE",Blockly.propc.ORDER_NONE)||"0",c=Blockly.propc.valueToCode(this,"BLUE_VALUE",Blockly.propc.ORDER_NONE)||"0";Blockly.propc.definitions_.colormath='#include "colormath.h"';return["getColorRRGGBB("+a+", "+b+", "+c+")"]};
Blockly.Blocks.get_channel_from={helpUrl:Blockly.MSG_VALUES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GET_CHANNEL_FROM_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField("get").appendField(new Blockly.FieldDropdown([["Red","R"],["Green","G"],["Blue","B"]]),"CHANNEL");this.appendValueInput("COLOR").appendField("value from").setCheck("Number");this.setOutput(!0,"Number");this.setInputsInline(!0);this.setPreviousStatement(!1,null);this.setNextStatement(!1,
null)}};Blockly.propc.get_channel_from=function(){var a=this.getFieldValue("CHANNEL"),b=Blockly.propc.valueToCode(this,"COLOR",Blockly.propc.ORDER_NONE);Blockly.propc.definitions_.colormath='#include "colormath.h"';return["get8bitColor("+b+', "'+a+'")']};
Blockly.Blocks.compare_colors={helpUrl:Blockly.MSG_VALUES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_COMPARE_COLORS_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField("compare");this.appendValueInput("COLOR1").appendField("color 1:").setCheck("Number");this.appendValueInput("COLOR2").appendField("color 2:").setCheck("Number");this.setOutput(!0,"Number");this.setInputsInline(!0);this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.compare_colors=function(){var a=Blockly.propc.valueToCode(this,"COLOR1",Blockly.propc.ORDER_NONE)||"0",b=Blockly.propc.valueToCode(this,"COLOR2",Blockly.propc.ORDER_NONE)||"0";Blockly.propc.definitions_.colormath='#include "colormath.h"';return["compareRRGGBB("+a+", "+b+")"]};
Blockly.Blocks.logic_compare={category:Blockly.LANG_CATEGORY_LOGIC,init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_MATH_HELPURL):this.setHelpUrl(Blockly.MSG_NUMBERS_HELPURL);this.setTooltip(Blockly.MSG_LOGIC_COMPARE_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.setOutput(!0,"Number");this.appendValueInput("A").setCheck("Number");this.appendValueInput("B").setCheck("Number").appendField(new Blockly.FieldDropdown([["=","=="],["\u2260",
"!="],["<","<"],["\u2264","<="],[">",">"],["\u2265",">="]]),"OP");this.setInputsInline(!0)}};Blockly.propc.logic_compare=function(){var a=this.getFieldValue("OP"),b="=="===a||"!="===a?Blockly.propc.ORDER_EQUALITY:Blockly.propc.ORDER_RELATIONAL,c=Blockly.propc.valueToCode(this,"A",b)||"0",d=Blockly.propc.valueToCode(this,"B",b)||"0";return[c+" "+a+" "+d,b]};
Blockly.Blocks.logic_operation={category:Blockly.LANG_CATEGORY_LOGIC,init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_MATH_HELPURL):this.setHelpUrl(Blockly.MSG_NUMBERS_HELPURL);this.setTooltip(Blockly.MSG_LOGIC_OPERATION_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.setOutput(!0,"Number");this.appendValueInput("A").setCheck("Number");this.appendValueInput("B").setCheck("Number").appendField(new Blockly.FieldDropdown([["and"," && "],["or",
" || "],["and not"," && !"],["or not"," || !"]]),"OP");this.setInputsInline(!0)}};Blockly.propc.logic_operation=function(){var a=this.getFieldValue("OP"),b=Blockly.propc.ORDER_LOGICAL_AND;if(" || "===a||" || !"===a)b=Blockly.propc.ORDER_LOGICAL_OR;var c=Blockly.propc.valueToCode(this,"A",b)||"0",d=Blockly.propc.valueToCode(this,"B",b)||"0";return[c+" "+a+d,b]};
Blockly.Blocks.logic_negate={init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_MATH_HELPURL):this.setHelpUrl(Blockly.MSG_NUMBERS_HELPURL);this.setTooltip(Blockly.MSG_LOGIC_NEGATE_TOOLTIP);this.appendValueInput("BOOL").setCheck("Number").appendField(new Blockly.FieldDropdown([["not","!"],["negate","-"],["abs","abs("],["( )","("]],function(a){this.sourceBlock_.updateBlock_(a)}),"OP");this.setColour(colorPalette.getColor("math"));this.setOutput(!0,"Number");
this.setInputsInline(!1)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("op",this.getFieldValue("OP"));return a},domToMutation:function(a){a=a.getAttribute("op");this.updateBlock_(a)},updateBlock_:function(a){"("===a&&(a=this.getInput("BOOL").connection.targetConnection,this.removeInput("BOOL"),this.appendValueInput("BOOL").appendField("(","OP").setCheck("Number"),this.appendDummyInput("").appendField(")"),this.setInputsInline(!0),a&&a.connect(this.getInput("BOOL").connection))}};
Blockly.propc.logic_negate=function(){var a=Blockly.propc.ORDER_UNARY_PREFIX,b=this.getFieldValue("OP"),c=Blockly.propc.valueToCode(this,"BOOL",a)||"0";c=b+c;if("abs("===b||"("===b)c+=")",a=Blockly.propc.ORDER_NONE;return[c,a]};
Blockly.Blocks.logic_boolean={helpUrl:Blockly.MSG_VALUES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_LOGIC_BOOLEAN_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.setOutput(!0,"Number");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["true","TRUE"],["false","FALSE"]]),"BOOL")}};Blockly.propc.logic_boolean=function(){return["TRUE"===this.getFieldValue("BOOL")?"1":"0",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.cog_new={helpUrl:Blockly.MSG_CONTROL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_COG_NEW_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField("new processor");this.appendStatementInput("METHOD").setCheck("Function").appendField("function");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.cog_new=function(){var a=Blockly.propc.statementToCode(this,"METHOD"),b=a.replace("  ","").replace("\n","").replace("()","").replace(";","");Blockly.propc.cog_methods_[b]=a;return"cog_run("+b+", 128);\n"};
Blockly.Blocks.combine_strings={helpUrl:Blockly.MSG_STRINGS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_COMBINE_STRINGS_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("STRA").setCheck("String").appendField("combine string");this.appendValueInput("STRB").setCheck("String").appendField("with string");this.appendDummyInput().appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VALUE");this.setInputsInline(!0);this.setPreviousStatement(!0,
"Block");this.setNextStatement(!0,null)},getVarType:function(){return"String"},getVars:function(){return[this.getFieldValue("VALUE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VALUE"))&&this.setFieldValue(b,"VALUE")}};
Blockly.propc.combine_strings=function(){var a=Blockly.propc.valueToCode(this,"STRA",Blockly.propc.ORDER_ATOMIC)||"",b=Blockly.propc.valueToCode(this,"STRB",Blockly.propc.ORDER_ATOMIC)||"",c=Blockly.propc.variableDB_.getName(this.getFieldValue("VALUE"),Blockly.Variables.NAME_TYPE),d="";Blockly.propc.vartype_[c]="char *";""!==a&&""!==b?(Blockly.propc.definitions_.str_Buffer="char *__scBfr;",d=d+('sprint(__scBfr, "%s%s", '+a+", "+b+");\n")+("strcpy("+c+", __scBfr);\n")):d=""!==a?d+("strcpy("+c+", "+
b+");\n"):""!==b?d+("strcpy("+c+", "+a+");\n"):d+"// Both of the strings to combine are blank!\n";return d};Blockly.Blocks.find_substring={helpUrl:Blockly.MSG_STRINGS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_FIND_SUBSTRING_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("SUBSTR").setCheck("String").appendField("find location of text");this.appendValueInput("STR").setCheck("String").appendField("in string");this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Blockly.propc.find_substring=function(){var a=Blockly.propc.valueToCode(this,"SUBSTR",Blockly.propc.ORDER_ATOMIC)||"",b=Blockly.propc.valueToCode(this,"STR",Blockly.propc.ORDER_ATOMIC)||"";Blockly.propc.methods_.find_sub="int find_sub(char *__strS, char *__subS) { char* __pos = strstr(__strS, __subS); return (__pos - __strS + 1); }\n";Blockly.propc.method_declarations_.find_sub="int find_sub(char *__strS, char *__subS);\n";var c="";return[""!==a&&""!==b?c+("find_sub("+b+", "+a+")"):c+"0",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.get_char_at_position={helpUrl:Blockly.MSG_STRINGS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GET_CHAR_AT_POSITION_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("POSITION").setCheck("Number").appendField("get character at position");this.appendDummyInput().appendField("of").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VALUE");this.setInputsInline(!0);this.setOutput(!0,"Number")},getVars:function(){return[this.getFieldValue("VALUE")]},
renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VALUE"))&&this.setFieldValue(b,"VALUE")}};Blockly.propc.get_char_at_position=function(){var a=Blockly.propc.valueToCode(this,"POSITION",Blockly.propc.ORDER_ATOMIC)||"1",b=Blockly.propc.variableDB_.getName(this.getFieldValue("VALUE"),Blockly.Variables.NAME_TYPE),c="0";"char *"===Blockly.propc.vartype_[b]&&(c=b+"[("+a+">strlen("+b+")?strlen("+b+"):"+a+")-1]");return[c,Blockly.propc.ORDER_NONE]};
Blockly.Blocks.set_char_at_position={helpUrl:Blockly.MSG_STRINGS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SET_CHAR_AT_POSITION_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("POSITION").setCheck("Number").appendField("set character at position");this.appendDummyInput().appendField("of string").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VALUE");this.appendValueInput("CHAR").setCheck("Number").appendField("to");this.setInputsInline(!0);
this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVarType:function(){return"String"},getVars:function(){return[this.getFieldValue("VALUE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VALUE"))&&this.setFieldValue(b,"VALUE")}};
Blockly.propc.set_char_at_position=function(){var a=Blockly.propc.valueToCode(this,"POSITION",Blockly.propc.ORDER_ATOMIC)||"1",b=Blockly.propc.valueToCode(this,"CHAR",Blockly.propc.ORDER_ATOMIC)||"32",c=Blockly.propc.variableDB_.getName(this.getFieldValue("VALUE"),Blockly.Variables.NAME_TYPE);return c+"[("+a+">strlen("+c+")?strlen("+c+"):"+a+")-1] = ("+b+" & 0xFF)\n;"};
Blockly.Blocks.get_substring={helpUrl:Blockly.MSG_STRINGS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GET_SUBSTRING_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendDummyInput().appendField("get part of string").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"FROM_STR");this.appendValueInput("START").setCheck("Number").appendField("from position");this.appendValueInput("END").setCheck("Number").appendField("to position");this.appendDummyInput().appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"TO_STR");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVarType:function(){return"String"},getVars:function(){return[this.getFieldValue("FROM_STR"),this.getFieldValue("TO_STR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("FROM_STR"))&&this.setFieldValue(b,"FROM_STR");Blockly.Names.equals(a,this.getFieldValue("TO_STR"))&&this.setFieldValue(b,"TO_STR")}};
Blockly.propc.get_substring=function(){var a=Blockly.propc.valueToCode(this,"START",Blockly.propc.ORDER_ATOMIC)||"1",b=Blockly.propc.valueToCode(this,"END",Blockly.propc.ORDER_ATOMIC)||"2",c=Blockly.propc.variableDB_.getName(this.getFieldValue("FROM_STR"),Blockly.Variables.NAME_TYPE),d=Blockly.propc.variableDB_.getName(this.getFieldValue("TO_STR"),Blockly.Variables.NAME_TYPE);Blockly.propc.vartype_[d]="char *";Blockly.propc.definitions_.str_Buffer="char *__scBfr;";var e="";"char *"===Blockly.propc.vartype_[c]&&
(Blockly.propc.definitions_.__ssIdx="int __ssIdx, __stIdx;",e=e+("__stIdx = 0;\nfor(__ssIdx = ("+a+"-1); __ssIdx <= ("+b+" <= strlen("+c+")?"+b+":strlen("+c+"))-1; __ssIdx++) {\n__scBfr[__stIdx] = "+c+"[__ssIdx]; __stIdx++; }\n")+"__scBfr[__stIdx] = 0;\n"+("strcpy("+d+", __scBfr);\n"));return e};
Blockly.Blocks.string_compare={helpUrl:Blockly.MSG_STRINGS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_STRING_COMPARE_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("STRA").setCheck("String").appendField("string");this.appendValueInput("STRB").setCheck("String").appendField(new Blockly.FieldDropdown([["is the same as","=="],["is not the same as","!="],["is alphabetically before","<"],["is alphabetically after",">"]]),"COMP");this.setInputsInline(!0);this.setOutput(!0,
"Number")}};Blockly.propc.string_compare=function(){var a=Blockly.propc.valueToCode(this,"STRA",Blockly.propc.ORDER_ATOMIC)||"",b=Blockly.propc.valueToCode(this,"STRB",Blockly.propc.ORDER_ATOMIC)||"",c=this.getFieldValue("COMP");Blockly.propc.definitions_.str_comp="int str_comp(char *__strA, char *__strB) { return strcmp(__strA, __strB); }";var d="";return[""!==a&&""!==b?d+("str_comp("+a+", "+b+") "+c+" 0"):d+"0",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.string_to_number={helpUrl:Blockly.MSG_STRINGS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_STRING_TO_NUMBER_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("STRING").setCheck("String").appendField("string");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["in decimal","%d"],["in hexadecimal","%x"],["in binary","%b"]]),"TYPE").appendField("to integer store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VAR");
this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")}};
Blockly.propc.string_to_number=function(){var a=Blockly.propc.valueToCode(this,"STRING",Blockly.propc.ORDER_ATOMIC)||"0",b=this.getFieldValue("TYPE"),c=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);Blockly.propc.definitions_.s2i_Buffer="char __s2iBfr[64];";return""+("strcpy(__s2iBfr, "+a+");\n")+('sscan(__s2iBfr, "'+b+'", &'+c+");\n")};
Blockly.Blocks.number_to_string={helpUrl:Blockly.MSG_STRINGS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_NUMBER_TO_STRING_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("NUMBER").setCheck("Number").appendField("integer");this.appendDummyInput().appendField("to string in").appendField(new Blockly.FieldDropdown([["decimal","%d"],["hexadecimal","%x"],["binary","%b"]]),"TYPE").appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"VAR");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVarType:function(){return"String"},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")}};
Blockly.propc.number_to_string=function(){var a=Blockly.propc.valueToCode(this,"NUMBER",Blockly.propc.ORDER_ATOMIC)||"0",b=this.getFieldValue("TYPE"),c=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);Blockly.propc.vartype_[c]="char *";return"sprint("+c+', "'+b+'", '+a+");\n"};
Blockly.Blocks.number_binary={helpUrl:Blockly.MSG_VALUES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_NUMBER_BINARY_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField(new Blockly.FieldTextInput("0101",function(a){if(null===a)return null;a=a.replace(/O/ig,"0");return a=a.replace(/[^0-1]/g,"")}),"NUMBER").appendField("binary");this.setOutput(!0,"Number")}};Blockly.propc.number_binary=function(){return["0b"+this.getFieldValue("NUMBER"),Blockly.propc.ORDER_NONE]};
Blockly.Blocks.number_hex={helpUrl:Blockly.MSG_VALUES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_NUMBER_HEX_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField(new Blockly.FieldTextInput("7F"),"NUMBER").appendField("hexadecimal");this.setOutput(!0,"Number")}};Blockly.propc.number_hex=function(){return["0x"+this.getFieldValue("NUMBER"),Blockly.propc.ORDER_NONE]};
Blockly.Blocks.constrain_value={helpUrl:Blockly.MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CONSTRAIN_VALUE_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("NUMBER").setCheck("Number").appendField("constrain");this.appendDummyInput().appendField("from").appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"MIN").appendField("(min) to").appendField(new Blockly.FieldTextInput("100",Blockly.FieldTextInput.numberValidator),
"MAX").appendField("(max)");this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Blockly.propc.constrain_value=function(){var a=Blockly.propc.valueToCode(this,"NUMBER",Blockly.propc.ORDER_ATOMIC)||"0",b=window.parseInt(this.getFieldValue("MIN")),c=window.parseInt(this.getFieldValue("MAX"));Blockly.propc.methods_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax) {if(__cVal < __cMin) __cVal = __cMin;\nif(__cVal > __cMax) __cVal = __cMax;\nreturn __cVal;\n}\n";Blockly.propc.method_declarations_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax);\n";
return["constrain("+a+", "+b+", "+c+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.map_value={helpUrl:Blockly.MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MAP_VALUE_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("NUMBER").setCheck("Number").appendField("map");this.appendDummyInput().appendField("with range").appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"IMIN").appendField("(from A)").appendField(new Blockly.FieldTextInput("50",Blockly.FieldTextInput.numberValidator),"IMAX").appendField("(from B) to range").appendField(new Blockly.FieldTextInput("0",
Blockly.FieldTextInput.numberValidator),"FMIN").appendField("(to A)").appendField(new Blockly.FieldTextInput("100",Blockly.FieldTextInput.numberValidator),"FMAX").appendField("(to B)");this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Blockly.propc.map_value=function(){var a=Blockly.propc.valueToCode(this,"NUMBER",Blockly.propc.ORDER_ATOMIC)||"0",b=window.parseInt(this.getFieldValue("IMIN")),c=window.parseInt(this.getFieldValue("IMAX")),d=window.parseInt(this.getFieldValue("FMIN")),e=window.parseInt(this.getFieldValue("FMAX"));this.disabled||(Blockly.propc.method_declarations_.map_function="int map(int __xVal, int __inMin, int __inMax, int __outMin, int __outMax);\n",Blockly.propc.methods_.map_function="int map(int __xVal, int __inMin, int __inMax, int __outMin, int __outMax){ return (__xVal - __inMin) * (__outMax - __outMin) / (__inMax - __inMin) + __outMin;}");
return["map("+a+","+b+","+c+","+d+","+e+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.math_advanced={helpUrl:Blockly.MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MATH_ADVANCED_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("ARG1").setCheck("Number");this.appendValueInput("ARG2").setCheck("Number").appendField(new Blockly.FieldDropdown([["\u2715 the cosine of","cos"],["\u2715 the sine of","sin"],["\u2715 the tangent of","tan"],["\u2715 the square root of","sqrt"],["\u2715 e raised to the power of","exp"],["\u2715 the logarithm (base 10) of",
"log10"],["\u2715 the natural logarithm of","log"]]),"OP");this.appendDummyInput("").appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"STORE");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVars:function(){return[this.getFieldValue("STORE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("STORE"))&&this.setFieldValue(b,"STORE")}};
Blockly.propc.math_advanced=function(){var a=Blockly.propc.variableDB_.getName(this.getFieldValue("STORE"),Blockly.Variables.NAME_TYPE),b=Blockly.propc.valueToCode(this,"ARG1",Blockly.propc.ORDER_ATOMIC)||"1",c=Blockly.propc.valueToCode(this,"ARG2",Blockly.propc.ORDER_ATOMIC)||"1";b=b.replace(/[\(\-+ ](\d+)/g,"$1.0").replace(/\(int\)/g,"");c=c.replace(/[\(\-+ ](\d+)/g,"$1.0").replace(/\(int\)/g,"");var d=this.getFieldValue("OP"),e="";if("sin"===d||"cos"===d||"tan"===d)e=" * PI/180.0";return a+" = (int) (((float)"+
b+") * "+d+"(((float) "+c+")"+e+"));\n"};
Blockly.Blocks.math_inv_trig={helpUrl:Blockly.MSG_NUMBERS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MATH_INV_TRIG_TOOLTIP);this.setColour(colorPalette.getColor("math"));this.appendValueInput("ARG1").setCheck("Number").appendField(new Blockly.FieldDropdown([["arcsine of (","asin"],["arccosine of (","acos"],["arctangent of (","atan2"]]),"OP");this.appendValueInput("ARG2").setCheck("Number").appendField("\u00f7");this.appendValueInput("ARG3").appendField(") \u00d7").setCheck("Number");this.appendDummyInput().appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"STORE");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVars:function(){return[this.getFieldValue("STORE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("STORE"))&&this.setFieldValue(b,"STORE")}};
Blockly.propc.math_inv_trig=function(){var a=Blockly.propc.variableDB_.getName(this.getFieldValue("STORE"),Blockly.Variables.NAME_TYPE),b=Blockly.propc.valueToCode(this,"ARG1",Blockly.propc.ORDER_ATOMIC)||"1",c=Blockly.propc.valueToCode(this,"ARG2",Blockly.propc.ORDER_ATOMIC)||"1",d=Blockly.propc.valueToCode(this,"ARG3",Blockly.propc.ORDER_ATOMIC)||"1";b=b.replace(/([0-9])(\xA0| |\)|$)/g,"$1.0$2").replace(/\(int\)/g,"");c=c.replace(/([0-9])(\xA0| |\)|$)/g,"$1.0$2").replace(/\(int\)/g,"");d=d.replace(/([0-9])(\xA0| |\)|$)/g,
"$1.0$2").replace(/\(int\)/g,"");var e=this.getFieldValue("OP"),f="/";"atan2"===e&&(f=",");return a+" = (int) (180.0 * "+e+"(((float) "+b+")"+f+"((float) "+c+")) * "+d+" / PI);\n"};
Blockly.Blocks.custom_code_multiple={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip('User defined code: Set label, color, code, block type, and inputs.\nAdd correctly formatted Propeller C code to the includes,\nglobals, setups, main, and functions sections.\nUse "@1, @2, @3, @4, or @5" to insert values from inputs 1, 2, 3, 4, or 5 into your custom C code.\nUse "\\n" to insert line breaks in the code');this.setTooltip(Blockly.MSG_AWX_SCAN_MULTIPLE_TOOLTIP);this.setColour(colorPalette.getColor("programming"));
this.appendDummyInput().appendField(new Blockly.FieldCheckbox("FALSE",function(a){this.sourceBlock_.hideInputs(a)}),"EDIT").appendField("  User defined code","LABEL");this.appendDummyInput("SET_LABEL").appendField("label").appendField(new Blockly.FieldTextInput("User defined code",function(a){this.sourceBlock_.setFieldValue("  "+a,"LABEL")}),"LABEL_SET");this.appendDummyInput("SET_COLOR").appendField("block color").appendField((new Blockly.FieldColour("#266999")).setColours("#26994D #268F99 #266999 #264399 #392699 #692699 #8F2699 #992673 #99264C".split(" ")).setColumns(3),
"COLOR");this.appendDummyInput("INCL").appendField("includes code").appendField(new Blockly.FieldTextInput(""),"INCLUDES");this.appendDummyInput("GLOB").appendField("globals code").appendField(new Blockly.FieldTextInput(""),"GLOBALS");this.appendDummyInput("SETS").appendField("setups code").appendField(new Blockly.FieldTextInput(""),"SETUPS");this.appendDummyInput("MAIN").appendField("main code").appendField(new Blockly.FieldTextInput(""),"MAIN");this.appendDummyInput("OUTS").appendField("main code is").appendField(new Blockly.FieldDropdown([["inline",
"INL"],["a numeric value","NUM"],["a string value","STR"]],function(a){"INL"===a?(this.sourceBlock_.setPreviousStatement(!0),this.sourceBlock_.setNextStatement(!0),this.sourceBlock_.setOutput(!1)):"NUM"===a?(this.sourceBlock_.setPreviousStatement(!1),this.sourceBlock_.setNextStatement(!1),this.sourceBlock_.setOutput(!0,"Number")):(this.sourceBlock_.setPreviousStatement(!1),this.sourceBlock_.setNextStatement(!1),this.sourceBlock_.setOutput(!0,"String"))}),"TYPE");this.appendDummyInput("FUNC").appendField("functions code").appendField(new Blockly.FieldTextInput(""),
"FUNCTIONS");this.appendDummyInput("ARGS").appendField(new Blockly.FieldDropdown([["no inputs","0"],["add 1 input","1"],["add 2 inputs","2"],["add 3 inputs","3"],["add 4 inputs","4"],["add 5 inputs","5"]],function(a){this.sourceBlock_.setupInputs(a)}),"ARG_COUNT");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setFieldValue("FALSE","EDIT");this.hideInputs("FALSE")},mutationToDom:function(){for(var a=document.createElement("mutation"),b=1;5>=b;b++)if(this.getInput("ARG"+
b.toString(10))){var c=this.getFieldValue("LABEL_ARG"+b.toString(10));this.setFieldValue(c,"EDIT_ARG"+b.toString(10));this.getField("LABEL_ARG"+b.toString(10)).setVisible(!1)}b=this.getFieldValue("ARG_COUNT")||"0";a.setAttribute("args",b);a.setAttribute("a1",this.getFieldValue("EDIT_ARG1"));a.setAttribute("a2",this.getFieldValue("EDIT_ARG2"));a.setAttribute("a3",this.getFieldValue("EDIT_ARG3"));a.setAttribute("a4",this.getFieldValue("EDIT_ARG4"));a.setAttribute("a5",this.getFieldValue("EDIT_ARG5"));
a.setAttribute("color",this.getFieldValue("COLOR"));a.setAttribute("type",this.getFieldValue("TYPE"));return a},domToMutation:function(a){var b=a.getAttribute("args");this.setupInputs(b);this.getField("EDIT").setValue("FALSE");this.getField("EDIT_ARG1")&&this.setFieldValue(a.getAttribute("a1"),"EDIT_ARG1");this.getField("EDIT_ARG2")&&this.setFieldValue(a.getAttribute("a2"),"EDIT_ARG2");this.getField("EDIT_ARG3")&&this.setFieldValue(a.getAttribute("a3"),"EDIT_ARG3");this.getField("EDIT_ARG4")&&this.setFieldValue(a.getAttribute("a4"),
"EDIT_ARG4");this.getField("EDIT_ARG5")&&this.setFieldValue(a.getAttribute("a5"),"EDIT_ARG5");this.setFieldValue(a.getAttribute("color"),"COLOR");a=a.getAttribute("type");"INL"===a?(this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0),this.setOutput(!1)):"NUM"===a?(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0,"Number")):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0,"String"));this.setFieldValue("FALSE","EDIT");this.hideInputs("FALSE")},
setupInputs:function(a){for(var b=1;b<=Number(a);b++)this.getInput("ARG"+b.toString(10))||this.appendValueInput("ARG"+b.toString(10)).setAlign(Blockly.ALIGN_RIGHT).appendField('input "@'+b.toString(10)+'" label',"EDIT_ARG"+b.toString(10)).appendField(new Blockly.FieldTextInput(""),"LABEL_ARG"+b.toString(10));for(b=5;b>Number(a);b--)this.getInput("ARG"+b.toString(10))&&this.removeInput("ARG"+b.toString(10))},hideInputs:function(a){if(!0===a||"true"===a||"TRUE"===a)for(this.setColour("#909090"),this.getInput("SET_LABEL").setVisible(!0),
this.getInput("SET_COLOR").setVisible(!0),this.getInput("INCL").setVisible(!0),this.getInput("GLOB").setVisible(!0),this.getInput("SETS").setVisible(!0),this.getInput("MAIN").setVisible(!0),this.getInput("OUTS").setVisible(!0),this.getInput("FUNC").setVisible(!0),this.getInput("ARGS").setVisible(!0),a=1;5>=a;a++){if(this.getInput("ARG"+a.toString(10))){this.getField("LABEL_ARG"+a.toString(10)).setVisible(!0);var b=this.getFieldValue("EDIT_ARG"+a.toString(10));b!=='input "@'+a.toString(10)+'" label'&&
this.setFieldValue(b,"LABEL_ARG"+a.toString(10));this.setFieldValue('input "@'+a.toString(10)+'" label',"EDIT_ARG"+a.toString(10))}}else for(this.setColour(this.getFieldValue("COLOR")),this.getInput("SET_LABEL").setVisible(!1),this.getInput("SET_COLOR").setVisible(!1),this.getInput("INCL").setVisible(!1),this.getInput("GLOB").setVisible(!1),this.getInput("SETS").setVisible(!1),this.getInput("MAIN").setVisible(!1),this.getInput("OUTS").setVisible(!1),this.getInput("FUNC").setVisible(!1),this.getInput("ARGS").setVisible(!1),
a=1;5>=a;a++)this.getInput("ARG"+a.toString(10))&&(b=this.getFieldValue("LABEL_ARG"+a.toString(10)),this.setFieldValue(b,"EDIT_ARG"+a.toString(10)),this.getField("LABEL_ARG"+a.toString(10)).setVisible(!1));this.render()}};
Blockly.propc.custom_code_multiple=function(){var a=[];a.push(Blockly.propc.valueToCode(this,"ARG1",Blockly.propc.ORDER_ATOMIC)||"");a.push(Blockly.propc.valueToCode(this,"ARG2",Blockly.propc.ORDER_ATOMIC)||"");a.push(Blockly.propc.valueToCode(this,"ARG3",Blockly.propc.ORDER_ATOMIC)||"");a.push(Blockly.propc.valueToCode(this,"ARG4",Blockly.propc.ORDER_ATOMIC)||"");a.push(Blockly.propc.valueToCode(this,"ARG5",Blockly.propc.ORDER_ATOMIC)||"");var b=(this.getFieldValue("INCLUDES")||"").replace(/@1/g,
a[0]).replace(/@2/g,a[1]).replace(/@3/g,a[2]).replace(/@4/g,a[3]).replace(/@5/g,a[4]),c=(this.getFieldValue("GLOBALS")||"").replace(/@1/g,a[0]).replace(/@2/g,a[1]).replace(/@3/g,a[2]).replace(/@4/g,a[3]).replace(/@5/g,a[4]),d=(this.getFieldValue("SETUPS")||"").replace(/@1/g,a[0]).replace(/@2/g,a[1]).replace(/@3/g,a[2]).replace(/@4/g,a[3]).replace(/@5/g,a[4]),e=(this.getFieldValue("MAIN")||"").replace(/@1/g,a[0]).replace(/@2/g,a[1]).replace(/@3/g,a[2]).replace(/@4/g,a[3]).replace(/@5/g,a[4]);a=(this.getFieldValue("FUNCTIONS")||
"").replace(/@1/g,a[0]).replace(/@2/g,a[1]).replace(/@3/g,a[2]).replace(/@4/g,a[3]).replace(/@5/g,a[4]);var f="";""!==b&&(Blockly.propc.definitions_["cCode"+cCode]=b+"\n");""!==c&&(Blockly.propc.global_vars_["cCode"+cCode]=c+"\n");""!==d&&(Blockly.propc.setups_["cCode"+cCode]=d+"\n");""!==e&&(f+=e);"INL"===this.getFieldValue("TYPE")&&(f+="\n");""!==a&&(Blockly.propc.methods_["cCode"+cCode]=a+"\n");cCode++;return"INL"===this.getFieldValue("TYPE")?f:[f,Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.propc_file={init:function(){this.setColour("#000000");this.appendDummyInput().appendField(new Blockly.FieldTextInput("single.c"),"FILENAME").appendField(new Blockly.FieldTextInput(""),"CODE");this.setPreviousStatement(!0,null);this.setNextStatement(!0,null)}};Blockly.propc.propc_file=function(){var a=this.getFieldValue("FILENAME"),b=this.getFieldValue("CODE");-1===b.indexOf(" ")&&-1===b.indexOf("{")&&(b=atob(b));return"// RAW PROPC CODE\n//{{||}}\n"+a+"//{{||}}\n"+b};Blockly.Blocks||(Blockly.Blocks={});
Blockly.Blocks.controls_repeat={init:function(){var a="repeat";"Scribbler Robot"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_S3_CONTROL_HELPURL),this.setTooltip(Blockly.MSG_S3_SCRIBBLER_LOOP_TOOLTIP),a="loop"):(this.setHelpUrl(Blockly.MSG_CONTROL_HELPURL),this.setTooltip(Blockly.MSG_CONTROLS_REPEAT_TOOLTIP));this.setColour(colorPalette.getColor("programming"));var b=new Blockly.FieldDropdown([["forever","FOREVER"],["x times","TIMES"],["until","UNTIL"],["while","WHILE"]],function(a){this.sourceBlock_.updateShape_(a)});
this.appendDummyInput().appendField(a);this.appendDummyInput("REPEAT").appendField(b,"TYPE");this.appendStatementInput("DO").appendField(Blockly.LANG_CONTROLS_REPEAT_INPUT_DO);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setInputsInline(!0)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("TYPE");a.setAttribute("type",b);return a},domToMutation:function(a){a=a.getAttribute("type");this.updateShape_(a)},updateShape_:function(a){var b=this.getInput("TIMES");
"TIMES"===a?b||(this.appendValueInput("TIMES").setCheck("Number"),this.moveInputBefore("TIMES","REPEAT")):b&&this.removeInput("TIMES");b=this.getInput("REPEAT_CONDITION");"WHILE"===a||"UNTIL"===a?b||(this.appendValueInput("REPEAT_CONDITION").setCheck("Number"),this.moveInputBefore("REPEAT_CONDITION","DO")):b&&this.removeInput("REPEAT_CONDITION")}};
Blockly.propc.controls_repeat=function(){var a=this.getFieldValue("TYPE"),b=Blockly.propc.statementToCode(this,"DO");Blockly.propc.INFINITE_LOOP_TRAP&&(b=Blockly.propc.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+b);var c=Blockly.propc.ORDER_UNARY_PREFIX,d="";switch(a){case "FOREVER":d="while(1) {\n"+b+"}\n";break;case "TIMES":d="for (int __n = 0; __n < "+(Blockly.propc.valueToCode(this,"TIMES",c)||"0")+"; __n++) {\n"+b+"}\n";break;case "WHILE":a=Blockly.propc.valueToCode(this,"REPEAT_CONDITION",
c)||"0";d="while ("+a+") {\n"+b+"}\n";break;case "UNTIL":a=Blockly.propc.valueToCode(this,"REPEAT_CONDITION",c)||"0",d="while (!("+a+")) {\n"+b+"}\n"}return d};
Blockly.Blocks.controls_if={category:Blockly.LANG_CATEGORY_CONTROLS,init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_CONTROL_HELPURL):this.setHelpUrl(Blockly.MSG_CONTROL_HELPURL);this.setTooltip(Blockly.MSG_CONTROLS_IF_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendValueInput("IF0").setCheck("Number").appendField(Blockly.LANG_CONTROLS_IF_MSG_IF);this.appendStatementInput("DO0").appendField(Blockly.LANG_CONTROLS_IF_MSG_THEN);
this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setMutator(new Blockly.Mutator(["controls_if_elseif","controls_if_else"]));this.elseCount_=this.elseifCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var a=document.createElement("mutation");this.elseifCount_&&a.setAttribute("elseif",this.elseifCount_);this.elseCount_&&a.setAttribute("else",1);return a},domToMutation:function(a){this.elseifCount_=window.parseInt(a.getAttribute("elseif"),10);
this.elseCount_=window.parseInt(a.getAttribute("else"),10);for(a=1;a<=this.elseifCount_;a++)this.appendValueInput("IF"+a).setCheck("Number").appendField(Blockly.LANG_CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+a).appendField(Blockly.LANG_CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(Blockly.LANG_CONTROLS_IF_MSG_ELSE)},decompose:function(a){var b=Blockly.Block.obtain(a,"controls_if_if");b.initSvg();for(var c=b.getInput("STACK").connection,d=1;d<=this.elseifCount_;d++){var e=
Blockly.Block.obtain(a,"controls_if_elseif");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}this.elseCount_&&(a=Blockly.Block.obtain(a,"controls_if_else"),a.initSvg(),c.connect(a.previousConnection));return b},compose:function(a){this.elseCount_&&this.removeInput("ELSE");this.elseCount_=0;for(var b=this.elseifCount_;0<b;b--)this.removeInput("IF"+b),this.removeInput("DO"+b);this.elseifCount_=0;for(a=a.getInputTargetBlock("STACK");a;){switch(a.type){case "controls_if_elseif":this.elseifCount_++;
b=this.appendValueInput("IF"+this.elseifCount_).setCheck("Number").appendField(Blockly.LANG_CONTROLS_IF_MSG_ELSEIF);var c=this.appendStatementInput("DO"+this.elseifCount_);c.appendField(Blockly.LANG_CONTROLS_IF_MSG_THEN);a.valueConnection_&&b.connection.connect(a.valueConnection_);a.statementConnection_&&c.connection.connect(a.statementConnection_);break;case "controls_if_else":this.elseCount_++;b=this.appendStatementInput("ELSE");b.appendField(Blockly.LANG_CONTROLS_IF_MSG_ELSE);a.statementConnection_&&
b.connection.connect(a.statementConnection_);break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=1;a;){switch(a.type){case "controls_if_elseif":var c=this.getInput("IF"+b),d=this.getInput("DO"+b);a.valueConnection_=c&&c.connection.targetConnection;a.statementConnection_=d&&d.connection.targetConnection;b++;break;case "controls_if_else":d=this.getInput("ELSE");a.statementConnection_=d&&
d.connection.targetConnection;break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}}};Blockly.Blocks.controls_if_if={init:function(){this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField(Blockly.LANG_CONTROLS_IF_IF_TITLE_IF);this.appendStatementInput("STACK");this.setTooltip(Blockly.LANG_CONTROLS_IF_IF_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.controls_if_elseif={init:function(){this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField(Blockly.LANG_CONTROLS_IF_ELSEIF_TITLE_ELSEIF);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setTooltip(Blockly.LANG_CONTROLS_IF_ELSEIF_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.controls_if_else={init:function(){this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField(Blockly.LANG_CONTROLS_IF_ELSE_TITLE_ELSE);this.setPreviousStatement(!0,"Block");this.setTooltip(Blockly.LANG_CONTROLS_IF_ELSE_TOOLTIP);this.contextMenu=!1}};
Blockly.propc.controls_if=function(){var a=0,b=Blockly.propc.valueToCode(this,"IF"+a,Blockly.propc.ORDER_NONE)||"0",c=Blockly.propc.statementToCode(this,"DO"+a),d="if ("+b+") {\n"+c+"}\n";for(a=1;a<=this.elseifCount_;a++)b=Blockly.propc.valueToCode(this,"IF"+a,Blockly.propc.ORDER_NONE)||"0",c=Blockly.propc.statementToCode(this,"DO"+a),d+="else if ("+b+") {\n"+c+"}";this.elseCount_&&(c=Blockly.propc.statementToCode(this,"ELSE"),d+="else {\n"+c+"}\n");return d+"\n"};
Blockly.Blocks.control_repeat_for_loop={init:function(){var a="repeat";"Scribbler Robot"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_S3_CONTROL_HELPURL),this.setTooltip(Blockly.MSG_S3_SCRIBBLER_LIMITED_LOOP_TOOLTIP),a="loop"):(this.setHelpUrl(Blockly.MSG_CONTROL_HELPURL),this.setTooltip(Blockly.MSG_CONTROL_REPEAT_FOR_LOOP_TOOLTIP));this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField(a).appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"VAR");this.appendValueInput("START").setCheck("Number").appendField("from");this.appendValueInput("END").setCheck("Number").appendField("to");this.appendValueInput("STEP").setCheck("Number").appendField("by");this.appendStatementInput("DO").appendField("do");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setInputsInline(!0)},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,
"VAR")}};
Blockly.propc.control_repeat_for_loop=function(){var a=Blockly.propc.valueToCode(this,"START",Blockly.propc.ORDER_NONE)||"1",b=Blockly.propc.valueToCode(this,"END",Blockly.propc.ORDER_NONE)||"10",c=Blockly.propc.valueToCode(this,"STEP",Blockly.propc.ORDER_NONE)||"1",d=Blockly.propc.statementToCode(this,"DO"),e=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),f="";isNaN(parseFloat(a))||!isFinite(a)||isNaN(parseFloat(b))||!isFinite(b)?isNaN(parseFloat(c))||!isFinite(c)?
f+="for ("+e+" = "+a+"; "+e+" <= "+b+"; "+e+" += abs("+c+")) {\n"+d+"\n}":0>Number(c)?f+="for ("+e+" = "+a+"; "+e+" >= "+b+"; "+e+" += ("+c+")) {\n"+d+"\n}":0<Number(c)?f+="for ("+e+" = "+a+"; "+e+" <= "+b+"; "+e+" += ("+c+")) {\n"+d+"\n}":0===Number(c)&&(f+='// ERROR: Your "step" size cannot be 0 (zero)!\n'+d):f=Number(a)<Number(b)?f+("for ("+e+" = "+a+"; "+e+" <= "+b+"; "+e+" += abs("+c+")) {\n"+d+"\n}"):f+("for ("+e+" = "+a+"; "+e+" >= "+b+"; "+e+" -= abs("+c+")) {\n"+d+"\n}");return f};
Blockly.Blocks.controls_return={helpUrl:Blockly.MSG_CONTROL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CONTROLS_RETURN_TOOLTIP);this.appendDummyInput().appendField("return");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setColour(colorPalette.getColor("programming"))}};Blockly.propc.controls_return=function(){return"return;"};
Blockly.Blocks.controls_break={helpUrl:Blockly.MSG_CONTROL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CONTROLS_BREAK_TOOLTIP);this.appendDummyInput().appendField("break");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setColour(colorPalette.getColor("programming"))}};Blockly.propc.controls_break=function(){return"break;"};
Blockly.Blocks.controls_select={category:Blockly.LANG_CATEGORY_CONTROLS,init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_CONTROL_HELPURL):this.setHelpUrl(Blockly.MSG_CONTROL_HELPURL);this.setTooltip(Blockly.MSG_CONTROLS_SELECT_TOOLTIP);this.setColour(colorPalette.getColor("programming"));this.appendValueInput("SWITCH").appendField("switch");this.appendValueInput("SEL1").setCheck("Number").appendField("case");this.appendStatementInput("CASE1").appendField("do (then break").appendField(new Blockly.FieldCheckbox("TRUE"),
"BREAK1").appendField(")");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setMutator(new Blockly.Mutator(["controls_select_case","controls_select_default"]));this.elseifCount_=1;this.elseCount_=0},mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var a=document.createElement("mutation");this.elseifCount_&&a.setAttribute("case",this.elseifCount_);this.elseCount_&&a.setAttribute("default",1);return a},domToMutation:function(a){this.elseifCount_=window.parseInt(a.getAttribute("case"),
10);this.elseCount_=window.parseInt(a.getAttribute("default"),10);for(a=1;a<=this.elseifCount_;a++)this.getInput("SEL"+a)||(this.appendValueInput("SEL"+a).setCheck("Number").appendField("case"),this.appendStatementInput("CASE"+a).appendField("do (then break").appendField(new Blockly.FieldCheckbox("TRUE"),"BREAK"+a).appendField(")"));this.elseCount_&&this.appendStatementInput("DEFAULT").appendField("default")},decompose:function(a){var b=Blockly.Block.obtain(a,"controls_select_select");b.initSvg();
for(var c=b.getInput("STACK").connection,d=1;d<=this.elseifCount_;d++){var e=Blockly.Block.obtain(a,"controls_select_case");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}this.elseCount_&&(a=Blockly.Block.obtain(a,"controls_select_default"),a.initSvg(),c.connect(a.previousConnection));return b},compose:function(a){this.elseCount_&&this.removeInput("DEFAULT");this.elseCount_=0;for(var b=this.elseifCount_;0<b;b--)this.removeInput("SEL"+b),this.removeInput("CASE"+b);this.elseifCount_=
0;for(a=a.getInputTargetBlock("STACK");a;){switch(a.type){case "controls_select_case":this.elseifCount_++;b=this.appendValueInput("SEL"+this.elseifCount_).setCheck("Number").appendField("case");var c=this.appendStatementInput("CASE"+this.elseifCount_);c.appendField("do (then break").appendField(new Blockly.FieldCheckbox("TRUE"),"BREAK"+this.elseifCount_).appendField(")");a.valueConnection_&&b.connection.connect(a.valueConnection_);a.statementConnection_&&c.connection.connect(a.statementConnection_);
break;case "controls_select_default":this.elseCount_++;b=this.appendStatementInput("DEFAULT");b.appendField("default");a.statementConnection_&&b.connection.connect(a.statementConnection_);break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=1;a;){switch(a.type){case "controls_select_case":var c=this.getInput("SEL"+b),d=this.getInput("CASE"+b);a.valueConnection_=c&&c.connection.targetConnection;
a.statementConnection_=d&&d.connection.targetConnection;b++;break;case "controls_select_default":d=this.getInput("DEFAULT");a.statementConnection_=d&&d.connection.targetConnection;break;default:throw"Unknown block type.";}a=a.nextConnection&&a.nextConnection.targetBlock()}}};
Blockly.Blocks.controls_select_select={init:function(){this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField("switch");this.appendStatementInput("STACK");this.setInputsInline(!1);this.contextMenu=!1}};Blockly.Blocks.controls_select_case={init:function(){this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField("case");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.contextMenu=!1}};
Blockly.Blocks.controls_select_default={init:function(){this.setColour(colorPalette.getColor("programming"));this.appendDummyInput().appendField("default");this.setPreviousStatement(!0,"Block");this.contextMenu=!1}};
Blockly.propc.controls_select=function(){var a;var b="";var c="switch("+(Blockly.propc.valueToCode(this,"SWITCH",Blockly.propc.ORDER_NONE)||"0")+") {\n";if(!0===b||"TRUE"===b||"true"===b)c+="break;\n";for(a=1;a<=this.elseifCount_;a++){b=Blockly.propc.valueToCode(this,"SEL"+a,Blockly.propc.ORDER_NONE)||"0";var d=Blockly.propc.statementToCode(this,"CASE"+a);c+="case "+b+":\n"+d;b=this.getFieldValue("BREAK"+a);if(!0===b||"TRUE"===b||"true"===b)c+="break;\n"}this.elseCount_&&(d=Blockly.propc.statementToCode(this,
"DEFAULT"),c+="default: \n"+d+"\n");return c+"}\n"};Blockly.Blocks||(Blockly.Blocks={});var tempArrayNumber=0;
Blockly.Blocks.variables_get={helpUrl:Blockly.MSG_VARIABLES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_VARIABLES_GET_TOOLTIP);this.setColour(colorPalette.getColor("variables"));this.appendDummyInput("").appendField(Blockly.LANG_VARIABLES_GET_TITLE_1).appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VAR");this.setOutput(!0);this.typeCheckRun=null},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&
this.setFieldValue(b,"VAR")}};
Blockly.Blocks.variables_set={helpUrl:Blockly.MSG_VARIABLES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_VARIABLES_SET_TOOLTIP);this.setColour(colorPalette.getColor("variables"));this.appendValueInput("VALUE").appendField(Blockly.LANG_VARIABLES_SET_TITLE_1).appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_SET_ITEM),"VAR").appendField("=");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0)},getVarType:function(){return this.getInputTargetBlock("VALUE")?this.getInputTargetBlock("VALUE").outputConnection.check_.toString():
null},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,"VAR")}};Blockly.propc.variables_get=function(){return[Blockly.propc.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.propc.ORDER_ATOMIC]};
Blockly.propc.variables_set=function(){var a=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_ASSIGNMENT)||"0",b=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);void 0===Blockly.propc.vartype_[b]?-1<a.indexOf("int")?Blockly.propc.vartype_[b]="int":-1<a.indexOf("float")?(Blockly.propc.vartype_[b]="float",Blockly.propc.varlength_[b]="{{$var_length_"+b+"}};"):-1<a.indexOf("char")?(Blockly.propc.vartype_[b]="char",Blockly.propc.varlength_[b]="{{$var_length_"+
b+"}};"):-1<a.indexOf("char[]")?Blockly.propc.vartype_[b]="char *":-1<a.indexOf('"')&&-1===a.indexOf("get8bitColor(")?Blockly.propc.vartype_[b]="char *":-1<a.indexOf(".")?Blockly.propc.vartype_[b]="float":-1<a.indexOf("true")||-1<a.indexOf("false")?Blockly.propc.vartype_[b]="boolean":Blockly.propc.vartype_[b]="int":-1<a.indexOf("int")?Blockly.propc.vartype_[b]="int":-1<a.indexOf("float")?(Blockly.propc.vartype_[b]="float",Blockly.propc.varlength_[b]="{{$var_length_"+b+"}};"):-1<a.indexOf("char")?
(Blockly.propc.vartype_[b]="char",Blockly.propc.varlength_[b]="{{$var_length_"+b+"}};"):-1<a.indexOf("char[]")&&(Blockly.propc.vartype_[b]="char *");return b+" = "+a+";\n"};
Blockly.Blocks.array_get={helpUrl:Blockly.MSG_ARRAYS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ARRAY_GET_TOOLTIP);this.setColour(colorPalette.getColor("variables"));this.appendValueInput("NUM").setCheck("Number").appendField("array").appendField(new Blockly.FieldTextInput("list"),"VAR").appendField("element");this.setInputsInline(!0);this.setOutput(!0,"Number")},onchange:function(){var a=null,b=parseInt(this.getFieldValue("NUM"),10),c=Blockly.getMainWorkspace().getAllBlocks();if(-1<c.toString().indexOf("array initialize "+
this.getFieldValue("VAR"))){for(var d="",e=0;e<c.length;e++)if(-1<c[e].toString().indexOf("array initialize "+this.getFieldValue("VAR"))){d=c[e].toString().replace(/[^0-9]/g,"");break}if(b>=parseInt(d,10)||0>b)a="WARNING: You are trying to get an element from your array that does not exist!"}else a='WARNING: The array "'+this.getFieldValue("VAR")+'" has not been initialized!';this.setWarningText(a)}};
Blockly.propc.array_get=function(){var a=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR"),"Array"),b=Blockly.propc.valueToCode(this,"NUM",Blockly.propc.ORDER_NONE)||"0";b=a+"["+b+"]";return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("array initialize "+this.getFieldValue("VAR"))?'// ERROR: The array "'+a+'" has not been initialized!\n':[b,Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.array_init={helpUrl:Blockly.MSG_ARRAYS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ARRAY_INIT_TOOLTIP);this.setColour(colorPalette.getColor("variables"));this.appendDummyInput().appendField("array initialize").appendField(new Blockly.FieldTextInput("list"),"VAR").appendField("with").appendField(new Blockly.FieldTextInput("10",Blockly.FieldTextInput.numberValidator),"NUM").appendField("elements");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0)}};
Blockly.propc.array_init=function(){var a=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR"),"Array"),b=this.getFieldValue("NUM")||"10";this.disabled||(Blockly.propc.global_vars_["__ARRAY"+a]="int "+a+"["+b+"];");return""};
Blockly.Blocks.array_fill={helpUrl:Blockly.MSG_ARRAYS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ARRAY_FILL_TOOLTIP);this.setColour(colorPalette.getColor("variables"));this.appendDummyInput().appendField("array fill").appendField(new Blockly.FieldTextInput("list"),"VAR").appendField("with values").appendField(new Blockly.FieldTextInput("10,20,30,40,50"),"NUM");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0)},onchange:function(){var a=null,b=this.getFieldValue("NUM").split(",").length,
c=Blockly.getMainWorkspace().getAllBlocks();if(-1<c.toString().indexOf("array initialize "+this.getFieldValue("VAR"))){for(var d="",e=0;e<c.length;e++)if(-1<c[e].toString().indexOf("array initialize "+this.getFieldValue("VAR"))){d=c[e].toString().replace(/[^0-9]/g,"");break}b>parseInt(d,10)&&(a="WARNING: You are trying to add more elements to your\narray than you initialized your array with!")}else a='WARNING: The array "'+this.getFieldValue("VAR")+'" has not been initialized!';this.setWarningText(a)}};
Blockly.propc.array_fill=function(){var a=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR"),"Array"),b=this.getFieldValue("NUM");b=0===b.indexOf("0x")||0<b.indexOf(",0x")?b.replace(/[^0-9xA-Fa-f,-\.]/g,""):b.replace(/[^0-9b,-\.]/g,"");b=b.replace(/,\./g,",0.");b=b.replace(/\b\.[0-9-]+,\b/g,",");b=b.replace(/\.[0-9],/g,",");b=b.replace(/,,/g,",0,");b=b.replace(/,\s*$/,"");b=b.split(".")[0];var c=b.replace(/,/g,"");c=b.length-c.length+1;var d="";var e=Blockly.getMainWorkspace().getAllBlocks();
if(-1<e.toString().indexOf("array initialize "+this.getFieldValue("VAR"))){for(var f="",g=0;g<e.length;g++)if(-1<e[g].toString().indexOf("array initialize "+this.getFieldValue("VAR"))){f=e[g].toString().replace(/[^0-9]/g,"");break}e=parseInt(f,10);c>e&&(d+="// WARNING: You are trying to add more elements to your\n//          array than you initialized your array with!\n",c=e);d+="int __tmpArr"+tempArrayNumber.toString()+"[] = {"+b+"};\n";d+="memcpy("+a+", __tmpArr"+tempArrayNumber.toString()+", "+
c+" * sizeof(int));\n";tempArrayNumber++}else d+='// ERROR: The array "'+this.getFieldValue("VAR")+'" has not been initialized!\n';return d};
Blockly.Blocks.array_set={helpUrl:Blockly.MSG_ARRAYS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ARRAY_SET_TOOLTIP);this.setColour(colorPalette.getColor("variables"));this.appendValueInput("NUM").appendField("array").setCheck("Number").appendField(new Blockly.FieldTextInput("list"),"VAR").appendField("element");this.appendValueInput("VALUE").setCheck("Number").appendField("=");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0)},onchange:function(){var a=
null,b=null,c=Blockly.propc.valueToCode(this,"NUM",Blockly.propc.ORDER_NONE)||"0";c.replace(/[^0-9]+/g,"")===c&&(b=parseInt(c));c=Blockly.getMainWorkspace().getAllBlocks();if(-1<c.toString().indexOf("array initialize "+this.getFieldValue("VAR"))){for(var d="",e=0;e<c.length;e++)if(-1<c[e].toString().indexOf("array initialize "+this.getFieldValue("VAR"))){d=c[e].toString().replace(/[^0-9]/g,"");break}b&&(b>=parseInt(d,10)||0>b)&&(a="WARNING: You are trying to set an element\nin your array that does not exist!")}else a=
'WARNING: The array "'+this.getFieldValue("VAR")+'" has not been initialized!';this.setWarningText(a)}};
Blockly.propc.array_set=function(){var a=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR"),"Array"),b=Blockly.propc.valueToCode(this,"NUM",Blockly.propc.ORDER_NONE)||"0",c=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_NONE)||"0",d=a+"["+b+"] = "+c+";\n",e=Blockly.getMainWorkspace().getAllBlocks();if(-1<e.toString().indexOf("array initialize "+this.getFieldValue("VAR"))){for(var f="",g=0;g<e.length;g++)if(-1<e[g].toString().indexOf("array initialize "+this.getFieldValue("VAR"))){f=
e[g].toString().replace(/[^0-9]/g,"");break}if(b.replace(/[^0-9]+/g,"")===b){if(parseInt(b)>=parseInt(f,10)||0>parseInt(b))d="WARNING: You are trying to set an element\nin your array that does not exist!\n"}else this.disabled||(Blockly.propc.methods_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax) {if(__cVal < __cMin) __cVal = __cMin;\nif(__cVal > __cMax) __cVal = __cMax;\nreturn __cVal;\n}\n",Blockly.propc.method_declarations_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax);\n"),
d=a+"[constrain("+b+", 0, "+(parseInt(f,10)-1).toString(10),d+=")] = "+c+";\n"}else d='WARNING: The array "'+this.getFieldValue("VAR")+'" has not been initialized!\n';return d};
Blockly.Blocks.array_clear={helpUrl:Blockly.MSG_ARRAYS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ARRAY_CLEAR_TOOLTIP);this.setColour(colorPalette.getColor("variables"));this.appendDummyInput().appendField("array clear").appendField(new Blockly.FieldTextInput("list"),"VAR");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0)},onchange:function(){var a=null;-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("array initialize "+this.getFieldValue("VAR"))&&(a='WARNING: The array "'+
this.getFieldValue("VAR")+'" has not been initialized!');this.setWarningText(a)}};Blockly.propc.array_clear=function(){var a=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR"),"Array");return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("array initialize "+this.getFieldValue("VAR"))?'// ERROR: The array "'+this.getFieldValue("VAR")+'" has not been initialized!\n':"memset("+a+", 0, sizeof "+a+");\n"};Blockly.Blocks.procedures_defnoreturn={init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_FUNCTIONS_HELPURL):this.setHelpUrl(Blockly.MSG_FUNCTIONS_HELPURL);this.setTooltip(Blockly.MSG_PROCEDURES_DEFNORETURN_TOOLTIP);var a=new Blockly.FieldTextInput(Blockly.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,Blockly.Procedures.rename);a.setSpellcheck(!1);this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(a,"NAME").appendField("",
"PARAMS");this.setColour(colorPalette.getColor("functions"));this.arguments_=[];this.setStatements_(!0);this.statementConnection_=null},validate:function(){var a=Blockly.Procedures.findLegalName(this.getFieldValue("NAME"),this);this.setFieldValue(a,"NAME")},setStatements_:function(a){this.hasStatements_!==a&&(a?(this.appendStatementInput("STACK").appendField(Blockly.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=
a)},updateParams_:function(){for(var a=!1,b={},c=0;c<this.arguments_.length;c++){if(b["arg_"+this.arguments_[c].toLowerCase()]){a=!0;break}b["arg_"+this.arguments_[c].toLowerCase()]=!0}a?this.setWarningText(Blockly.Msg.PROCEDURES_DEF_DUPLICATE_WARNING):this.setWarningText(null);a="";this.arguments_.length&&(a=Blockly.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", "));Blockly.Events.disable();this.setFieldValue(a,"PARAMS");Blockly.Events.enable()},mutationToDom:function(a){var b=document.createElement("mutation");
a&&b.setAttribute("name",this.getFieldValue("NAME"));for(var c=0;c<this.arguments_.length;c++){var d=document.createElement("arg");d.setAttribute("name",this.arguments_[c]);a&&this.paramIds_&&d.setAttribute("paramId",this.paramIds_[c]);b.appendChild(d)}this.hasStatements_||b.setAttribute("statements","false");return b},domToMutation:function(a){this.arguments_=[];for(var b=0,c;c=a.childNodes[b];b++)"arg"===c.nodeName.toLowerCase()&&this.arguments_.push(c.getAttribute("name"));this.updateParams_();
Blockly.Procedures.mutateCallers(this);this.setStatements_("false"!==a.getAttribute("statements"))},decompose:function(a){var b=a.newBlock("procedures_mutatorcontainer");b.initSvg();this.getInput("RETURN")?b.setFieldValue(this.hasStatements_?"TRUE":"FALSE","STATEMENTS"):b.getInput("STATEMENT_INPUT").setVisible(!1);for(var c=b.getInput("STACK").connection,d=0;d<this.arguments_.length;d++){var e=a.newBlock("procedures_mutatorarg");e.initSvg();e.setFieldValue(this.arguments_[d],"NAME");e.oldLocation=
d;c.connect(e.previousConnection);c=e.nextConnection}Blockly.Procedures.mutateCallers(this);return b},compose:function(a){this.arguments_=[];this.paramIds_=[];for(var b=a.getInputTargetBlock("STACK");b;)this.arguments_.push(b.getFieldValue("NAME")),this.paramIds_.push(b.id),b=b.nextConnection&&b.nextConnection.targetBlock();this.updateParams_();Blockly.Procedures.mutateCallers(this);a=a.getFieldValue("STATEMENTS");if(null!==a&&(a="TRUE"===a,this.hasStatements_!==a))if(a)this.setStatements_(!0),Blockly.Mutator.reconnect(this.statementConnection_,
this,"STACK"),this.statementConnection_=null;else{a=this.getInput("STACK").connection;if(this.statementConnection_=a.targetConnection)a=a.targetBlock(),a.unplug(),a.bumpNeighbours_();this.setStatements_(!1)}},dispose:function(){var a=this.getFieldValue("NAME");Blockly.Procedures.disposeCallers(a,this.workspace);this.constructor.prototype.dispose.apply(this,arguments)},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},getVars:function(){return this.arguments_},renameVar:function(a,
b){for(var c=!1,d=0;d<this.arguments_.length;d++)Blockly.Names.equals(a,this.arguments_[d])&&(this.arguments_[d]=b,c=!0);if(c&&(this.updateParams_(),this.mutator.isVisible())){c=this.mutator.workspace_.getAllBlocks();d=0;for(var e;e=c[d];d++)"procedures_mutatorarg"==e.type&&Blockly.Names.equals(a,e.getFieldValue("NAME"))&&e.setFieldValue(b,"NAME")}},customContextMenu:function(a){var b={enabled:!0},c=this.getFieldValue("NAME");b.text=Blockly.Msg.PROCEDURES_CREATE_DO.replace("%1",c);var d=goog.dom.createDom("mutation");
d.setAttribute("name",c);for(var e=0;e<this.arguments_.length;e++)c=goog.dom.createDom("arg"),c.setAttribute("name",this.arguments_[e]),d.appendChild(c);d=goog.dom.createDom("block",null,d);d.setAttribute("type",this.callType_);b.callback=Blockly.ContextMenu.callbackFactory(this,d);a.push(b);if(!this.isCollapsed())for(e=0;e<this.arguments_.length;e++)b={enabled:!0},c=this.arguments_[e],b.text=Blockly.Msg.VARIABLES_SET_CREATE_GET.replace("%1",c),d=goog.dom.createDom("field",null,c),d.setAttribute("name",
"VAR"),d=goog.dom.createDom("block",null,d),d.setAttribute("type","variables_get"),b.callback=Blockly.ContextMenu.callbackFactory(this,d),a.push(b)},callType_:"procedures_callnoreturn"};
Blockly.Blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TITLE);this.appendStatementInput("STACK");this.appendDummyInput("STATEMENT_INPUT").appendField(Blockly.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new Blockly.FieldCheckbox("TRUE"),"STATEMENTS");this.setColour(colorPalette.getColor("functions"));this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP);this.contextMenu=!1}};
Blockly.Blocks.procedures_mutatorarg={init:function(){this.appendDummyInput().appendField(Blockly.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(new Blockly.FieldTextInput("x",this.validator_),"NAME");this.setPreviousStatement(!0);this.setNextStatement(!0);this.setColour(colorPalette.getColor("functions"));this.setTooltip(Blockly.Msg.PROCEDURES_MUTATORARG_TOOLTIP);this.contextMenu=!1},validator_:function(a){return(a=a.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""))||null}};
Blockly.Blocks.procedures_callnoreturn={init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_FUNCTIONS_HELPURL):this.setHelpUrl(Blockly.MSG_FUNCTIONS_HELPURL);this.setTooltip(Blockly.MSG_PROCEDURES_CALLNORETURN_TOOLTIP);this.appendDummyInput("TOPROW").appendField("run function ").appendField("\u201c").appendField(this.id,"NAME").appendField("\u201d");this.setPreviousStatement(!0,"Function");this.setNextStatement(!0);this.setColour(colorPalette.getColor("functions"));
this.arguments_=[];this.quarkConnections_={};this.quarkIds_=null},onchange:function(){var a=this.previousConnection.targetBlock();a?0===a.toString().indexOf("new processor ")?this.setNextStatement(!1):this.setNextStatement(!0):this.setNextStatement(!0)},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(a,b){Blockly.Names.equals(a,this.getProcedureCall())&&this.setFieldValue(b,"NAME")},setProcedureParameters_:function(a,b){var c=Blockly.Procedures.getDefinition(this.getProcedureCall(),
this.workspace),d=c&&c.mutator&&c.mutator.isVisible();d||(this.quarkConnections_={},this.quarkIds_=null);if(b)if(goog.array.equals(this.arguments_,a))this.quarkIds_=b;else{if(b.length!=a.length)throw"Error: paramNames and paramIds must be the same length.";this.setCollapsed(!1);this.quarkIds_||(this.quarkConnections_={},a.join("\n")==this.arguments_.join("\n")?this.quarkIds_=b:this.quarkIds_=[]);c=this.rendered;this.rendered=!1;for(var e=0;e<this.arguments_.length;e++){var f=this.getInput("ARG"+e);
f&&(f=f.connection.targetConnection,this.quarkConnections_[this.quarkIds_[e]]=f,d&&f&&-1===b.indexOf(this.quarkIds_[e])&&(f.disconnect(),f.getSourceBlock().bumpNeighbours_()))}this.arguments_=[].concat(a);this.updateShape_();if(this.quarkIds_=b)for(e=0;e<this.arguments_.length;e++)d=this.quarkIds_[e],d in this.quarkConnections_&&(f=this.quarkConnections_[d],Blockly.Mutator.reconnect(f,this,"ARG"+e)||delete this.quarkConnections_[d]);(this.rendered=c)&&this.render()}},updateShape_:function(){for(var a=
0;a<this.arguments_.length;a++){var b=this.getField("ARGNAME"+a);b?(Blockly.Events.disable(),b.setValue(this.arguments_[a]),Blockly.Events.enable()):(b=new Blockly.FieldLabel(this.arguments_[a]),this.appendValueInput("ARG"+a).setAlign(Blockly.ALIGN_RIGHT).appendField(b,"ARGNAME"+a).init())}for(;this.getInput("ARG"+a);)this.removeInput("ARG"+a),a++;if(a=this.getInput("TOPROW"))this.arguments_.length?this.getField("WITH")||(a.appendField(Blockly.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),a.init()):this.getField("WITH")&&
a.removeField("WITH")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("name",this.getProcedureCall());for(var b=0;b<this.arguments_.length;b++){var c=document.createElement("arg");c.setAttribute("name",this.arguments_[b]);a.appendChild(c)}return a},domToMutation:function(a){var b=a.getAttribute("name");this.renameProcedure(this.getProcedureCall(),b);b=[];for(var c=[],d=0,e;e=a.childNodes[d];d++)"arg"===e.nodeName.toLowerCase()&&(b.push(e.getAttribute("name")),c.push(e.getAttribute("paramId")));
this.setProcedureParameters_(b,c)},renameVar:function(a,b){for(var c=0;c<this.arguments_.length;c++)Blockly.Names.equals(a,this.arguments_[c])&&(this.arguments_[c]=b,this.getField("ARGNAME"+c).setValue(b))},customContextMenu:function(a){var b={enabled:!0};b.text=Blockly.Msg.PROCEDURES_HIGHLIGHT_DEF;var c=this.getProcedureCall(),d=this.workspace;b.callback=function(){var a=Blockly.Procedures.getDefinition(c,d);a&&a.select()};a.push(b)}};
Blockly.Blocks.procedures_callreturn={init:function(){this.appendDummyInput("TOPROW").appendField("","NAME");this.setOutput(!0);this.setColour(colorPalette.getColor("functions"));this.setHelpUrl(Blockly.Msg.PROCEDURES_CALLRETURN_HELPURL);this.arguments_=[];this.quarkConnections_={};this.quarkIds_=null},getProcedureCall:Blockly.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:Blockly.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters_:Blockly.Blocks.procedures_callnoreturn.setProcedureParameters_,
updateShape_:Blockly.Blocks.procedures_callnoreturn.updateShape_,mutationToDom:Blockly.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_callnoreturn.domToMutation,renameVar:Blockly.Blocks.procedures_callnoreturn.renameVar,customContextMenu:Blockly.Blocks.procedures_callnoreturn.customContextMenu};
Blockly.propc.procedures_defreturn=function(){var a=Blockly.propc.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),b=Blockly.propc.statementToCode(this,"STACK");Blockly.propc.INFINITE_LOOP_TRAP&&(b=Blockly.propc.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+b);var c=Blockly.propc.valueToCode(this,"RETURN",Blockly.propc.ORDER_NONE)||"";c&&(c="  return "+c+";\n");for(var d=c?"int":"void",e=[],f=0;f<this.arguments_.length;f++){var g=Blockly.propc.variableDB_.getName(this.arguments_[f],
Blockly.Variables.NAME_TYPE);e.push("int "+g);void 0===Blockly.propc.vartype_[g]&&(Blockly.propc.vartype_[g]="LOCAL")}b=d+" "+a+"("+e.join(", ")+") {\n"+b+c+"}\n";Blockly.propc.method_declarations_[a]=d+" "+a+"("+e.join(", ")+");\n";b=Blockly.propc.scrub_(this,b);Blockly.propc.methods_[a]=b;return null};Blockly.propc.procedures_defnoreturn=Blockly.propc.procedures_defreturn;
Blockly.propc.procedures_callreturn=function(){for(var a=Blockly.propc.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),b=[],c=0;c<this.arguments_.length;c++)b[c]=Blockly.propc.valueToCode(this,"ARG"+c,Blockly.propc.ORDER_NONE)||"null";return[a+"("+b.join(", ")+")",Blockly.propc.ORDER_UNARY_POSTFIX]};
Blockly.propc.procedures_callnoreturn=function(){for(var a=Blockly.propc.variableDB_.getName(this.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),b=[],c=0;c<this.arguments_.length;c++)b[c]=Blockly.propc.valueToCode(this,"ARG"+c,Blockly.propc.ORDER_NONE)||"null";return a+"("+b.join(", ")+");\n"};
Blockly.propc.procedures_ifreturn=function(){var a="if ("+(Blockly.propc.valueToCode(this,"CONDITION",Blockly.propc.ORDER_NONE)||"false")+") {\n";if(this.hasReturnValue_){var b=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_NONE)||"null";a+="  return "+b+";\n"}else a+="  return;\n";return a+"}\n"};Blockly.Blocks||(Blockly.Blocks={});
Blockly.Blocks.make_pin={init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_IO_HELPURL):this.setHelpUrl(Blockly.MSG_PINS_HELPURL);this.setTooltip(Blockly.MSG_MAKE_PIN_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.appendDummyInput().appendField("make PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN").appendField(new Blockly.FieldDropdown([["high","HIGH"],
["low","LOW"],["toggle","TOGGLE"],["input","INPUT"],["reverse","REVERSE"]]),"ACTION")}};Blockly.propc.make_pin=function(){var a=this.getFieldValue("PIN");switch(this.getFieldValue("ACTION")){case "HIGH":return"high("+a+");\n";case "LOW":return"low("+a+");\n";case "TOGGLE":return"toggle("+a+");\n\tset_direction("+a+", 1);\n";case "INPUT":return"set_direction("+a+", 0);\n";case "REVERSE":return"reverse("+a+");\n"}};
Blockly.Blocks.make_pin_input={helpUrl:Blockly.MSG_PINS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MAKE_PIN_INPUT_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.appendDummyInput("").appendField("make PIN");this.appendValueInput("PIN").setCheck("Number").appendField("A,"+profile["default"].digital.toString(),"RANGEVALS0");this.getField("RANGEVALS0").setVisible(!1);this.appendDummyInput("ACTION").appendField(new Blockly.FieldDropdown([["high",
"HIGH"],["low","LOW"],["toggle","TOGGLE"],["input","INPUT"],["reverse","REVERSE"]]),"ACTION")}};Blockly.propc.make_pin_input=function(){var a=Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||0;switch(this.getFieldValue("ACTION")){case "HIGH":return"high("+a+");\n";case "LOW":return"low("+a+");\n";case "TOGGLE":return"toggle("+a+");\n\tset_direction("+a+", 1);\n";case "INPUT":return"set_direction("+a+", 0);\n";case "REVERSE":return"reverse("+a+");\n"}};
Blockly.Blocks.check_pin={init:function(){"Scribbler Robot"===profile["default"].description?this.setHelpUrl(Blockly.MSG_S3_IO_HELPURL):this.setHelpUrl(Blockly.MSG_PINS_HELPURL);this.setTooltip(Blockly.MSG_CHECK_PIN_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.appendDummyInput("").appendField("check PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN");this.setOutput(!0,"Number")}};
Blockly.propc.check_pin=function(){return["input("+this.getFieldValue("PIN")+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.check_pin_input={helpUrl:Blockly.MSG_PINS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CHECK_PIN_INPUT_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.appendValueInput("PIN").appendField("check PIN").setCheck("Number").appendField("A,"+profile["default"].digital.toString(),"RANGEVALS0");this.getField("RANGEVALS0").setVisible(!1);this.setOutput(!0,"Number");this.setInputsInline(!0)}};
Blockly.propc.check_pin_input=function(){return["input("+(Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_UNARY_PREFIX)||"0")+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.set_pins={helpUrl:Blockly.MSG_PINS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SET_PINS_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);for(var a=[],b=profile["default"].contiguous_pins_start;b<=profile["default"].contiguous_pins_end;b++)a.push([b.toString(),b.toString()]);var c=[];for(b=profile["default"].contiguous_pins_start;b<=profile["default"].contiguous_pins_end;b++)c.push([b.toString(),b.toString()]);
this.appendDummyInput("").appendField("set the").appendField(new Blockly.FieldDropdown([["states","STATE"],["directions","DIRECTION"]],function(a){this.sourceBlock_.updateShape_({ACTION:a})}),"ACTION").appendField("from lowest PIN").appendField(new Blockly.FieldDropdown(c,function(a){this.sourceBlock_.updateShape_({START_PIN:a})}),"START_PIN").appendField("to highest PIN").appendField(new Blockly.FieldDropdown(a,function(a){this.sourceBlock_.updateShape_({PIN_COUNT:a})}),"PIN_COUNT");this.appendDummyInput("PINS").appendField("values:").appendField("P0:").appendField(new Blockly.FieldDropdown([["HIGH",
"1"],["LOW","0"]]),"P0")},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("ACTION");a.setAttribute("action",b);b=this.getFieldValue("PIN_COUNT");a.setAttribute("pin_count",b);b=this.getFieldValue("START_PIN");a.setAttribute("start_pin",b);return a},domToMutation:function(a){var b=a.getAttribute("action"),c=a.getAttribute("pin_count");a=a.getAttribute("start_pin");this.updateShape_({ACTION:b,PIN_COUNT:c,START_PIN:a})},updateShape_:function(a){for(var b=[],c=0;32>
c;c++)b.push(this.getFieldValue("P"+c));var d=a.ACTION;void 0===a.ACTION&&(d=this.getFieldValue("ACTION"));var e=a.PIN_COUNT;void 0===a.PIN_COUNT&&(e=this.getFieldValue("PIN_COUNT"));var f=a.START_PIN;void 0===a.START_PIN&&(f=this.getFieldValue("START_PIN"));e=Number(e);f=Number(f);this.removeInput("PINS");this.appendDummyInput("PINS").appendField("Values:");a=this.getInput("PINS");for(c=0;c<e-f+1;c++){var g=f+c;"STATE"===d?a.appendField("P"+g+":").appendField(new Blockly.FieldDropdown([["HIGH","1"],
["LOW","0"]]),"P"+g):"DIRECTION"===d&&a.appendField("P"+g+":").appendField(new Blockly.FieldDropdown([["OUT","1"],["IN","0"]]),"P"+g)}for(c=0;32>c;c++)this.getField("P"+c)&&null!==b[c]&&this.setFieldValue(b[c],"P"+c)}};
Blockly.propc.set_pins=function(){var a="",b=this.getFieldValue("ACTION"),c=Number(this.getFieldValue("PIN_COUNT")),d=Number(this.getFieldValue("START_PIN"));"STATE"===b?a="set_outputs(":"DIRECTION"===b&&(a="set_directions(");a=a+c+", "+d;a+=", 0b";for(b=c;b>=d;b--)a+=this.getFieldValue("P"+b);return a+");\n"};
Blockly.Blocks.get_pins={helpUrl:Blockly.MSG_PINS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GET_PINS_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number");for(var a=[],b=profile["default"].contiguous_pins_start;b<=profile["default"].contiguous_pins_end;b++)a.push([b.toString(),b.toString()]);var c=[];for(b=profile["default"].contiguous_pins_start;b<=profile["default"].contiguous_pins_end;b++)c.push([b.toString(),
b.toString()]);this.appendDummyInput("").appendField("get the").appendField(new Blockly.FieldDropdown([["states","STATE"],["directions","DIRECTION"]]),"ACTION").appendField("from lowest PIN").appendField(new Blockly.FieldDropdown(c),"START_PIN").appendField("to highest PIN").appendField(new Blockly.FieldDropdown(a),"PIN_COUNT")}};
Blockly.propc.get_pins=function(){var a="",b=this.getFieldValue("ACTION"),c=Number(this.getFieldValue("PIN_COUNT")),d=Number(this.getFieldValue("START_PIN"));"STATE"===b?a="get_states(":"DIRECTION"===b&&(a="get_outputs(");a=a+c+", "+d;a+=")";return[a,Blockly.propc.ORDER_NONE]};
Blockly.Blocks.set_pins_binary={helpUrl:Blockly.MSG_PINS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SET_PINS_BINARY_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);for(var a=[],b=profile["default"].contiguous_pins_start;b<=profile["default"].contiguous_pins_end;b++)a.push([b.toString(),b.toString()]);var c=[];for(b=profile["default"].contiguous_pins_start;b<=profile["default"].contiguous_pins_end;b++)c.push([b.toString(),
b.toString()]);this.appendValueInput("VALUE").appendField("set the").appendField(new Blockly.FieldDropdown([["states","STATE"],["directions","DIRECTION"]]),"ACTION").appendField("from lowest PIN").appendField(new Blockly.FieldDropdown(c),"START_PIN").appendField("to highest PIN").appendField(new Blockly.FieldDropdown(a),"PIN_COUNT").appendField("using bits from").setCheck("Number")}};
Blockly.propc.set_pins_binary=function(){var a="",b=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_NONE)||"0b0000",c=this.getFieldValue("ACTION"),d=Number(this.getFieldValue("PIN_COUNT")),e=Number(this.getFieldValue("START_PIN"));"STATE"===c?a="set_outputs(":"DIRECTION"===c&&(a="set_directions(");a=a+d+", "+e;return a+=", "+b+");\n"};
Blockly.Blocks.base_freqout={helpUrl:Blockly.MSG_AUDIO_HELPURL,init:function(){this.setTooltip(Blockly.MSG_BASE_FREQOUT_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.addPinMenu("frequency PIN","DURATION");this.appendValueInput("DURATION").appendField("duration (ms)").setCheck("Number");this.appendValueInput("FREQUENCY").appendField("frequency (Hz)").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},addPinMenu:function(a,b){this.appendDummyInput("SET_PIN").appendField(a,
"LABEL").appendField(new Blockly.FieldDropdown(profile["default"].digital.concat([["other","other"]]),function(a){this.sourceBlock_.setToOther(a,b)}),"PIN");this.moveBefore=b;this.otherPin=!1},setToOther:function(a,b){if("other"===a){this.otherPin=!0;var c=this.getFieldValue("LABEL");this.removeInput("SET_PIN");this.appendValueInput("PIN").appendField(c).setCheck("Number").appendField("A,"+profile["default"].digital.toString(),"RANGEVALS0");this.getField("RANGEVALS0").setVisible(!1);b&&this.moveInputBefore("PIN",
b)}},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("otherpin",this.otherPin);return a},domToMutation:function(a){"true"===a.getAttribute("otherpin")&&this.setToOther("other",this.moveBefore)}};
Blockly.propc.base_freqout=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");var b=Blockly.propc.valueToCode(this,"DURATION",Blockly.propc.ORDER_ATOMIC)||1E3,c=Blockly.propc.valueToCode(this,"FREQUENCY",Blockly.propc.ORDER_ATOMIC)||3E3;return"freqout("+a+", "+b+", "+c+");\n"};
Blockly.Blocks.base_count={helpUrl:Blockly.MSG_ANALOG_PULSE_IN_OUT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_BASE_COUNT_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.addPinMenu("count pulses PIN","DURATION");this.appendValueInput("DURATION").appendField("duration (ms)").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number")},mutationToDom:Blockly.Blocks.base_freqout.mutationToDom,domToMutation:Blockly.Blocks.base_freqout.domToMutation,
addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther};Blockly.propc.base_count=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");var b=Blockly.propc.valueToCode(this,"DURATION",Blockly.propc.ORDER_ATOMIC)||"1";return["count("+a+", "+b+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.pulse_in={helpUrl:Blockly.MSG_ANALOG_PULSE_IN_OUT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_PULSE_IN_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.addPinMenu("pulse-in PIN","READ");this.appendDummyInput("READ").appendField("read").appendField(new Blockly.FieldDropdown([["negative/low pulses","0"],["positive/high pulses","1"]]),"STATE");this.setInputsInline(!0);this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number")},mutationToDom:Blockly.Blocks.base_freqout.mutationToDom,
domToMutation:Blockly.Blocks.base_freqout.domToMutation,addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther};Blockly.propc.pulse_in=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");var b=this.getFieldValue("STATE");return["pulse_in("+a+", "+b+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.pulse_out={helpUrl:Blockly.MSG_ANALOG_PULSE_IN_OUT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_PULSE_OUT_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.addPinMenu("pulse-out PIN","PULSE_LENGTH");this.appendValueInput("PULSE_LENGTH").appendField("pulse length (\u00b5s)").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},mutationToDom:Blockly.Blocks.base_freqout.mutationToDom,domToMutation:Blockly.Blocks.base_freqout.domToMutation,
addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther};Blockly.propc.pulse_out=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");var b=Blockly.propc.valueToCode(this,"PULSE_LENGTH",Blockly.propc.ORDER_ATOMIC);return"pulse_out("+a+", "+b+");\n"};
Blockly.Blocks.rc_charge_discharge={helpUrl:Blockly.MSG_ANALOG_RC_TIME_HELPURL,init:function(){this.setTooltip(Blockly.MSG_RC_CHARGE_DISCHARGE_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.addPinMenu("RC time PIN","MODE");this.appendDummyInput("MODE").appendField(" ").appendField(new Blockly.FieldDropdown([["charge","0"],["discharge","1"]]),"STATE");this.setInputsInline(!0);this.setPreviousStatement(!1,"Block");this.setNextStatement(!1,null);this.setOutput(!0,"Number")},mutationToDom:Blockly.Blocks.base_freqout.mutationToDom,
domToMutation:Blockly.Blocks.base_freqout.domToMutation,addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther};Blockly.propc.rc_charge_discharge=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");var b=this.getFieldValue("STATE");return["rc_time("+a+", "+b+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.eeprom_write={helpUrl:Blockly.MSG_EEPROM_HELPURL,init:function(){this.setTooltip(Blockly.MSG_EEPROM_WRITE_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendValueInput("DATA").setCheck(null).appendField("EEPROM write").appendField(new Blockly.FieldDropdown([["number","NUMBER"],["text","TEXT"],["byte","BYTE"]],function(a){this.sourceBlock_.setOutputType_(a)}),"TYPE");this.appendValueInput("ADDRESS").appendField("R,0,7675,0","RANGEVALS0").setCheck("Number").appendField("to address");
this.getField("RANGEVALS0").setVisible(!1);this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setOutputType_(this.getFieldValue("DATA"))},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("type",this.getFieldValue("TYPE"));return a},domToMutation:function(a){(a=a.getAttribute("type"))||(a=null);this.setOutputType_(a||null)},setOutputType_:function(a){var b="Number";"TEXT"===a&&(b="String");if(null===a||"null"===a)b=null;
this.getInput("DATA").setCheck(b)}};
Blockly.propc.eeprom_write=function(){var a=this.getFieldValue("TYPE"),b=Blockly.propc.valueToCode(this,"ADDRESS",Blockly.propc.ORDER_ATOMIC),c=Blockly.propc.valueToCode(this,"DATA",Blockly.propc.ORDER_ATOMIC)||"";this.disabled||(Blockly.propc.methods_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax) {if(__cVal < __cMin) __cVal = __cMin;\nif(__cVal > __cMax) __cVal = __cMax;\nreturn __cVal;\n}\n",Blockly.propc.method_declarations_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax);\n");
var d="";""!==c&&(d="BYTE"===a?d+("ee_putByte(("+c+" & 255), (32768 + constrain("+b+", 0, 7675)) );\n"):"NUMBER"===a?d+("ee_putInt("+c+", (32768 + constrain("+b+", 0, 7675)) );\n"):d+("ee_putStr("+c+", (strlen("+c+") + 1), (32768 + constrain("+b+", 0, 7675)) );\n"));return d};
Blockly.Blocks.eeprom_read={helpUrl:Blockly.MSG_EEPROM_HELPURL,init:function(){this.setTooltip(Blockly.MSG_EEPROM_READ_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendValueInput("ADDRESS").setCheck("Number").appendField("EEPROM read").appendField(new Blockly.FieldDropdown([["number","NUMBER"],["text","TEXT"],["byte","BYTE"]]),"TYPE").appendField("R,0,7675,0","RANGEVALS0").appendField("from address");this.appendDummyInput().appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"VALUE");this.getField("RANGEVALS0").setVisible(!1);this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVarType:function(){return"TEXT"===this.getFieldValue("TYPE")?"String":"Number"},getVars:function(){return[this.getFieldValue("VALUE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VALUE"))&&this.setFieldValue(b,"VALUE")}};
Blockly.propc.eeprom_read=function(){var a=this.getFieldValue("TYPE"),b=Blockly.propc.valueToCode(this,"ADDRESS",Blockly.propc.ORDER_ATOMIC)||"0",c=Blockly.propc.variableDB_.getName(this.getFieldValue("VALUE"),Blockly.Variables.NAME_TYPE),d="";this.disabled||(Blockly.propc.methods_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax) {if(__cVal < __cMin) __cVal = __cMin;\nif(__cVal > __cMax) __cVal = __cMax;\nreturn __cVal;\n}\n",Blockly.propc.method_declarations_.constrain_function=
"int constrain(int __cVal, int __cMin, int __cMax);\n");""!==c&&("BYTE"===a?d+=c+" = ee_getByte( 32768 + constrain("+b+", 0, 7675)) & 255;\n":"NUMBER"===a?d+=c+" = ee_getInt( 32768 + constrain("+b+", 0, 7675));\n":(this.disabled||(Blockly.propc.global_vars_.i2c_eeBffr="char __eeBffr[1];",Blockly.propc.global_vars_.i2c_eeIdx="int __eeIdx = 0;",Blockly.propc.vartype_[c]="char *"),d=d+"// Get the string from EEPROM one character at a time until it finds the end of the string.\n__eeIdx = 0;\n"+("while(__eeIdx < 128) {\n  ee_getStr(__eeBffr, 1, (32768 + constrain("+
b+", 0, 7675)) + __eeIdx);\n")+(c+"[__eeIdx] = __eeBffr[0];\nif("+c+"[__eeIdx] == 0) break;\n  __eeIdx++;\n}\n")+("if(__eeIdx >= 128) "+c+"[127] = 0;\n")));return d};
Blockly.Blocks.servo_move={init:function(){"Scribbler Robot"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_S3_SERVO_HELPURL),this.setColour(colorPalette.getColor("robot"))):(this.setHelpUrl(Blockly.MSG_SERVO_HELPURL),this.setColour(colorPalette.getColor("output")));this.setTooltip(Blockly.MSG_SERVO_MOVE_TOOLTIP);this.addPinMenu("Servo PIN","ANGLE");this.appendValueInput("ANGLE").appendField("set angle (0-180\u00b0)").setCheck("Number").appendField("R,0,180,0","RANGEVALS1");this.getField("RANGEVALS1").setVisible(!1);
this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},mutationToDom:Blockly.Blocks.base_freqout.mutationToDom,domToMutation:Blockly.Blocks.base_freqout.domToMutation,addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther};
Blockly.propc.servo_move=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");var b=Blockly.propc.valueToCode(this,"ANGLE",Blockly.propc.ORDER_NONE);this.disabled||(Blockly.propc.definitions_["include servo"]='#include "servo.h"');return"servo_angle("+a+", "+b+" * 10);\n"};
Blockly.Blocks.servo_speed={init:function(){"Scribbler Robot"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_S3_SERVO_HELPURL),this.setColour(colorPalette.getColor("robot"))):(this.setHelpUrl(Blockly.MSG_SERVO_HELPURL),this.setColour(colorPalette.getColor("output")));this.setTooltip(Blockly.MSG_SERVO_SPEED_TOOLTIP);this.addPinMenu("CR servo PIN","SPEED");this.appendValueInput("SPEED").appendField("speed").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");
this.setNextStatement(!0,null)},mutationToDom:Blockly.Blocks.base_freqout.mutationToDom,domToMutation:Blockly.Blocks.base_freqout.domToMutation,addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther};
Blockly.propc.servo_speed=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");var b=Blockly.propc.valueToCode(this,"SPEED",Blockly.propc.ORDER_NONE);this.disabled||(Blockly.propc.definitions_["include servo"]='#include "servo.h"');return"servo_speed("+a+", "+b+");\n"};
Blockly.Blocks.servo_set_ramp={helpUrl:Blockly.MSG_SERVO_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SERVO_SET_RAMP_TOOLTIP);this.setColour(colorPalette.getColor("output"));this.addPinMenu("CR servo set ramp PIN","RAMPSTEP");this.appendValueInput("RAMPSTEP").appendField("rampstep (0 - 100)").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},mutationToDom:Blockly.Blocks.base_freqout.mutationToDom,domToMutation:Blockly.Blocks.base_freqout.domToMutation,
addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther};Blockly.propc.servo_set_ramp=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");var b=Blockly.propc.valueToCode(this,"RAMPSTEP",Blockly.propc.ORDER_NONE);0>Number(b)?b="0":100<Number(b)&&(b="100");this.disabled||(Blockly.propc.definitions_["include servo"]='#include "servo.h"');return"servo_setramp("+a+", "+b+");\n"};
Blockly.Blocks.fb360_init={init:function(){this.setTooltip(Blockly.MSG_FB360_INIT_TOOLTIP);"Scribbler Robot"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_S3_SERVO_HELPURL),this.setColour(colorPalette.getColor("robot"))):(this.setHelpUrl(Blockly.MSG_SERVO_HELPURL),this.setColour(colorPalette.getColor("output")));this.appendDummyInput().appendField("Feedback 360\u00b0 servo initialize PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN").appendField("FB").appendField(new Blockly.FieldDropdown(profile["default"].digital),
"FB");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};Blockly.propc.fb360_init=function(){var a=this.getFieldValue("PIN"),b=this.getFieldValue("FB");this.disabled||(Blockly.propc.definitions_["include servo360"]='#include "servo360.h"',Blockly.propc.setups_["servo360_"+a]="servo360_connect("+a+","+b+");\n");return""};
Blockly.Blocks.fb360_setup={init:function(){this.setTooltip(Blockly.MSG_FB360_SETUP_TOOLTIP);"Scribbler Robot"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_S3_SERVO_HELPURL),this.setColour(colorPalette.getColor("robot"))):(this.setHelpUrl(Blockly.MSG_SERVO_HELPURL),this.setColour(colorPalette.getColor("output")));this._menuOptions=[["acceleration (\u00b0/s\u00b2) to","setAcceleration"],["max speed (\u00b0/s) to","setMaxSpeed"],["turn count (+/- revolutions) to","setTurns"],["home to position (+/- \u00b0)",
"setAngleOffset"],["kP for speed to","setControlSys,S360_SETTING_KPV"],["kI for speed to","setControlSys,S360_SETTING_KIV"],["kD for speed to","setControlSys,S360_SETTING_KDV"],["I for speed max to","setControlSys,S360_SETTING_IV_MAX"],["kP for position to","setControlSys,S360_SETTING_KPA"],["kI for position to","setControlSys,S360_SETTING_KIA"],["kD for position to","setControlSys,S360_SETTING_KDA"],["I for position max to","setControlSys,S360_SETTING_IA_MAX"]];this.addPinMenu("Feedback 360\u00b0 servo PIN",
"VALUE");this.appendValueInput("VALUE").appendField("configure").appendField(new Blockly.FieldDropdown(this._menuOptions,function(a){this.sourceBlock_.updateShape_(a)}),"PARAM").appendField("R,0,7200,0","RANGEVALS1");this.getField("RANGEVALS1").setVisible(!1);this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther,updateShape_:function(a){"setAcceleration"===a?
this.setFieldValue("R,0,7200,0","RANGEVALS1"):"setMaxSpeed"===a?this.setFieldValue("R,0,1080,0","RANGEVALS1"):this.setFieldValue("R,-2147483648,2147483647,0","RANGEVALS1")},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("param",this.getFieldValue("PARAM"));a.setAttribute("otherpin",this.otherPin);return a},domToMutation:function(a){"true"===a.getAttribute("otherpin")&&this.setToOther("other",this.moveBefore);a=a.getAttribute("param");this.updateShape_(a)},onchange:function(){for(var a=
"WARNING: You need a Feedback 360\u00b0 servo initialize block set to match the PIN on this block!",b=Blockly.getMainWorkspace().getAllBlocks(),c=0;c<b.length;c++){var d=b[c].type,e=this.getFieldValue("PIN");"fb360_init"!==d||b[c].getFieldValue("PIN")!==e&&b[c].getFieldValue("FB")!==e||(a=null);"fb360_init"!==d||this.getInput("SET_PIN")||(a=null);this.setWarningText(a)}}};
Blockly.propc.fb360_setup=function(){var a=this.getFieldValue("PARAM"),b=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_NONE)||"0";var c=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");return-1<Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Feedback 360\u00b0 servo initialize")?-1<a.indexOf(",")?(a=a.split(","),"servo360_"+a[0]+"("+c+", "+a[1]+", "+b+");\n"):"servo360_"+a+"("+c+", "+b+");\n":"// WARNING: You need a Feedback 360\u00b0 servo initialize block set to match the PIN on this block!"};
Blockly.Blocks.fb360_set={init:function(){this.setTooltip(Blockly.MSG_FB360_SET_TOOLTIP);"Scribbler Robot"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_S3_SERVO_HELPURL),this.setColour(colorPalette.getColor("robot"))):(this.setHelpUrl(Blockly.MSG_SERVO_HELPURL),this.setColour(colorPalette.getColor("output")));this._menuOptions=[["set speed to (+/- \u00b0/s)","speed"],["set position to (+/- \u00b0)","angle"],["change position by (+/- \u00b0)","goto"]];this.addPinMenu("Feedback 360\u00b0 servo PIN",
"VALUE");this.appendValueInput("VALUE").setCheck("Number").appendField(" ").appendField(new Blockly.FieldDropdown(this._menuOptions,function(a){this.sourceBlock_.updateShape_(a)}),"PARAM").appendField("R,-720,720,0","RANGEVALS1");this.getField("RANGEVALS1").setVisible(!1);this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},updateShape_:function(a){"speed"===a?this.setFieldValue("R,-720,720,0","RANGEVALS1"):"angle"===a?this.setFieldValue("R,-1456,1456,0",
"RANGEVALS1"):this.setFieldValue("R,-2147483648,2147483647,0","RANGEVALS1")},onchange:Blockly.Blocks.fb360_setup.onchange,addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther,mutationToDom:Blockly.Blocks.fb360_setup.mutationToDom,domToMutation:Blockly.Blocks.fb360_setup.domToMutation};Blockly.propc.fb360_set=Blockly.propc.fb360_setup;
Blockly.Blocks.fb360_get={init:function(){this.setTooltip(Blockly.MSG_FB360_GET_TOOLTIP);"Scribbler Robot"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_S3_SERVO_HELPURL),this.setColour(colorPalette.getColor("robot"))):(this.setHelpUrl(Blockly.MSG_SERVO_HELPURL),this.setColour(colorPalette.getColor("output")));this.addPinMenu("Feedback 360\u00b0 servo PIN","VALUE");this.appendDummyInput("VALUE").appendField("position (\u00b0)");this.setOutput(!0,"Number");this.setInputsInline(!0)},
onchange:Blockly.Blocks.fb360_setup.onchange,addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther,mutationToDom:Blockly.Blocks.base_freqout.mutationToDom,domToMutation:Blockly.Blocks.base_freqout.domToMutation};
Blockly.propc.fb360_get=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");return-1<Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Feedback 360\u00b0 servo initialize")?["servo360_getAngle("+a+")",Blockly.propc.ORDER_NONE]:["0",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.fb360_status={init:function(){this.setTooltip(Blockly.MSG_FB360_STATUS_TOOLTIP);"Scribbler Robot"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_S3_SERVO_HELPURL),this.setColour(colorPalette.getColor("robot"))):(this.setHelpUrl(Blockly.MSG_SERVO_HELPURL),this.setColour(colorPalette.getColor("output")));this.addPinMenu("Feedback 360\u00b0 servo PIN","VALUE");this.appendDummyInput("VALUE").appendField(new Blockly.FieldDropdown([["is turning a speed","S360_SPEED"],["is moving to a position",
"S360_GOTO"],["is holding at a position","S360_POSITION"]]),"STATUS");this.setOutput(!0,"Number");this.setInputsInline(!0)},onchange:Blockly.Blocks.fb360_setup.onchange,addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther,mutationToDom:Blockly.Blocks.base_freqout.mutationToDom,domToMutation:Blockly.Blocks.base_freqout.domToMutation};
Blockly.propc.fb360_status=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");return-1<Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Feedback 360\u00b0 servo initialize")?["(servo360_getCsop("+a+") == "+this.getFieldValue("STATUS")+")",Blockly.propc.ORDER_NONE]:["0",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.ab_volt_in={helpUrl:Blockly.MSG_ANALOG_PULSES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AB_VOLT_IN_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.appendDummyInput().appendField("A/D channel").appendField(new Blockly.FieldDropdown([["0","0"],["1","1"],["2","2"],["3","3"]]),"CHANNEL").appendField("read (0-5V) in volt-100ths");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.ab_volt_in=function(){var a=this.getFieldValue("CHANNEL");this.disabled||(Blockly.propc.definitions_["include abvolts"]='#include "abvolts.h"',Blockly.propc.setups_.setup_abvolts="ad_init(21, 20, 19, 18);");return["(ad_in("+a+") * 500 / 4096)",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.ab_volt_out={helpUrl:Blockly.MSG_ANALOG_PULSES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AB_VOLT_OUT_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.appendDummyInput().appendField("D/A channel").appendField(new Blockly.FieldDropdown([["0","0"],["1","1"]]),"CHANNEL").appendField("output (0-3.3V)");this.appendValueInput("VALUE").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("R,0,330,0","RANGEVALS1").appendField("volt-100ths");this.getField("RANGEVALS1").setVisible(!1);
this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};Blockly.propc.ab_volt_out=function(){var a=this.getFieldValue("CHANNEL"),b=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_NONE)||"0";this.disabled||(Blockly.propc.definitions_["include abvolts"]='#include "abvolts.h"',Blockly.propc.setups_.setup_abvolt_out="da_init(26, 27);");return"da_out("+a+", ("+b+"* 256 / 330));\n"};
Blockly.Blocks.pwm_start={helpUrl:Blockly.MSG_ANALOG_PWM_HELPURL,init:function(){this.setTooltip(Blockly.MSG_PWM_START_TOOLTIP);this.setColour("#FF8800");this.appendDummyInput().appendField("PWM initialize");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText("NOTE: The PWM initialize block is no longer\nneeded. It can be safely deleted.")}};Blockly.propc.pwm_start=function(){return"// NOTE: The PWM initialize block is no longer needed. It can be safely deleted.\n"};
Blockly.Blocks.pwm_set={helpUrl:Blockly.MSG_ANALOG_PWM_HELPURL,init:function(){this.setTooltip(Blockly.MSG_PWM_SET_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.addPinMenu("PWM set PIN","CHANNEL");this.appendDummyInput("CHANNEL").appendField("channel").appendField(new Blockly.FieldDropdown([["A","0"],["B","1"]]),"CHANNEL");this.appendValueInput("DUTY_CYCLE",Number).appendField("R,0,100,0","RANGEVALS1").setCheck("Number").appendField("duty cycle (%)");this.getField("RANGEVALS1").setVisible(!1);
this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},addPinMenu:Blockly.Blocks.base_freqout.addPinMenu,setToOther:Blockly.Blocks.base_freqout.setToOther,mutationToDom:Blockly.Blocks.base_freqout.mutationToDom,domToMutation:Blockly.Blocks.base_freqout.domToMutation};
Blockly.propc.pwm_set=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("PIN");var b=this.getFieldValue("CHANNEL"),c=Blockly.propc.valueToCode(this,"DUTY_CYCLE",Blockly.propc.ORDER_NONE);0>Number(c)?c="0":100<Number(c)&&(c="100");return"pwm_start(100);\npwm_set("+a+", "+b+", "+c+");\n"};
Blockly.Blocks.pwm_stop={helpUrl:Blockly.MSG_ANALOG_PWM_HELPURL,init:function(){this.setTooltip(Blockly.MSG_PWM_STOP_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.appendDummyInput().appendField("PWM stop");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};Blockly.propc.pwm_stop=function(){return"pwm_stop();\n"};
Blockly.Blocks.wav_play={helpUrl:Blockly.MSG_AUDIO_HELPURL,init:function(){this.setTooltip(Blockly.MSG_WAV_PLAY_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.appendDummyInput().appendField("WAV play file").appendField(new Blockly.FieldTextInput("File_name"),"FILENAME");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.wav_play=function(){var a=this.getFieldValue("FILENAME");this.disabled||(Blockly.propc.definitions_["include wavplayer"]='#include "wavplayer.h"',Blockly.propc.setups_.sd_card="int DO = 22, CLK = 23, DI = 24, CS = 25;\n\tsd_mount(DO, CLK, DI, CS);\n");return'wav_play("'+a+'.wav");\n'};
Blockly.Blocks.wav_status={helpUrl:Blockly.MSG_AUDIO_HELPURL,init:function(){this.setTooltip(Blockly.MSG_WAV_STATUS_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.appendDummyInput().appendField("WAV status");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number")}};Blockly.propc.wav_status=function(){this.disabled||(Blockly.propc.definitions_["include wavplayer"]='#include "wavplayer.h"');return["wav_playing()",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.wav_volume={helpUrl:Blockly.MSG_AUDIO_HELPURL,init:function(){this.setTooltip(Blockly.MSG_WAV_VOLUME_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.appendValueInput("VOLUME").appendField("WAV volume (0 - 10)").appendField("R,0,10,0","RANGEVALS1");this.getField("RANGEVALS1").setVisible(!1);this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.wav_volume=function(){var a=Blockly.propc.valueToCode(this,"VOLUME",Blockly.propc.ORDER_NONE)||"0";this.disabled||(Blockly.propc.definitions_["include wavplayer"]='#include "wavplayer.h"',Blockly.propc.methods_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax) {if(__cVal < __cMin) __cVal = __cMin;\nif(__cVal > __cMax) __cVal = __cMax;\nreturn __cVal;\n}\n",Blockly.propc.method_declarations_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax);\n");
return"wav_volume(constrain("+a+", 0, 10));\n"};Blockly.Blocks.wav_stop={helpUrl:Blockly.MSG_AUDIO_HELPURL,init:function(){this.setTooltip(Blockly.MSG_WAV_STOP_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.appendDummyInput().appendField("WAV stop");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};Blockly.propc.wav_stop=function(){this.disabled||(Blockly.propc.definitions_["include wavplayer"]='#include "wavplayer.h"');return"wav_stop();\n"};
Blockly.Blocks.ab_drive_init={helpUrl:Blockly.MSG_ROBOT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ROBOT_DRIVE_INIT_TOOLTIP);this.setColour(colorPalette.getColor("robot"));this.appendDummyInput().appendField("Robot").appendField(new Blockly.FieldDropdown([["ActivityBot","abdrive.h"],["ActivityBot 360\u00b0","abdrive360.h"],["Arlo","arlodrive.h"],["Servo Differential Drive","servodiffdrive.h"]],function(a){this.sourceBlock_.updateShape_({BOT:a})}),"BOT").appendField("initialize");this.appendDummyInput("PINS");
this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("bot",this.getFieldValue("BOT"));a.setAttribute("lpin",this.getFieldValue("LEFT")||"");a.setAttribute("rpin",this.getFieldValue("RIGHT")||"");return a},domToMutation:function(a){var b=a.getAttribute("bot"),c=a.getAttribute("lpin")||"0";a=a.getAttribute("rpin")||"0";this.updateShape_({BOT:b,LEFT:c,RIGHT:a})},updateShape_:function(a){var b=
a.BOT;void 0===a.BOT&&(b=this.getFieldValue("BOT"));this.removeInput("PINS");this.appendDummyInput("PINS");var c=this.getInput("PINS");"servodiffdrive.h"===b&&(c.appendField(" left PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"LEFT").appendField("right PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"RIGHT"),a.LEFT&&this.setFieldValue(a.LEFT,"LEFT"),a.RIGHT&&this.setFieldValue(a.RIGHT,"RIGHT"));a=Blockly.getMainWorkspace().getAllBlocks();for(c=0;c<
a.length;c++){var d=a[c].newRobot;d&&d.call(a[c],b)}}};Blockly.propc.ab_drive_init=function(){var a=this.getFieldValue("BOT");if(!this.disabled&&(Blockly.propc.definitions_["include abdrive"]='#include "'+a+'"',"servodiffdrive.h"===a)){a=Number(this.getFieldValue("LEFT"));var b=Number(this.getFieldValue("RIGHT"));Blockly.propc.setups_.servodiffdrive="drive_pins("+a+","+b+");\n"}return""};
Blockly.Blocks.ab_drive_ramping={helpUrl:Blockly.MSG_ROBOT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ROBOT_RAMPING_TOOLTIP);this.setColour(colorPalette.getColor("robot"));this.appendDummyInput("ACCEL").appendField("Robot set acceleration for").appendField(new Blockly.FieldDropdown([["speed blocks to","FOR_SPEED"],["distance blocks to","FOR_GOTO"]]),"OPS").appendField(new Blockly.FieldDropdown([["2000 ticks/s\u00b2","2000"],["1600 ticks/s\u00b2 (jerky)","1600"],["1200 ticks/s\u00b2","1200"],
["800 ticks/s\u00b2 (peppy)","800"],["600 ticks/s\u00b2","600"],["400 ticks/s\u00b2 (smooth)","400"],["200 ticks/s\u00b2","200"],["100 ticks/s\u00b2 (sluggish)","100"]]),"RAMPING");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.isBot=""},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("bot",this.isBot);a.setAttribute("ramp",this.getFieldValue("RAMPING")||"600");a.setAttribute("type",this.getFieldValue("OPS")||"FOR_SPEED");
return a},domToMutation:function(a){var b=a.getAttribute("bot"),c=a.getAttribute("type")||this.getFieldValue("OPS");a=a.getAttribute("ramp")||this.getFieldValue("RAMPING");b?this.newRobot(b,c,a):this.whichBot()},whichBot:function(){var a="",b=Blockly.getMainWorkspace().getAllBlocks().toString();-1<b.indexOf("Robot ActivityBot initialize")?a="abdrive.h":-1<b.indexOf("Robot ActivityBot 360\u00b0 initialize")?a="abdrive360.h":-1<b.indexOf("Robot Arlo initialize")?a="arlodrive.h":-1<b.indexOf("Robot Servo Differential Drive initialize")&&
(a="servodiffdrive.h");if("ab_drive_ramping"===this.type){b=this.getFieldValue("RAMPING")||"600";var c=this.getFieldValue("OPS")||"FOR_SPEED";this.isBot=a;this.newRobot(a,c,b)}else this.newRobot(a)},newRobot:function(a,b,c){this.setWarningText(null);var d=[["2000 ticks/s\u00b2","2000"],["1600 ticks/s\u00b2 (jerky)","1600"],["1200 ticks/s\u00b2","1200"],["800 ticks/s\u00b2 (peppy)","800"],["600 ticks/s\u00b2","600"],["400 ticks/s\u00b2 (smooth)","400"],["200 ticks/s\u00b2","200"],["100 ticks/s\u00b2 (sluggish)",
"100"]];this.removeInput("ACCEL");"abdrive.h"===a||"arlodrive.h"===a||"abdrive360.h"===a?(this.appendDummyInput("ACCEL").appendField("Robot set acceleration for").appendField(new Blockly.FieldDropdown([["speed blocks to","FOR_SPEED"],["distance blocks to","FOR_GOTO"]]),"OPS").appendField(new Blockly.FieldDropdown(d),"RAMPING"),this.setFieldValue(b||"FOR_SPEED","OPS"),this.setFieldValue(c||"600","RAMPING"),"arlodrive.h"===a&&this.setWarningText("WARNING: This block does not currently work for the Arlo robot.")):
""===a?(this.setWarningText("WARNING: You must use a Robot initialize\nblock at the beginning of your program!"),this.appendDummyInput("ACCEL").appendField("Robot set acceleration")):(this.appendDummyInput("ACCEL").appendField("Robot set acceleration to").appendField(new Blockly.FieldDropdown(d),"RAMPING"),this.setFieldValue(c||"600","RAMPING"))}};
Blockly.propc.ab_drive_ramping=function(){var a=Number(this.getFieldValue("RAMPING")),b=this.getFieldValue("OPS"),c=Blockly.getMainWorkspace().getAllBlocks().toString();return-1<c.indexOf("Robot ActivityBot initialize")||-1<c.indexOf("Robot Arlo initialize")||-1<c.indexOf("Robot ActivityBot 360\u00b0 initialize")?"drive_setAcceleration("+b+", "+a.toString(10)+");\n":-1<c.indexOf("Robot Servo Differential Drive initialize")?"drive_setRampStep("+(a/50).toString(10)+","+(a/50).toString(10)+");\n":"// Robot drive system is not initialized!\n"};
Blockly.Blocks.ab_drive_get_ticks={helpUrl:Blockly.MSG_ROBOT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ROBOT_GET_TICKS_TOOLTIP);this.setColour(colorPalette.getColor("robot"));this.appendDummyInput("ACCEL").appendField("Robot encoders store left count in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"LEFT").appendField("right count in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"RIGHT");this.setInputsInline(!0);this.setPreviousStatement(!0,
"Block");this.setNextStatement(!0,null);this.whichBot()},whichBot:Blockly.Blocks.ab_drive_ramping.whichBot,newRobot:function(a){"abdrive.h"===a||"abdrive360.h"===a||"arlodrive.h"===a?this.setWarningText(null):""===a?this.setWarningText("WARNING: You must use a Robot initialize\nblock at the beginning of your program!"):this.setWarningText("WARNING: This block is not compatible with Servo Differential Drive")}};
Blockly.propc.ab_drive_get_ticks=function(){var a=Blockly.propc.variableDB_.getName(this.getFieldValue("LEFT"),Blockly.Variables.NAME_TYPE),b=Blockly.propc.variableDB_.getName(this.getFieldValue("RIGHT"),Blockly.Variables.NAME_TYPE),c=Blockly.getMainWorkspace().getAllBlocks().toString();return-1<c.indexOf("Robot ActivityBot initialize")||-1<c.indexOf("Robot ActivityBot 360\u00b0 initialize")||-1<c.indexOf("Robot Arlo initialize")?"drive_getTicks(&"+a+", &"+b+");\n":"// Robot drive system is not initialized or non-ActivityBot Robot selected!\n"};
Blockly.Blocks.ab_drive_goto={helpUrl:Blockly.MSG_ROBOT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ROBOT_DRIVE_DISTANCE_TOOLTIP);this.setColour(colorPalette.getColor("robot"));this.appendDummyInput().appendField("Robot drive distance in").appendField(new Blockly.FieldDropdown([["ticks","TICK"],["centimeters","CM"],["inches","INCH"]]),"UNITS");this.appendValueInput("LEFT").appendField("R,-4227330,4227330,0","RANGEVALS0").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("left");
this.appendValueInput("RIGHT").appendField("R,-4227330,4227330,0","RANGEVALS1").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("right");this.getField("RANGEVALS0").setVisible(!1);this.getField("RANGEVALS1").setVisible(!1);this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.whichBot()},whichBot:Blockly.Blocks.ab_drive_ramping.whichBot,newRobot:function(a){"servodiffdrive.h"===a?this.setWarningText('WARNING: Servo Differential Drive\ndoes not support "Robot drive distance"!'):
""===a?this.setWarningText("WARNING: You must use a Robot initialize\nblock at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.ab_drive_goto=function(){var a=Blockly.propc.valueToCode(this,"LEFT",Blockly.propc.ORDER_NONE)||"0",b=Blockly.propc.valueToCode(this,"RIGHT",Blockly.propc.ORDER_NONE)||"0",c=this.getFieldValue("UNITS"),d="",e=Blockly.getMainWorkspace().getAllBlocks().toString();return d=-1<e.indexOf("Robot ActivityBot initialize")||-1<e.indexOf("Robot ActivityBot 360\u00b0 initialize")?"TICK"===c?d+("drive_goto("+a+", "+b+");\n"):"CM"===c?d+("drive_goto(("+a+" * 40)/13, ("+b+" * 40)/13);\n"):d+("drive_goto(("+
a+" * 508)/65, ("+b+" * 508)/65);\n"):-1<e.indexOf("Robot Arlo initialize")?"TICK"===c?d+("drive_goto("+a+", "+b+");\n"):"CM"===c?d+("drive_goto(("+a+" * 253)/90, ("+b+" * 253)/90);\n"):d+("drive_goto(("+a+" * 50)/7, ("+b+" * 50)/7);\n"):-1<e.indexOf("Robot Servo Differential Drive initialize")?d+'// Servo Differential Drive does not support "Drive Distance"\n':d+"// Robot drive system is not initialized!\n"};
Blockly.Blocks.ab_drive_goto_max_speed={helpUrl:Blockly.MSG_ROBOT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ROBOT_DISTANCE_MAX_SPEED_TOOLTIP);this.setColour(colorPalette.getColor("robot"));this.appendValueInput("SPEED").appendField("Robot set max speed (+/-) for","TITLE").appendField(new Blockly.FieldDropdown([["speed blocks","FOR_SPEED"],["distance blocks","FOR_GOTO"]],function(a){this.sourceBlock_.applyTo(a)}),"OPS").appendField("R,0,128,0","RANGEVALS0").setCheck("Number");this.getField("RANGEVALS0").setVisible(!1);
this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.whichBot()},whichBot:Blockly.Blocks.ab_drive_ramping.whichBot,newRobot:function(a){"servodiffdrive.h"===a?this.setWarningText("WARNING: Servo Differential Drive\ndoes not support this block"):"arlodrive.h"===a?this.setWarningText("WARNING: This block does not currently work for the Arlo robot."):""===a?this.setWarningText("WARNING: You must use a Robot initialize\nblock at the beginning of your program!"):
this.setWarningText(null)},applyTo:function(a){"FOR_SPEED"===a?this.setFieldValue("Robot set max speed (+/-) for","TITLE"):"FOR_GOTO"===a&&this.setFieldValue("Robot set speed (+/-) for","TITLE")}};
Blockly.propc.ab_drive_goto_max_speed=function(){var a=Blockly.propc.valueToCode(this,"SPEED",Blockly.propc.ORDER_NONE)||"128",b=this.getFieldValue("OPS"),c=Blockly.getMainWorkspace().getAllBlocks().toString();return-1<c.indexOf("Robot ActivityBot initialize")||-1<c.indexOf("Robot ActivityBot 360\u00b0 initialize")?"drive_setMaxVelocity("+b+", "+a+");\n":-1<c.indexOf("Robot Arlo initialize")?"// Set max speed is not supported for this robot\n":-1<c.indexOf("Robot Servo Differential Drive initialize")?
"// Servo Differential Drive does not support this block\n":"// Robot drive system is not initialized!\n"};
Blockly.Blocks.ab_drive_speed={helpUrl:Blockly.MSG_ROBOT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ROBOT_DRIVE_SPEED_TOOLTIP);this.setColour(colorPalette.getColor("robot"));this.appendDummyInput().appendField("Robot drive speed","TITLE");this.appendValueInput("LEFT").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("R,-128,128,0","RANGEVALS0").appendField("left");this.appendValueInput("RIGHT").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("R,-128,128,0","RANGEVALS1").appendField("right");
this.getField("RANGEVALS0").setVisible(!1);this.getField("RANGEVALS1").setVisible(!1);this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.whichBot()},whichBot:Blockly.Blocks.ab_drive_ramping.whichBot,newRobot:function(a){var b=this.getInput("RIGHT").connection,c=this.getInput("LEFT").connection.targetBlock();b=b.targetBlock();var d=null,e="R,-128,128,0";c&&c.outputConnection.disconnect();b&&b.outputConnection.disconnect();this.removeInput("LEFT");this.removeInput("RIGHT");
"servodiffdrive.h"===a||"arlodrive.h"===a?e="R,-500,500,0":""===a&&(d="WARNING: You must use a Robot initialize\nblock at the beginning of your program!",e="N,0,0,0");this.appendValueInput("LEFT").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField(e,"RANGEVALS0").appendField("left");this.appendValueInput("RIGHT").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField(e,"RANGEVALS1").appendField("right");this.getField("RANGEVALS0").setVisible(!1);this.getField("RANGEVALS1").setVisible(!1);
this.setWarningText(d);c&&c.outputConnection.connect(this.getInput("LEFT").connection);b&&b.outputConnection.connect(this.getInput("RIGHT").connection);c&&c.onchange&&c.onchange.call(c);b&&b.onchange&&b.onchange.call(b)}};
Blockly.propc.ab_drive_speed=function(){var a=Blockly.propc.valueToCode(this,"LEFT",Blockly.propc.ORDER_NONE)||"0",b=Blockly.propc.valueToCode(this,"RIGHT",Blockly.propc.ORDER_NONE)||"0",c=Blockly.getMainWorkspace().getAllBlocks().toString();return-1<c.indexOf("Robot ActivityBot initialize")||-1<c.indexOf("Robot Arlo initialize")||-1<c.indexOf("Robot ActivityBot 360\u00b0 initialize")?"drive_speed("+a+", "+b+");\n":-1<c.indexOf("Robot Servo Differential Drive initialize")?"drive_speeds("+a+", "+b+
");\n":"// Robot drive system is not initialized!\n"};Blockly.Blocks.ab_drive_stop={helpUrl:Blockly.MSG_ROBOT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ROBOT_DRIVE_STOP_TOOLTIP);this.setColour(colorPalette.getColor("robot"));this.appendDummyInput().appendField("Robot drive stop");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.ab_drive_stop=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();return-1<a.indexOf("Robot ActivityBot initialize")||-1<a.indexOf("Robot Arlo initialize")||-1<a.indexOf("Robot ActivityBot 360\u00b0 initialize")?"drive_speed(0, 0);\n":-1<a.indexOf("Robot Servo Differential Drive initialize")?"drive_speeds(0, 0);\n":"// Robot drive system is not initialized!\n"};
Blockly.Blocks.activitybot_calibrate={helpUrl:Blockly.MSG_ROBOT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ROBOT_ACTIVITYBOT_CALIBRATE_TOOLTIP);this.setColour(colorPalette.getColor("robot"));this.appendDummyInput().appendField(new Blockly.FieldDropdown([["ActivityBot","abcalibrate.h"],["ActivityBot 360\u00b0","abcalibrate360.h"]]),"BOT").appendField("calibrate")}};
Blockly.propc.activitybot_calibrate=function(){var a=this.getFieldValue("BOT")||"abcalibrate.h";Blockly.propc.definitions_.activitybot_calibrate='#include "'+a+'"';Blockly.propc.setups_.activitybot_calibrate="cal_servoPins(12, 13);\n\tcal_encoderPins(14, 15);";return"high(26);\nhigh(27);\ncal_activityBot();\nlow(26);\nlow(27);\n"};
Blockly.Blocks.activitybot_display_calibration={helpUrl:Blockly.MSG_ROBOT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_ROBOT_ACTIVITYBOT_DISPLAY_CALIBRATION_TOOLTIP);this.setColour(colorPalette.getColor("robot"));this.appendDummyInput().appendField(new Blockly.FieldDropdown([["ActivityBot","abdrive.h"],["ActivityBot 360\u00b0","abcalibrate360.h"]]),"BOT").appendField("display calibration").appendField(new Blockly.FieldDropdown([["results","result"],["data","table"]]),"TYPE")}};
Blockly.propc.activitybot_display_calibration=function(){var a=this.getFieldValue("BOT")||"abdrive.h";Blockly.propc.definitions_.activitybot_calibrate='#include "'+a+'"';Blockly.propc.serial_terminal_=!0;return"abdrive.h"===a?"table"===this.getFieldValue("TYPE")?"drive_displayInterpolation();\n":"drive_calibrationResults();\n":"table"===this.getFieldValue("TYPE")?"cal_displayData();\n":"cal_displayResults();\n"};
Blockly.Blocks.mcp320x_read={helpUrl:Blockly.MSG_ANALOG_PULSES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MCP320X_READ_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.appendDummyInput("SELECTS").appendField("A/D chip read ").appendField(new Blockly.FieldDropdown([["MCP3002","02"],["MCP3004","04"],["MCP3008","08"],["MCP3202","22"],["MCP3204","24"],["MCP3208","28"],["ADC0831","81"]],function(a){this.sourceBlock_.updateShape_({CH_C:a})}),"CHIP").appendField("CLK").appendField(new Blockly.FieldDropdown(profile["default"].digital),
"CLK_PIN").appendField("DO").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DO_PIN").appendField("DI").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DI_PIN").appendField("CS").appendField(new Blockly.FieldDropdown(profile["default"].digital),"CS_PIN");this.appendDummyInput("CHANNELS").setAlign(Blockly.ALIGN_RIGHT).appendField("channel").appendField(new Blockly.FieldDropdown([["0","0"],["1","1"]]),"CHAN").appendField("in volt-100ths");this.setInputsInline(!1);
this.setOutput(!0,null)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("CHIP"),c=this.getFieldValue("CS_PIN"),d=this.getFieldValue("CLK_PIN"),e=this.getFieldValue("DO_PIN"),f=this.getFieldValue("DI_PIN");a.setAttribute("chip",b);a.setAttribute("cs_pin",c);a.setAttribute("ck_pin",d);a.setAttribute("do_pin",e);a.setAttribute("di_pin",f);return a},domToMutation:function(a){var b=a.getAttribute("chip"),c=a.getAttribute("cs_pin",d),d=a.getAttribute("ck_pin",c),
e=a.getAttribute("do_pin",e),f=a.getAttribute("di_pin",f);this.updateShape_({CH_C:b,CK:c,CS:d,DO:e,DI:f})},updateShape_:function(a){var b=a.CH_C;void 0===a.CH_C&&(b=this.getFieldValue("CH_C"));var c=a.CK;void 0===a.CK&&(c=this.getFieldValue("CLK_PIN"));var d=a.CS;void 0===a.CS&&(d=this.getFieldValue("CS_PIN"));var e=a.DO;void 0===a.DO&&(e=this.getFieldValue("DO_PIN"));var f=a.DI;void 0===a.DI&&(f=this.getFieldValue("DI_PIN"));a=[];for(var g=0;g<parseInt(b[1]);g++)a.push([g.toString(),g.toString()]);
this.getInput("CHANNELS")&&this.removeInput("CHANNELS");this.removeInput("SELECTS");"1"===b[1]?(this.appendDummyInput("SELECTS").appendField("A/D chip read").appendField(new Blockly.FieldDropdown([["MCP3002","02"],["MCP3004","04"],["MCP3008","08"],["MCP3202","22"],["MCP3204","24"],["MCP3208","28"],["ADC0831","81"]],function(a){this.sourceBlock_.updateShape_({CH_C:a})}),"CHIP").appendField("CLK").appendField(new Blockly.FieldDropdown(profile["default"].digital),"CLK_PIN").appendField("DO").appendField(new Blockly.FieldDropdown(profile["default"].digital),
"DO_PIN").appendField("CS").appendField(new Blockly.FieldDropdown(profile["default"].digital),"CS_PIN").appendField("in volt-100ths").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DI_PIN"),this.getField("DI_PIN").setVisible(!1)):(this.appendDummyInput("SELECTS").appendField("A/D chip read").appendField(new Blockly.FieldDropdown([["MCP3002","02"],["MCP3004","04"],["MCP3008","08"],["MCP3202","22"],["MCP3204","24"],["MCP3208","28"],["ADC0831","81"]],function(a){this.sourceBlock_.updateShape_({CH_C:a})}),
"CHIP").appendField("CLK").appendField(new Blockly.FieldDropdown(profile["default"].digital),"CLK_PIN").appendField("DO").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DO_PIN").appendField("DI").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DI_PIN").appendField("CS").appendField(new Blockly.FieldDropdown(profile["default"].digital),"CS_PIN"),this.appendDummyInput("CHANNELS").setAlign(Blockly.ALIGN_RIGHT).appendField("channel").appendField(new Blockly.FieldDropdown(a),
"CHAN").appendField("in volt-100ths"));this.setFieldValue(b,"CHIP");this.setFieldValue(c,"CLK_PIN");this.setFieldValue(d,"CS_PIN");this.setFieldValue(e,"DO_PIN");this.setFieldValue(f,"DI_PIN")}};
Blockly.propc.mcp320x_read=function(){var a=parseInt(this.getFieldValue("CHIP")[1]),b="1"+this.getFieldValue("CHIP")[0],c=this.getFieldValue("CS_PIN"),d=this.getFieldValue("CLK_PIN"),e=this.getFieldValue("DO_PIN"),f=this.getFieldValue("DI_PIN"),g="000"+parseInt(this.getFieldValue("CHAN")).toString(2);g=4>a?"11"+g.substr(g.length-1,g.length)+"1":"11"+g.substr(g.length-3,g.length)+"0";if(!this.disabled){Blockly.propc.global_vars_.adc_set_vref="int __Mvref = 330;";var h="";"18"===b&1===a?(Blockly.propc.methods_.adc083x_read=
"int read_adc0831(int __McsPin, int __MclkPin, int __MdoPin, int __MVr){low(__MclkPin);\nlow(__McsPin);\npulse_out(__MclkPin, 250);\nint __Mvolts = shift_in(__MdoPin, __MclkPin, MSBPOST, 8);\nhigh(__McsPin);\nreturn ((__Mvolts * __MVr) / 256);}",Blockly.propc.method_declarations_.adc083x_read="int read_adc0831(int __McsPin, int __MclkPin, int __MdoPin, int __MVr);\n",h+="read_adc083x("+c+", "+d+", "+e+", __Mvref)"):(Blockly.propc.methods_.mcp320x_read="int read_mcp320x(int __McsPin, int __MclkPin, int __MdoPin, int __MdiPin, int __Mbits, int __Mdata, int __MVr, int __Mres) {\n  high(__McsPin);  low(__MclkPin);  low(__McsPin);\n  shift_out(__MdiPin, __MclkPin, MSBFIRST, __Mbits, __Mdata);\n  int __Mvolts = shift_in(__MdoPin, __MclkPin, MSBPOST, __Mres);\n  high(__McsPin);  high(__MclkPin);\n  return ((__Mvolts * __MVr) / pow(2,__Mres));}",
Blockly.propc.method_declarations_.mcp320x_read="int read_mcp320x(int __McsPin, int __MclkPin, int __MdoPin, int __MdiPin, int __Mbits, int __Mdata, int __MVr, int __Mres);\n",h=h+("read_mcp320x("+c+", "+d+", "+e)+(", "+f+", "+g.length+", 0b"+g+", __Mvref, "+b+")"))}return[h,Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.mcp320x_set_vref={helpUrl:Blockly.MSG_ANALOG_PULSES_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MCP320X_SET_VREF_TOOLTIP);this.setColour(colorPalette.getColor("io"));this.appendDummyInput().appendField("A/D set Vref to").appendField(new Blockly.FieldTextInput("330",Blockly.FieldTextInput.numberValidator),"VREF").appendField("volt 100ths");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.mcp320x_set_vref=function(){return-1<Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("A/D chip read")?"__Mvref = "+parseInt(this.getFieldValue("VREF"))+";\n":""};Blockly.Blocks||(Blockly.Blocks={});
Blockly.Blocks.console_print={helpUrl:Blockly.MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CONSOLE_PRINT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("MESSAGE").setCheck("String").appendField("Terminal print text");this.appendDummyInput().appendField("then a new line").appendField(new Blockly.FieldCheckbox("FALSE"),"ck_nl");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.console_print=function(){var a=Blockly.propc.valueToCode(this,"MESSAGE",Blockly.propc.ORDER_ATOMIC),b=this.getFieldValue("ck_nl");Blockly.propc.serial_terminal_=!0;a="print("+a.replace(/%/g,"%%")+");\n";"TRUE"===b&&(a+='print("\\r");\n');return a};
Blockly.Blocks.console_print_variables={helpUrl:Blockly.MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CONSOLE_PRINT_VARIABLES_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("VALUE").appendField("Terminal print number").setCheck("Number");this.appendDummyInput().appendField("as").appendField(new Blockly.FieldDropdown([["Decimal","DEC"],["Hexadecimal","HEX"],["Binary","BIN"],["ASCII Character","CHAR"]]),"FORMAT");this.appendDummyInput().appendField("then a new line").appendField(new Blockly.FieldCheckbox("FALSE"),
"ck_nl");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.console_print_variables=function(){var a=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_ATOMIC),b=this.getFieldValue("FORMAT"),c=this.getFieldValue("ck_nl");Blockly.propc.serial_terminal_=!0;var d="print(";d="TRUE"!==c?"BIN"===b?d+'"%b"':"HEX"===b?d+'"%x"':"DEC"===b?d+'"%d"':d+'"%c"':"BIN"===b?d+'"%b\\r"':"HEX"===b?d+'"%x\\r"':"DEC"===b?d+'"%d\\r"':d+'"%c\\r"';return"CHAR"===b?d+(", ("+a+" & 0xFF));\n"):d+(", "+a+");\n")};
Blockly.Blocks.console_print_multiple={helpUrl:Blockly.MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CONSOLE_PRINT_MULTIPLE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Terminal print");this.appendValueInput("PRINT0").setAlign(Blockly.ALIGN_RIGHT).setCheck("String").appendField("text");this.appendValueInput("PRINT1").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("decimal number");this.appendDummyInput("NEWLINE").appendField("then a new line").appendField(new Blockly.FieldCheckbox("FALSE"),
"ck_nl");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setInputsInline(!1);this.setMutator(new Blockly.Mutator("console_print_str console_print_dec console_print_hex console_print_bin console_print_float console_print_char".split(" ")));this.optionList_=["str","dec"];this.specDigits_=!1;this.setWarningText(null)},mutationToDom:function(){var a=document.createElement("mutation"),b=[],c=[],d=[];a.setAttribute("options",JSON.stringify(this.optionList_));for(var e=0;e<this.optionList_.length;e++)b.push(this.getFieldValue("DIV"+
e)||"0"),c.push(this.getFieldValue("PLACE"+e)||""),d.push(this.getFieldValue("DIGIT"+e)||"");a.setAttribute("divisors",JSON.stringify(b));this.specDigits_&&(a.setAttribute("places",JSON.stringify(c)),a.setAttribute("digits",JSON.stringify(d)));return a},domToMutation:function(a){this.removeInput("PRINT0");this.removeInput("PRINT1");this.removeInput("NEWLINE");var b=JSON.parse(a.getAttribute("options")),c=JSON.parse(a.getAttribute("divisors"));this.optionList_=b;b=[];var d=[];this.specDigits_=!1;if(a.getAttribute("places")||
a.getAttribute("digits"))this.specDigits_=!0,b=JSON.parse(a.getAttribute("places")),d=JSON.parse(a.getAttribute("digits"));for(a=0;a<this.optionList_.length;a++){var e="decimal number",f="Number";"str"===this.optionList_[a]?(e="text",f="String"):"char"===this.optionList_[a]?e="ASCII character":"hex"===this.optionList_[a]?e="hexadecimal number":"bin"===this.optionList_[a]&&(e="binary number");"float"!==this.optionList_[a]||this.specDigits_?"float"===this.optionList_[a]&&this.specDigits_?(this.appendValueInput("PRINT"+
a).setAlign(Blockly.ALIGN_RIGHT).setCheck(f).appendField("float point  divide by","TYPE"+a).appendField(new Blockly.FieldDropdown([["1","1"],["10","10"],["100","100"],["1000","1000"],["10,000","10000"],["100,000","100000"],["1,000,000","1000000"]]),"DIV"+a).appendField("digits").appendField(new Blockly.FieldTextInput("",function(a){return(a=a.replace(/O/ig,"0").replace(/[^0-9]*/g,""))||""}),"DIGIT"+a).appendField("places").appendField(new Blockly.FieldTextInput("",function(a){return(a=a.replace(/O/ig,
"0").replace(/[^0-9]*/g,""))||""}),"PLACE"+a),this.setFieldValue(c[a]||"100","DIV"+a),this.setFieldValue(b[a]||"","PLACE"+a),this.setFieldValue(d[a]||"","DIGIT"+a)):!this.specDigits_||"hex"!==this.optionList_[a]&&"dec"!==this.optionList_[a]&&"bin"!==this.optionList_[a]?this.appendValueInput("PRINT"+a).setAlign(Blockly.ALIGN_RIGHT).setCheck(f).appendField(e,"TYPE"+a):(this.appendValueInput("PRINT"+a).setAlign(Blockly.ALIGN_RIGHT).setCheck(f).appendField(e,"TYPE"+a).appendField("digits").appendField(new Blockly.FieldTextInput("",
function(a){return(a=a.replace(/O/ig,"0").replace(/[^0-9]*/g,""))||""}),"DIGIT"+a),this.setFieldValue(d[a]||"","DIGIT"+a)):(this.appendValueInput("PRINT"+a).setAlign(Blockly.ALIGN_RIGHT).setCheck(f).appendField("float point  divide by","TYPE"+a).appendField(new Blockly.FieldDropdown([["1","1"],["10","10"],["100","100"],["1000","1000"],["10,000","10000"],["100,000","100000"],["1,000,000","1000000"]]),"DIV"+a),this.setFieldValue(c[a],"DIV"+a))}"console_print_multiple"===this.type&&this.appendDummyInput("NEWLINE").appendField("then a new line").appendField(new Blockly.FieldCheckbox("FALSE"),
"ck_nl")},decompose:function(a){var b=Blockly.Block.obtain(a,"console_print_container");"console_print_multiple"===this.type||"oled_print_multiple"===this.type||"debug_lcd_print_multiple"===this.type?(b.initSvg(),b.setFieldValue(this.specDigits_?"TRUE":"FALSE","PLACES")):(b=Blockly.Block.obtain(a,"serial_print_container"),b.initSvg());for(var c=b.getInput("STACK").connection,d=0;d<this.optionList_.length;d++){var e=a.newBlock("console_print_"+this.optionList_[d]);e.initSvg();c.connect(e.previousConnection);
c=e.nextConnection}return b},compose:function(a){for(var b=0,c=[],d=[],e=[];this.getInput("PRINT"+b);)c[b]=this.getFieldValue("DIGIT"+b),d[b]=this.getFieldValue("PLACE"+b),e[b]=this.getFieldValue("DIV"+b),this.removeInput("PRINT"+b),b++;var f=this.getFieldValue("ck_nl");this.removeInput("NEWLINE");b=0;this.optionList_.length=0;var g=a.getInputTargetBlock("STACK");this.specDigits_=!1;"TRUE"===a.getFieldValue("PLACES")&&(this.specDigits_=!0);for(var h=a="";g;)h="Number","console_print_dec"===g.type?
(this.optionList_.push("dec"),a="decimal number"):"console_print_hex"===g.type?(this.optionList_.push("hex"),a="hexadecimal number"):"console_print_bin"===g.type?(this.optionList_.push("bin"),a="binary number"):"console_print_char"===g.type?(this.optionList_.push("char"),a="ASCII character"):"console_print_str"===g.type&&(this.optionList_.push("str"),h="String",a="text"),"console_print_float"!==g.type||this.specDigits_?"console_print_float"===g.type&&this.specDigits_?(this.optionList_.push("float"),
h=this.appendValueInput("PRINT"+b).setAlign(Blockly.ALIGN_RIGHT).setCheck(h).appendField("float point  divide by","TYPE"+b).appendField(new Blockly.FieldDropdown([["1","1"],["10","10"],["100","100"],["1000","1000"],["10,000","10000"],["100,000","100000"],["1,000,000","1000000"]]),"DIV"+b).appendField("digits").appendField(new Blockly.FieldTextInput("",function(a){return(a=a.replace(/O/ig,"0").replace(/[^0-9]*/g,""))||""}),"DIGIT"+b).appendField("places").appendField(new Blockly.FieldTextInput("",
function(a){return(a=a.replace(/O/ig,"0").replace(/[^0-9]*/g,""))||""}),"PLACE"+b),this.setFieldValue(e[b]||"100","DIV"+b),this.setFieldValue(d[b]||"","PLACE"+b),this.setFieldValue(c[b]||"","DIGIT"+b)):!this.specDigits_||"hex"!==this.optionList_[b]&&"dec"!==this.optionList_[b]&&"bin"!==this.optionList_[b]?h=this.appendValueInput("PRINT"+b).setAlign(Blockly.ALIGN_RIGHT).setCheck(h).appendField(a,"TYPE"+b):(h=this.appendValueInput("PRINT"+b).setAlign(Blockly.ALIGN_RIGHT).setCheck(h).appendField(a,"TYPE"+
b).appendField("digits").appendField(new Blockly.FieldTextInput("",function(a){return(a=a.replace(/O/ig,"0").replace(/[^0-9]*/g,""))||""}),"DIGIT"+b),this.setFieldValue(c[b]||"","DIGIT"+b)):(this.optionList_.push("float"),h=this.appendValueInput("PRINT"+b).setAlign(Blockly.ALIGN_RIGHT).setCheck(h).appendField("float point  divide by","TYPE"+b).appendField(new Blockly.FieldDropdown([["1","1"],["10","10"],["100","100"],["1000","1000"],["10,000","10000"],["100,000","100000"],["1,000,000","1000000"]]),
"DIV"+b),this.setFieldValue(e[b]||"100","DIV"+b)),g.valueConnection_&&h.connection.connect(g.valueConnection_),b++,g=g.nextConnection&&g.nextConnection.targetBlock();"console_print_multiple"===this.type&&this.appendDummyInput("NEWLINE").appendField("then a new line").appendField(new Blockly.FieldCheckbox(f||"FALSE"),"ck_nl")},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("PRINT"+b);a.valueConnection_=c&&c.connection.targetConnection;a=a.nextConnection&&
a.nextConnection.targetBlock();b++}},onchange:function(){var a=null;this.workspace&&1>this.optionList_.length&&(a="Terminal print multiple must have at least one term.");this.setWarningText(a)}};
Blockly.Blocks.console_print_container={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("send");this.appendStatementInput("STACK");this.appendDummyInput().appendField("specify digits").appendField(new Blockly.FieldCheckbox("FALSE"),"PLACES");this.contextMenu=!1}};
Blockly.Blocks.serial_print_container={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("send");this.appendStatementInput("STACK");this.contextMenu=!1}};Blockly.Blocks.console_print_dec={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("decimal number");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.contextMenu=!1}};
Blockly.Blocks.console_print_hex={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("hexadecimal number");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.contextMenu=!1}};Blockly.Blocks.console_print_bin={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("binary number");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.contextMenu=!1}};
Blockly.Blocks.console_print_str={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("text");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.contextMenu=!1}};Blockly.Blocks.console_print_char={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("ASCII character");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.contextMenu=!1}};
Blockly.Blocks.console_print_float={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("floating point number");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.contextMenu=!1}};
Blockly.propc.console_print_multiple=function(){var a="",b=null,c="";switch(this.type){case "console_print_multiple":a+='print("';Blockly.propc.serial_terminal_=!0;break;case "serial_print_multiple":b="Serial initialize";c="// ERROR: Serial is not initialized!\n";var d="";0<this.ser_pins.length&&(d=this.ser_pins[0][0].replace(",","_"));this.getInput("SERPIN")&&(d=this.getFieldValue("SER_PIN").replace(",","_"));a+="dprint(fdser"+d+', "';break;case "debug_lcd_print_multiple":b="LCD initialize";c="// ERROR: LCD is not initialized!\n";
a+='dprint(debug_lcd, "';break;case "oled_print_multiple":b="OLED initialize";c="// ERROR: OLED is not initialized!\n";a+='oledc_print("';break;case "xbee_print_multiple":b="XBee initialize";c="// ERROR: XBEE is not initialized!\n";a+='dprint(xbee, "';break;case "wx_print_multiple":b="WX initialize";c="// ERROR: WX is not initialized!\n";d=Blockly.propc.variableDB_.getName(this.getFieldValue("HANDLE"),Blockly.Variables.NAME_TYPE);var e=this.getFieldValue("CONNECTION");a+="wifi_print("+e+", "+d+', "'}e=
d="";for(var f=0;this.getInput("PRINT"+f);){var g=this.getFieldValue("DIGIT"+f)||"";this.getFieldValue("PLACE"+f)&&""!==this.getFieldValue("PLACE"+f)&&(g+="."+this.getFieldValue("PLACE"+f));""!==g&&(g="0"+g);this.getFieldValue("TYPE"+f).includes("decimal number")?(a+="%"+g+"d",e="0"):this.getFieldValue("TYPE"+f).includes("hexadecimal number")?(a+="%"+g+"x",e="0x0"):this.getFieldValue("TYPE"+f).includes("binary number")?(a+="%"+g+"b",e="0b0"):this.getFieldValue("TYPE"+f).includes("text")?(a+="%s",
e='" "'):this.getFieldValue("TYPE"+f).includes("ASCII character")?(a+="%c",e="32"):this.getFieldValue("TYPE"+f).includes("float point  divide by")&&(a+="%"+g+"f",e="0");d=this.getFieldValue("TYPE"+f).includes("float point  divide by")?d+(", ((float) "+(Blockly.propc.valueToCode(this,"PRINT"+f,Blockly.propc.NONE)||e)+") / "+this.getFieldValue("DIV"+f)+".0"):d+(", "+(Blockly.propc.valueToCode(this,"PRINT"+f,Blockly.propc.NONE).replace("/%g","%%")||e));f++}"TRUE"===this.getFieldValue("ck_nl")&&(a+="\\r");
a+='"'+d+");\n";d=Blockly.getMainWorkspace().getAllBlocks().toString();b&&-1===d.indexOf(b)&&(a=c);"wx_print_multiple"===this.type&&-1<d.indexOf("Simple WX initialize")&&(a="// ERROR: You cannot use Advanced WX blocks with Simple WX blocks!");return a};
Blockly.Blocks.console_scan_text={helpUrl:Blockly.MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CONSOLE_SCAN_TEXT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Terminal receive text store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VALUE");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVarType:function(){return"String"},getVars:function(){return[this.getFieldValue("VALUE")]},
renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VALUE"))&&this.setFieldValue(b,"VALUE")}};Blockly.propc.console_scan_text=function(){var a=Blockly.propc.variableDB_.getName(this.getFieldValue("VALUE"),Blockly.Variables.NAME_TYPE);Blockly.propc.vartype_[a]="char *";Blockly.propc.serial_terminal_=!0;return""!==a?"getStr("+a+", 128);\n":""};
Blockly.Blocks.console_scan_number={helpUrl:Blockly.MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CONSOLE_SCAN_NUMBER_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Terminal receive").appendField(new Blockly.FieldDropdown([["number (32-bit integer)","NUMBER"],["byte (ASCII character)","BYTE"]]),"TYPE").appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VALUE");this.setInputsInline(!0);
this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVars:function(){return[this.getFieldValue("VALUE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VALUE"))&&this.setFieldValue(b,"VALUE")}};
Blockly.propc.console_scan_number=function(){var a=this.getFieldValue("TYPE"),b=Blockly.propc.variableDB_.getName(this.getFieldValue("VALUE"),Blockly.Variables.NAME_TYPE);Blockly.propc.serial_terminal_=!0;var c="";return""!==b?"NUMBER"===a?c+('scan("%d\\n", &'+b+");\n"):c+(b+" = getChar();\n"):""};
Blockly.Blocks.console_newline={helpUrl:Blockly.MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CONSOLE_NEWLINE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Terminal new line");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};Blockly.propc.console_newline=function(){Blockly.propc.serial_terminal_=!0;return"term_cmd(CR);\n"};
Blockly.Blocks.console_clear={helpUrl:Blockly.MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CONSOLE_CLEAR_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Terminal clear screen");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};Blockly.propc.console_clear=function(){Blockly.propc.serial_terminal_=!0;return"term_cmd(CLS);\n"};
Blockly.Blocks.console_move_to_position={helpUrl:Blockly.MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_CONSOLE_MOVE_TO_POSITION_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Terminal set cursor to row");this.appendValueInput("ROW").setCheck("Number");this.appendDummyInput().appendField("column");this.appendValueInput("COLUMN").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,
null)}};Blockly.propc.console_move_to_position=function(){Blockly.propc.serial_terminal_=!0;var a=Blockly.propc.valueToCode(this,"ROW",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"COLUMN",Blockly.propc.ORDER_NONE);0>Number(a)?a=0:255<Number(a)&&(a=255);0>Number(b)?b=0:255<Number(b)&&(b=255);return"term_cmd(CRSRXY, "+b+", "+a+");\n"};
Blockly.Blocks.serial_open={helpUrl:Blockly.MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SERIAL_OPEN_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Serial initialize RX").appendField(new Blockly.FieldDropdown(profile["default"].digital.concat([["None","None"]])),"RXPIN").appendField("TX").appendField(new Blockly.FieldDropdown(profile["default"].digital.concat([["None","None"]])),"TXPIN");this.appendDummyInput("BAUD_RATE").appendField("baud").appendField(new Blockly.FieldDropdown([["2400",
"2400"],["4800","4800"],["9600","9600"],["19200","19200"],["38400","38400"],["57600","57600"],["115200","115200"],["other","other"]],function(a){"other"===a&&(this.otherBaud=!0);this.sourceBlock_.setToOther(a)}),"BAUD");this.appendDummyInput("MODE").appendField("mode").appendField(new Blockly.FieldDropdown([["standard","standard"],["other","other"]],function(){this.sourceBlock_.setToMode()}),"TYPE");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.otherMode=
this.otherBaud=!1;this.serialPin=this.getFieldValue("RXPIN")+","+this.getFieldValue("TXPIN");this.onchange({oldXml:!0})},onchange:function(a){this.serialPin=this.getFieldValue("RXPIN")+","+this.getFieldValue("TXPIN");if(a.blockId===this.id||a.oldXml)for(var b=Blockly.getMainWorkspace().getAllBlocks(),c=0;c<b.length;c++){var d=b[c].serPins;d&&("RXPIN"===a.name?d.call(b[c],a.oldValue+","+this.getFieldValue("TXPIN"),a.newValue+","+this.getFieldValue("TXPIN")):"TXPIN"===a.name?d.call(b[c],this.getFieldValue("RXPIN")+
","+a.oldValue,this.getFieldValue("RXPIN")+","+a.newValue):a.oldXml&&d.call(b[c]))}},setToOther:function(a){if("other"===a||!0===this.otherBaud)a&&"other"!==a||(a="1200"),this.otherBaud=!0,this.removeInput("BAUD_RATE"),this.appendDummyInput("BAUD_RATE").appendField("baud").appendField(new Blockly.FieldTextInput(a,Blockly.FieldTextInput.numberValidator),"BAUD"),this.moveInputBefore("BAUD_RATE","MODE")},setToMode:function(a){a||(a=["FALSE","FALSE","FALSE","FALSE"]);this.removeInput("MODE");this.appendDummyInput("MODE").appendField("invert RX").appendField(new Blockly.FieldCheckbox(a[0]),
"ck_bit0").appendField("invert TX").appendField(new Blockly.FieldCheckbox(a[1]),"ck_bit1").appendField("open-drain").appendField(new Blockly.FieldCheckbox(a[2]),"ck_bit2").appendField("remove TX echo").appendField(new Blockly.FieldCheckbox(a[3]),"ck_bit3");this.otherMode=!0},mutationToDom:function(){if(this.otherBaud||this.otherMode){var a=document.createElement("mutation");a.setAttribute("baud",this.getFieldValue("BAUD")||"1200");for(var b=0;4>b;b++)a.setAttribute("ck_bit"+b.toString(10),this.getFieldValue("ck_bit"+
b.toString(10))||"FALSE");return a}},domToMutation:function(a){var b=a.getAttribute("baud");void 0!==b&&(this.otherBaud=!0,this.setToOther(b));b=["FALSE","FALSE","FALSE","FALSE"];for(var c=!1,d=0;4>d;d++)b[d]=a.getAttribute("ck_bit"+d.toString(10)),"TRUE"===b[d]&&(c=!0);c&&this.setToMode(b)}};
Blockly.propc.serial_open=function(){for(var a=this.getFieldValue("RXPIN").replace("None","-1"),b=this.getFieldValue("TXPIN").replace("None","-1"),c=this.getFieldValue("RXPIN").replace("None","N"),d=this.getFieldValue("TXPIN").replace("None","N"),e="0b",f=3;-1<f;f--)e+="TRUE"===(this.getFieldValue("ck_bit"+f.toString(10))||"FALSE")?"1":"0";f=this.getFieldValue("BAUD");this.disabled||(Blockly.propc.definitions_["include fdserial"]='#include "fdserial.h"',Blockly.propc.definitions_["var fdserial"+c+
"_"+d]="fdserial *fdser"+c+"_"+d+";",Blockly.propc.setups_["setup_fdserial"+c+"_"+d]="fdser"+c+"_"+d+" = fdserial_open("+a+", "+b+", "+e+", "+f+");");return""};
Blockly.Blocks.serial_send_text={helpUrl:Blockly.MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SERIAL_SEND_TEXT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Serial transmit").appendField(new Blockly.FieldDropdown([["text","TEXT"],["decimal number","INT"],["hexadecimal number","HEX"],["binary number","BIN"],["ASCII character","BYTE"]]),"TYPE");this.appendValueInput("VALUE");this.setInputsInline(!0);this.setPreviousStatement(!0,
"Block");this.setNextStatement(!0,null);this.setWarningText(null);this.stringTypeCheck();this.ser_pins=[];this.serPins()},mutationToDom:function(){var a=document.createElement("mutation");this.getInput("SERPIN")&&a.setAttribute("serpin",this.getFieldValue("SER_PIN"));a.setAttribute("pinmenu",JSON.stringify(this.ser_pins));return a},domToMutation:function(a){var b=a.getAttribute("serpin");this.ser_pins=JSON.parse(a.getAttribute("pinmenu"))||[["0,0","0,0"]];this.getInput("SERPIN")&&this.removeInput("SERPIN");
b&&(this.appendDummyInput("SERPIN").setAlign(Blockly.ALIGN_RIGHT).appendField("RXTX").appendField(new Blockly.FieldDropdown(this.ser_pins),"SER_PIN"),this.setFieldValue(b,"SER_PIN"))},serPins:function(a,b){var c="-1";0<this.ser_pins.length&&(c=this.ser_pins[0][0]);this.ser_pins.length=0;this.getInput("SERPIN")&&(c=this.getFieldValue("SER_PIN"));this.updateSerPin();this.getInput("SERPIN")&&this.removeInput("SERPIN");1<this.ser_pins.length&&(this.appendDummyInput("SERPIN").setAlign(Blockly.ALIGN_RIGHT).appendField("RXTX").appendField(new Blockly.FieldDropdown(this.ser_pins),
"SER_PIN"),this.getInput("PRINT0")?this.moveInputBefore("SERPIN","PRINT0"):this.getInput("OPTION0")&&this.moveInputBefore("SERPIN","OPTION0"),c===a||null===a?this.setFieldValue(b,"SER_PIN"):this.getInput("SERPIN")&&"-1"!==c&&this.setFieldValue(c,"SER_PIN"))},updateSerPin:function(){for(var a=Blockly.getMainWorkspace().getAllBlocks(),b=this.ser_pins.length=0;b<a.length;b++)if("serial_open"===a[b].type){var c=a[b].serialPin;c&&this.ser_pins.push([c,c])}this.ser_pins=uniq_fast(this.ser_pins)},onchange:function(a){-1===
Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Serial initialize")?this.setWarningText("WARNING: You must use a Serial\ninitialize block at the beginning of your program!"):this.setWarningText(null);this.stringTypeCheck&&this.stringTypeCheck()},stringTypeCheck:function(){var a="Number";"TEXT"===this.getFieldValue("TYPE")&&(a="String");this.getInput("VALUE").setCheck(a)}};
Blockly.propc.serial_send_text=function(){var a="";0<this.ser_pins.length&&(a=this.ser_pins[0][0].replace(",","_").replace(/None/g,"N"));this.getInput("SERPIN")&&(a=this.getFieldValue("SER_PIN").replace(",","_").replace(/None/g,"N"));if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Serial initialize"))return"// ERROR: Serial is not initialized!\n";var b=this.getFieldValue("TYPE"),c=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_ATOMIC)||"0";if("BYTE"===b)return"fdserial_txChar(fdser"+
a+", ("+c+" & 0xFF) );\n";if("INT"===b)return"dprint(fdser"+a+', "%d\\r", '+c+");\n";if("HEX"===b)return"dprint(fdser"+a+', "%x\\r", '+c+");\n";if("BIN"===b)return"dprint(fdser"+a+', "%b\\r", '+c+");\n";b="dprint(fdser"+a+', "%s\\r", '+c.replace(/%/g,"%%")+");\n";return b+("while(!fdserial_txEmpty(fdser"+a+"));\n")+"pause(5);\n"};
Blockly.Blocks.serial_receive_text={helpUrl:Blockly.MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SERIAL_RECEIVE_TEXT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Serial receive").appendField(new Blockly.FieldDropdown([["text","TEXT"],["decimal number","INT"],["hexadecimal number","HEX"],["binary number","BIN"],["ASCII character","BYTE"]]),"TYPE").appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"VALUE");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null);this.ser_pins=[];this.serPins()},mutationToDom:Blockly.Blocks.serial_send_text.mutationToDom,domToMutation:Blockly.Blocks.serial_send_text.domToMutation,serPins:Blockly.Blocks.serial_send_text.serPins,updateSerPin:Blockly.Blocks.serial_send_text.updateSerPin,getVarType:function(){if("TEXT"===this.getFieldValue("TYPE"))return"String"},getVars:function(){return[this.getFieldValue("VALUE")]},
renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VALUE"))&&this.setFieldValue(b,"VALUE")},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Serial initialize")?this.setWarningText("WARNING: You must use a Serial\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.serial_receive_text=function(){var a="";0<this.ser_pins.length&&(a=this.ser_pins[0][0].replace(",","_"));this.getInput("SERPIN")&&(a=this.getFieldValue("SER_PIN").replace(",","_"));if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Serial initialize"))return"// ERROR: Serial is not initialized!\n";var b=Blockly.propc.variableDB_.getName(this.getFieldValue("VALUE"),Blockly.Variables.NAME_TYPE),c=this.getFieldValue("TYPE");if("BYTE"===c)return b+" = fdserial_rxChar(fdser"+
a+");\n";if("INT"===c)return"dscan(fdser"+a+', "%d", &'+b+");\n";if("BIN"===c)return"dscan(fdser"+a+', "%b", &'+b+");\n";if("HEX"===c)return"dscan(fdser"+a+', "%x", &'+b+");\n";this.disabled||(Blockly.propc.global_vars_["ser_rx"+a]="int __iS"+a+";",Blockly.propc.vartype_[b]="char *");return"__iS"+a+" = 0;\nwhile(1) {"+("  "+b+"[__i"+a+"] = fdserial_rxChar(fdser"+a+");\n")+("  __i"+a+"++;\n")+("  if("+b+"[__i"+a+"] == 10 || "+b+"[__i")+(a+"] == 13 || "+b+"[__i"+a+"] == 0) break;}")+(b+"[__i"+a+"] = 0;\nfdserial_rxFlush(fdser"+
a+");\n")};
Blockly.Blocks.serial_print_multiple={helpUrl:Blockly.MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SERIAL_PRINT_MULTIPLE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Serial transmit");this.appendValueInput("PRINT0").setAlign(Blockly.ALIGN_RIGHT).setCheck("String").appendField("text");this.appendValueInput("PRINT1").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("decimal number");this.setPreviousStatement(!0,"Block");
this.setNextStatement(!0);this.setInputsInline(!1);this.setMutator(new Blockly.Mutator("console_print_str console_print_dec console_print_hex console_print_bin console_print_float console_print_char".split(" ")));this.optionList_=["str","dec"];this.setWarningText(null);this.ser_pins=[];this.serPins()},mutationToDom:function(){var a=document.createElement("mutation"),b=[];a.setAttribute("pinmenu",JSON.stringify(this.ser_pins));a.setAttribute("options",JSON.stringify(this.optionList_));for(var c=0;c<
this.optionList_.length;c++)b.push(this.getFieldValue("DIV"+c)||"0");a.setAttribute("divisors",JSON.stringify(b));this.getInput("SERPIN")&&a.setAttribute("serpin",this.getFieldValue("SER_PIN"));return a},domToMutation:function(a){this.removeInput("PRINT0");this.removeInput("PRINT1");this.removeInput("NEWLINE");var b=JSON.parse(a.getAttribute("options")),c=JSON.parse(a.getAttribute("divisors"));this.optionList_=b;for(b=0;b<this.optionList_.length;b++){var d="decimal number",e="Number";"str"===this.optionList_[b]?
(d="text",e="String"):"char"===this.optionList_[b]?d="ASCII character":"hex"===this.optionList_[b]?d="hexadecimal number":"bin"===this.optionList_[b]&&(d="binary number");"float"===this.optionList_[b]?(this.appendValueInput("PRINT"+b).setAlign(Blockly.ALIGN_RIGHT).setCheck(e).appendField("float point  divide by","TYPE"+b).appendField(new Blockly.FieldDropdown([["1","1"],["10","10"],["100","100"],["1000","1000"],["10,000","10000"],["100,000","100000"],["1,000,000","1000000"]]),"DIV"+b),this.setFieldValue(c[b],
"DIV"+b)):this.appendValueInput("PRINT"+b).setAlign(Blockly.ALIGN_RIGHT).setCheck(e).appendField(d,"TYPE"+b)}this.ser_pins=JSON.parse(a.getAttribute("pinmenu"))||[["0,0","0,0"]];a=a.getAttribute("serpin");this.getInput("SERPIN")&&this.removeInput("SERPIN");a&&(this.appendDummyInput("SERPIN").setAlign(Blockly.ALIGN_RIGHT).appendField("RXTX").appendField(new Blockly.FieldDropdown(this.ser_pins),"SER_PIN"),this.setFieldValue(a,"SER_PIN"),this.getInput("PRINT0")&&this.moveInputBefore("SERPIN","PRINT0"))},
decompose:Blockly.Blocks.console_print_multiple.decompose,compose:function(a){for(var b=0;this.getInput("PRINT"+b);)this.removeInput("PRINT"+b),b++;b=0;this.optionList_.length=0;a=a.getInputTargetBlock("STACK");for(var c="",d;a;)d="Number","console_print_dec"===a.type?(this.optionList_.push("dec"),c="decimal number"):"console_print_hex"===a.type?(this.optionList_.push("hex"),c="hexadecimal number"):"console_print_bin"===a.type?(this.optionList_.push("bin"),c="binary number"):"console_print_char"===
a.type?(this.optionList_.push("char"),c="ASCII character"):"console_print_str"===a.type&&(this.optionList_.push("str"),d="String",c="text"),"console_print_float"===a.type?(this.optionList_.push("float"),d=this.appendValueInput("PRINT"+b).setAlign(Blockly.ALIGN_RIGHT).setCheck(d).appendField("float point  divide by","TYPE"+b).appendField(new Blockly.FieldTextInput("100",Blockly.FieldTextInput.numberValidator),"DIV"+b)):d=this.appendValueInput("PRINT"+b).setAlign(Blockly.ALIGN_RIGHT).setCheck(d).appendField(c,
"TYPE"+b),a.valueConnection_&&d.connection.connect(a.valueConnection_),b++,a=a.nextConnection&&a.nextConnection.targetBlock()},serPins:Blockly.Blocks.serial_send_text.serPins,updateSerPin:Blockly.Blocks.serial_send_text.updateSerPin,saveConnections:Blockly.Blocks.console_print_multiple.saveConnections,onchange:function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Serial initialize"))this.setWarningText("WARNING: You must use a Serial\ninitialize block at the beginning of your program!");
else{var a=null;this.workspace&&1>this.optionList_.length&&(a="Serial transmit multiple must have at least one term.");this.setWarningText(a)}}};Blockly.propc.serial_print_multiple=Blockly.propc.console_print_multiple;
Blockly.Blocks.serial_scan_multiple={helpUrl:Blockly.MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SERIAL_SCAN_MULTIPLE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Serial receive");this.optionList_=["dec","char"];this.updateShape_();this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setMutator(new Blockly.Mutator(["console_print_dec","console_print_hex","console_print_bin","console_print_float","console_print_char"]));
this.setWarningText(null);this.ser_pins=[];this.serPins()},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("pinmenu",JSON.stringify(this.ser_pins));a.setAttribute("options",JSON.stringify(this.optionList_));this.getInput("SERPIN")&&a.setAttribute("serpin",this.getFieldValue("SER_PIN"));return a},domToMutation:function(a){this.optionList_=JSON.parse(a.getAttribute("options"));this.updateShape_();this.ser_pins=JSON.parse(a.getAttribute("pinmenu"))||[["0,0","0,0"]];a=
a.getAttribute("serpin");this.getInput("SERPIN")&&this.removeInput("SERPIN");a&&(this.appendDummyInput("SERPIN").setAlign(Blockly.ALIGN_RIGHT).appendField("RXTX").appendField(new Blockly.FieldDropdown(this.ser_pins),"SER_PIN"),this.setFieldValue(a,"SER_PIN"),this.getInput("OPTION0")&&this.moveInputBefore("SERPIN","OPTION0"))},decompose:function(a){var b=a.newBlock("serial_scan_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.optionList_.length;d++){var e=a.newBlock("console_print_"+
this.optionList_[d]);e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");this.optionList_.length=0;for(a=[];b;)this.optionList_.push(b.type.replace("console_print_","")),a.push([b.userData_,b.cpuData_]),b=b.nextConnection&&b.nextConnection.targetBlock();this.updateShape_();for(b=0;b<this.optionList_.length;b++)void 0!==a[b][0]&&this.setFieldValue(a[b][1],"CPU"+b)},serPins:Blockly.Blocks.serial_send_text.serPins,updateSerPin:Blockly.Blocks.serial_send_text.updateSerPin,
saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;)a.cpuData_=this.getFieldValue("CPU"+b)||Blockly.LANG_VARIABLES_GET_ITEM,b++,a.userData_=this.getFieldValue("CPU"+b),a=a.nextConnection&&a.nextConnection.targetBlock()},updateShape_:function(){for(var a=0;this.getInput("OPTION"+a);)this.removeInput("OPTION"+a),a++;for(a=0;a<this.optionList_.length;a++){var b=this.optionList_[a],c="store ASCII character in";"dec"===b?c="store decimal number in":"hex"===b?c="store hexadecimal number in":
"bin"===b&&(c="store binary number in");"float"===b?(this.appendDummyInput("OPTION"+a).appendField("store float point \u2715").appendField(new Blockly.FieldDropdown([["1","1"],["10","10"],["100","100"],["1000","1000"],["10,000","10000"],["100,000","100000"],["1,000,000","1000000"]]),"MULT"+a).appendField("in","TYPE"+a).appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"CPU"+a),this.setFieldValue("100","MULT"+a)):this.appendDummyInput("OPTION"+a).appendField(c,"TYPE"+a).appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"CPU"+a)}},onchange:function(){var a=null;-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Serial initialize")&&(a="WARNING: You must use a Serial\ninitialize block at the beginning of your program!");this.workspace&&1>this.optionList_.length&&(a="Serial recieve must have at least one search term.");this.setWarningText(a)},getVars:function(){for(var a=[],b=0;b<this.optionList_.length;b++)a.push(this.getFieldValue("CPU"+b));return a},renameVar:function(a,b){for(var c=0;c<this.optionList_.length;c++)Blockly.Names.equals(a,
this.getFieldValue("CPU"+c))&&this.setFieldValue(b,"CPU"+c)}};Blockly.Blocks.serial_scan_container={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("receive");this.appendStatementInput("STACK");this.contextMenu=!1}};
Blockly.propc.serial_scan_multiple=function(){var a="";0<this.ser_pins.length&&(a=this.ser_pins[0][0].replace(",","_"));this.getInput("SERPIN")&&(a=this.getFieldValue("SER_PIN").replace(",","_"));if(-1<Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Serial initialize")){a="dscan(fdser"+a+', "';for(var b="",c="",d=0;this.getFieldValue("CPU"+d);)this.getFieldValue("TYPE"+d).includes("decimal number")?a+="%d":this.getFieldValue("TYPE"+d).includes("store ASCII character in")?a+="%c":this.getFieldValue("TYPE"+
d).includes("store hexadecimal number in")?a+="%x":this.getFieldValue("TYPE"+d).includes("store binary number in")?a+="%b":"in"===this.getFieldValue("TYPE"+d)&&(a+="%f"),"in"===this.getFieldValue("TYPE"+d)?(b+=", &__fpBuf"+d,c+=Blockly.propc.variableDB_.getName(this.getFieldValue("CPU"+d),Blockly.Variables.NAME_TYPE),c+=" = (int) (__fpBuf"+d+" * "+this.getFieldValue("MULT"+d)+");\n",this.disabled||(Blockly.propc.global_vars_["floatPointScanBuffer"+d]="float __fpBuf"+d+";")):b+=", &"+Blockly.propc.variableDB_.getName(this.getFieldValue("CPU"+
d),Blockly.Variables.NAME_TYPE),d++;return a+('"'+b+");\n"+c)}return"// ERROR: Serial is not initialized!\n"};
Blockly.Blocks.serial_tx={helpUrl:Blockly.MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SERIAL_TX_TOOLTIP);this.setColour("#FF8800");this.appendDummyInput().appendField("Serial transmit").appendField(new Blockly.FieldDropdown([["number (32-bit integer)","INT"],["byte (ASCII character)","BYTE"]]),"TYPE");this.appendValueInput("VALUE").setCheck(null);this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText("WARNING: This block has been deprecated\nand may not work correctly!\nPlease use one of the blocks\navailable in the menu.")}};
Blockly.propc.serial_tx=function(){return"// ERROR: This block has been depricated, please use a different serial transmit block!\n"};
Blockly.Blocks.serial_rx={helpUrl:Blockly.MSG_PROTOCOLS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SERIAL_RX_TOOLTIP);this.setColour("#FF8800");this.appendDummyInput().appendField("Serial receive").appendField(new Blockly.FieldDropdown([["number (32-bit integer)","INT"],["byte (ASCII character)","BYTE"]]),"TYPE").appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VALUE");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,
null);this.setWarningText("WARNING: This block has been deprecated\nand may not work correctly!\nPlease use one of the blocks\navailable in the menu.")},getVars:function(){return[this.getFieldValue("VALUE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VALUE"))&&this.setFieldValue(b,"VALUE")}};Blockly.propc.serial_rx=function(){return"// ERROR: This block has been deprecated, please use a different serial receive block!\n"};
Blockly.Blocks.shift_in={helpUrl:Blockly.MSG_PROTOCOLS_HELPURL,init:function(){for(var a=[],b=2;33>b;b++)a.push([b.toString(10),b.toString(10)]);this.setTooltip(Blockly.MSG_SHIFT_IN_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("shift in").appendField(new Blockly.FieldDropdown(a),"BITS").appendField("bits").appendField(new Blockly.FieldDropdown([["MSB first","MSB"],["LSB first","LSB"]]),"MODE").appendField(new Blockly.FieldDropdown([["before clock",
"PRE"],["after clock","POST"]]),"ORDER").appendField("DATA").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DATA").appendField("CLK").appendField(new Blockly.FieldDropdown(profile["default"].digital),"CLK");this.setInputsInline(!0);this.setOutput(!0,"Number")}};
Blockly.propc.shift_in=function(){var a=this.getFieldValue("BITS"),b=this.getFieldValue("MODE"),c=this.getFieldValue("ORDER"),d=this.getFieldValue("DATA"),e=this.getFieldValue("CLK");return["shift_in("+d+", "+e+", "+b+c+", "+a+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.shift_out={helpUrl:Blockly.MSG_PROTOCOLS_HELPURL,init:function(){for(var a=[],b=2;33>b;b++)a.push([b.toString(10),b.toString(10)]);this.setTooltip(Blockly.MSG_SHIFT_OUT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("VALUE").setCheck("Number").appendField("shift out the").appendField(new Blockly.FieldDropdown(a),"BITS").appendField("lowest bits of");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["MSB first","MSBFIRST"],["LSB first",
"LSBFIRST"]]),"MODE").appendField("DATA").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DATA").appendField("CLK").appendField(new Blockly.FieldDropdown(profile["default"].digital),"CLK");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.shift_out=function(){var a=this.getFieldValue("BITS"),b=this.getFieldValue("MODE"),c=this.getFieldValue("DATA"),d=this.getFieldValue("CLK"),e=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_NONE)||"0";return"shift_out("+c+", "+d+", "+b+", "+a+", "+e+");\n"};
Blockly.Blocks.debug_lcd_init={helpUrl:Blockly.MSG_SERIAL_LCD_HELPURL,init:function(){this.setTooltip(Blockly.MSG_DEBUG_LCD_INIT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("LCD initialize PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN");this.appendDummyInput().appendField("baud").appendField(new Blockly.FieldDropdown([["2400","2400"],["9600","9600"],["19200","19200"]]),"BAUD");this.setInputsInline(!0);this.setPreviousStatement(!0,
"Block");this.setNextStatement(!0,null)}};Blockly.propc.debug_lcd_init=function(){if(!this.disabled){var a=this.getFieldValue("PIN"),b=this.getFieldValue("BAUD");Blockly.propc.setups_.setup_debug_lcd="serial *debug_lcd = serial_open("+a+", "+a+", 0, "+b+");\n"}return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Serial initialize")?"// ERROR: LCD is not initialized!\n":"writeChar(debug_lcd, 22);\npause(5);\n"};
Blockly.Blocks.debug_lcd_music_note={helpUrl:Blockly.MSG_SERIAL_LCD_HELPURL,init:function(){this.setTooltip(Blockly.MSG_DEBUG_LCD_MUSIC_NOTE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("LCD play note").appendField(new Blockly.FieldDropdown([["C","223"],["C#","224"],["D","225"],["D#","226"],["E","227"],["F","228"],["F#","229"],["G","230"],["G#","231"],["A","220"],["A#","221"],["B","222"],["no note (rest)","232"]]),"NOTE").appendField("octave").appendField(new Blockly.FieldDropdown([["3rd",
"215"],["4th","216"],["5th","217"],["6th","218"],["7th","219"]]),"OCTAVE").appendField("length").appendField(new Blockly.FieldDropdown([["whole (2 s)","214"],["half (1 s)","213"],["quarter (500 ms)","212"],["eigth (250 ms)","211"],["sixteenth (125 ms)","210"],["thirty-second (63 ms)","209"],["sixty-fourth (31 ms)","208"]]),"LENGTH");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize")?
this.setWarningText("WARNING: You must use an LCD\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.debug_lcd_music_note=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize"))return"// ERROR: LCD is not initialized!\n";var a=this.getFieldValue("NOTE"),b=this.getFieldValue("OCTAVE"),c=this.getFieldValue("LENGTH");return a=""+("writeChar(debug_lcd, "+b+");\n")+("writeChar(debug_lcd, "+c+");\n")+("writeChar(debug_lcd, "+a+");\n")};
Blockly.Blocks.debug_lcd_print={helpUrl:Blockly.MSG_SERIAL_LCD_HELPURL,init:function(){this.setTooltip(Blockly.MSG_DEBUG_LCD_PRINT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("MESSAGE").setCheck("String").appendField("LCD print text ");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize")?this.setWarningText("WARNING: You must use an LCD\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.debug_lcd_print=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize")?"// ERROR: LCD is not initialized!\n":"dprint(debug_lcd, "+Blockly.propc.valueToCode(this,"MESSAGE",Blockly.propc.ORDER_NONE).replace(/%/g,"%%")+");\n"};
Blockly.Blocks.debug_lcd_number={helpUrl:Blockly.MSG_SERIAL_LCD_HELPURL,init:function(){this.setTooltip(Blockly.MSG_DEBUG_LCD_NUMBER_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("VALUE").setCheck("Number").appendField("LCD print number");this.appendDummyInput().appendField("as").appendField(new Blockly.FieldDropdown([["Decimal","DEC"],["Hexadecimal","HEX"],["Binary","BIN"]]),"FORMAT");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,
null);this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize")?this.setWarningText("WARNING: You must use an LCD\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.debug_lcd_number=function(){var a="";if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize"))a+="// ERROR: LCD is not initialized!\n";else{var b=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_ATOMIC),c=this.getFieldValue("FORMAT");a+="dprint(debug_lcd, ";a=("BIN"===c?a+'"%b"':"HEX"===c?a+'"%x"':a+'"%d"')+(", "+b+");")}return a};
Blockly.Blocks.debug_lcd_action={helpUrl:Blockly.MSG_SERIAL_LCD_HELPURL,init:function(){this.setTooltip(Blockly.MSG_DEBUG_LCD_ACTION_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("LCD command").appendField(new Blockly.FieldDropdown([["clear screen","12"],["move cursor right","9"],["move cursor left","8"],["move cursor down","10"],["carriage return","13"],["backlight on","17"],["backlight off","18"],["display off","21"],["display on, cursor off","22"],
["display on, cursor off, blink","23"],["display on, cursor on","24"],["display on, cursor on, blink","25"]]),"ACTION");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize")?this.setWarningText("WARNING: You must use an LCD\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.debug_lcd_action=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize")?"// ERROR: LCD is not initialized!\n":""+("writeChar(debug_lcd, "+this.getFieldValue("ACTION")+");\n")+"pause(5);\n"};
Blockly.Blocks.debug_lcd_set_cursor={helpUrl:Blockly.MSG_SERIAL_LCD_HELPURL,init:function(){this.setTooltip(Blockly.MSG_DEBUG_LCD_SET_CURSOR_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("ROW").appendField("LCD set cursor row").setCheck("Number");this.appendValueInput("COLUMN").appendField("column").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){-1===
Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize")?this.setWarningText("WARNING: You must use an LCD\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.debug_lcd_set_cursor=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize"))return"// LCD: Serial is not initialized!\n";if(!this.disabled){var a=Blockly.propc.valueToCode(this,"ROW",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"COLUMN",Blockly.propc.ORDER_NONE);Blockly.propc.methods_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax) {if(__cVal < __cMin) __cVal = __cMin;\nif(__cVal > __cMax) __cVal = __cMax;\nreturn __cVal;\n}\n";
Blockly.propc.method_declarations_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax);\n"}return"writeChar(debug_lcd, (128 + (constrain("+a+", 0, 3) * 20) + constrain("+b+", 0, 19)));\n"};
Blockly.Blocks.debug_lcd_print_multiple={helpUrl:Blockly.MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_DEBUG_LCD_PRINT_MULTIPLE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("LCD print");this.appendValueInput("PRINT0").setAlign(Blockly.ALIGN_RIGHT).setCheck("String").appendField("text");this.appendValueInput("PRINT1").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("decimal number");this.setPreviousStatement(!0,"Block");
this.setNextStatement(!0);this.setInputsInline(!1);this.setMutator(new Blockly.Mutator("console_print_str console_print_dec console_print_hex console_print_bin console_print_float console_print_char".split(" ")));this.optionList_=["str","dec"];this.specDigits_=!1;this.setWarningText(null)},mutationToDom:Blockly.Blocks.console_print_multiple.mutationToDom,domToMutation:Blockly.Blocks.console_print_multiple.domToMutation,decompose:Blockly.Blocks.console_print_multiple.decompose,compose:Blockly.Blocks.console_print_multiple.compose,
saveConnections:Blockly.Blocks.console_print_multiple.saveConnections,onchange:function(){var a=null;this.workspace&&1>this.optionList_.length&&(a="LCD print multiple must have at least one term.");-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("LCD initialize")&&(a="WARNING: You must use an LCD\ninitialize block at the beginning of your program!");this.setWarningText(a)}};Blockly.propc.debug_lcd_print_multiple=Blockly.propc.console_print_multiple;
Blockly.Blocks.xbee_setup={helpUrl:Blockly.MSG_XBEE_HELPURL,init:function(){this.setTooltip(Blockly.MSG_XBEE_SETUP_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("XBee initialize DI").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DO_PIN").appendField("DO").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DI_PIN").appendField("baud").appendField(new Blockly.FieldDropdown([["9600","9600"],["2400","2400"],["4800",
"4800"],["19200","19200"],["57600","57600"],["115200","115200"]]),"BAUD");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.xbee_setup=function(){var a=this.getFieldValue("DO_PIN"),b=this.getFieldValue("DI_PIN"),c=this.getFieldValue("BAUD");this.disabled||(Blockly.propc.definitions_["include fdserial"]='#include "fdserial.h"',Blockly.propc.global_vars_.xbee="fdserial *xbee;",Blockly.propc.setups_.xbee="xbee = fdserial_open("+b+", "+a+", 0, "+c+");\n");return""};
Blockly.Blocks.xbee_transmit={helpUrl:Blockly.MSG_XBEE_HELPURL,init:function(){this.setTooltip(Blockly.MSG_XBEE_TRANSMIT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("XBee transmit").appendField(new Blockly.FieldDropdown([["text","TEXT"],["decimal number","INT"],["hexadecimal number","HEX"],["binary number","BIN"],["ASCII character","BYTE"]]),"TYPE");this.appendValueInput("VALUE").setCheck(null);this.setInputsInline(!0);this.setPreviousStatement(!0,
"Block");this.setNextStatement(!0,null);this.stringTypeCheck()},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("XBee initialize")?this.setWarningText("WARNING: You must use an XBee\ninitialize block at the beginning of your program!"):this.setWarningText(null);this.stringTypeCheck()},stringTypeCheck:function(){var a="Number";"TEXT"===this.getFieldValue("TYPE")&&(a="String");this.getInput("VALUE").setCheck(a)}};
Blockly.propc.xbee_transmit=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("XBee initialize"))return"// ERROR: XBee is not initialized!\n";var a=this.getFieldValue("TYPE"),b=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_ATOMIC)||"0";return"BYTE"===a?"fdserial_txChar(xbee, ("+b+" & 0xFF) );\n":"INT"===a?'dprint(xbee, "%d\\r", '+b+");\n":"HEX"===a?'dprint(xbee, "%x\\r", '+b+");\n":"BIN"===a?'dprint(xbee, "%b\\r", '+b+");\n":'dprint(xbee, "%s\\r", '+b.replace(/%/g,
"%%")+");\nwhile(!fdserial_txEmpty(xbee));\npause(5);\n"};
Blockly.Blocks.xbee_receive={helpUrl:Blockly.MSG_XBEE_HELPURL,init:function(){this.setTooltip(Blockly.MSG_XBEE_RECEIVE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("XBee receive").appendField(new Blockly.FieldDropdown([["text","TEXT"],["decimal number","INT"],["hexadecimal number","HEX"],["binary number","BIN"],["ASCII character","BYTE"]]),"TYPE").appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VALUE");
this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("XBee initialize")?this.setWarningText("WARNING: You must use an XBee\ninitialize block at the beginning of your program!"):this.setWarningText(null)},getVarType:function(){if("TEXT"===this.getFieldValue("TYPE"))return"String"},getVars:function(){return[this.getFieldValue("VALUE")]},renameVar:function(a,
b){Blockly.Names.equals(a,this.getFieldValue("VALUE"))&&this.setFieldValue(b,"VALUE")}};
Blockly.propc.xbee_receive=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("XBee initialize"))return"// ERROR: XBee is not initialized!\n";var a=Blockly.propc.variableDB_.getName(this.getFieldValue("VALUE"),Blockly.Variables.NAME_TYPE),b=this.getFieldValue("TYPE");if("BYTE"===b)return a+" = fdserial_rxChar(xbee);\n";if("INT"===b)return'dscan(xbee, "%d", &'+a+");\n";if("BIN"===b)return'dscan(xbee, "%b", &'+a+");\n";if("HEX"===b)return'dscan(xbee, "%x", &'+a+");\n";this.disabled||
(Blockly.propc.global_vars_.xbee_rx="int __XBidx;",Blockly.propc.vartype_[a]="char *");b="__XBidx = 0;\nwhile(1) {\n"+("  "+a+"[__XBidx] = fdserial_rxChar(xbee);\n")+("  if("+a+"[__XBidx] == 13 || "+a+"[__XBidx] == 10) break;\n")+"  __XBidx++;\n}\n";return b+(a+"[__XBidx] = 0;\nfdserial_rxFlush(xbee);\n")};
Blockly.Blocks.xbee_print_multiple={helpUrl:Blockly.MSG_XBEE_HELPURL,init:function(){this.setTooltip(Blockly.MSG_XBEE_PRINT_MULTIPLE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("XBee transmit");this.appendValueInput("PRINT0").setAlign(Blockly.ALIGN_RIGHT).setCheck("String").appendField("text");this.appendValueInput("PRINT1").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("decimal number");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);
this.setInputsInline(!1);this.setMutator(new Blockly.Mutator("console_print_str console_print_dec console_print_hex console_print_bin console_print_float console_print_char".split(" ")));this.optionList_=["str","dec"];this.setWarningText(null)},mutationToDom:Blockly.Blocks.console_print_multiple.mutationToDom,domToMutation:Blockly.Blocks.console_print_multiple.domToMutation,decompose:Blockly.Blocks.console_print_multiple.decompose,compose:Blockly.Blocks.console_print_multiple.compose,saveConnections:Blockly.Blocks.console_print_multiple.saveConnections,
onchange:function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("XBee initialize"))this.setWarningText("WARNING: You must use a XBee\ninitialize block at the beginning of your program!");else{var a=null;this.workspace&&1>this.optionList_.length&&(a="XBee transmit multiple must have at least one term.");this.setWarningText(a)}}};Blockly.propc.xbee_print_multiple=Blockly.propc.console_print_multiple;
Blockly.Blocks.xbee_scan_multiple={helpUrl:Blockly.MSG_XBEE_HELPURL,init:function(){this.setTooltip(Blockly.MSG_XBEE_SCAN_MULTIPLE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("XBee receive");this.optionList_=["dec","char"];this.updateShape_();this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setMutator(new Blockly.Mutator(["console_print_dec","console_print_hex","console_print_bin","console_print_float","console_print_char"]));
this.setWarningText(null);this.ser_pins=[]},mutationToDom:Blockly.Blocks.serial_scan_multiple.mutationToDom,domToMutation:Blockly.Blocks.serial_scan_multiple.domToMutation,decompose:Blockly.Blocks.serial_scan_multiple.decompose,compose:Blockly.Blocks.serial_scan_multiple.compose,saveConnections:Blockly.Blocks.serial_scan_multiple.saveConnections,updateShape_:Blockly.Blocks.serial_scan_multiple.updateShape_,updateSerPin:function(){},onchange:function(){var a=null;-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("XBee initialize")&&
(a="WARNING: You must use an XBee\ninitialize block at the beginning of your program!");this.workspace&&1>this.optionList_.length&&(a="XBee recieve must have at least one search term.");this.setWarningText(a)},getVars:function(){for(var a=[],b=0;b<this.optionList_.length;b++)a.push(this.getFieldValue("CPU"+b));return a},renameVar:function(a,b){for(var c=0;c<this.optionList_.length;c++)Blockly.Names.equals(a,this.getFieldValue("CPU"+c))&&this.setFieldValue(b,"CPU"+c)}};
Blockly.propc.xbee_scan_multiple=function(){if(-1<Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("XBee initialize")){for(var a='dprint(fdser, "',b="",c="",d=0;this.getFieldValue("CPU"+d);)this.getFieldValue("TYPE"+d).includes("decimal number")?a+="%d":this.getFieldValue("TYPE"+d).includes("store ASCII character in")?a+="%c":this.getFieldValue("TYPE"+d).includes("store hexadecimal number in")?a+="%x":this.getFieldValue("TYPE"+d).includes("store binary number in")?a+="%b":"in"===this.getFieldValue("TYPE"+
d)&&(a+="%f"),"in"===this.getFieldValue("TYPE"+d)?(b+=", &__fpBuf"+d,c+=Blockly.propc.variableDB_.getName(this.getFieldValue("CPU"+d),Blockly.Variables.NAME_TYPE),c+=" = (int) (__fpBuf"+d+" * "+this.getFieldValue("MULT"+d)+");\n",this.disabled||(Blockly.propc.global_vars_["floatPointScanBuffer"+d]="float __fpBuf"+d+";")):b+=", &"+Blockly.propc.variableDB_.getName(this.getFieldValue("CPU"+d),Blockly.Variables.NAME_TYPE),d++;return a+('"'+b+");\n"+c)}return"// ERROR: XBee is not initialized!\n"};
Blockly.Blocks.oled_initialize={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_INITIALIZE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("OLED initialize").appendField("DIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DIN").appendField("CLK").appendField(new Blockly.FieldDropdown(profile["default"].digital),"CLK").appendField("CS").appendField(new Blockly.FieldDropdown(profile["default"].digital),
"CS").appendField("D/C").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DC").appendField("RES").appendField(new Blockly.FieldDropdown(profile["default"].digital),"RES");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.oled_initialize=function(){if(!this.disbled){var a=this.getFieldValue("CS"),b=this.getFieldValue("DC"),c=this.getFieldValue("DIN"),d=this.getFieldValue("CLK"),e=this.getFieldValue("RES");Blockly.propc.definitions_.oledtools='#include "oledc.h"';Blockly.propc.setups_.oled="oledc_init("+c+", "+d+", "+a+", "+b+", "+e+", 2);"}return""};
Blockly.Blocks.oled_font_loader={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_FONT_LOADER_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("OLED font loader (EEPROM only)")}};Blockly.propc.oled_font_loader=function(){Blockly.propc.serial_terminal_=!0;Blockly.propc.definitions_.oledfonts='#include "oledc_fontLoader.h"';return"oledc_fontLoader();"};
Blockly.Blocks.oled_clear_screen={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_CLEAR_SCREEN_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("OLED command").appendField(new Blockly.FieldDropdown([["clear screen","CLS"],["sleep","SLEEP"],["wake","WAKE"],["invert","INV"]]),"CMD");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){-1===
Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?this.setWarningText("WARNING: You must use an OLED\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.oled_clear_screen=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize"))return"// ERROR: OLED is not initialized!\n";var a=this.getFieldValue("CMD"),b="";"CLS"===a?b+="oledc_clear(0, 0, oledc_getWidth(), oledc_getHeight() );\n":"WAKE"===a?b+="oledc_wake();\n":"SLEEP"===a?b+="oledc_sleep();\n":"INV"===a&&(b+="oledc_invertDisplay();\n");return b};
Blockly.Blocks.oled_draw_circle={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_DRAW_CIRCLE_TOOLTIP);this.appendValueInput("POINT_X").setCheck("Number").appendField("OLED draw circle at (x)");this.appendValueInput("POINT_Y").setCheck(null).setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");this.appendValueInput("RADIUS").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("radius");this.appendValueInput("COLOR").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("color");
this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("fill").appendField(new Blockly.FieldCheckbox("TRUE"),"ck_fill");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("protocols"));this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?this.setWarningText("WARNING: You must use an OLED\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};
Blockly.propc.oled_draw_circle=function(){this.disabled||(Blockly.propc.definitions_.colormath='#include "colormath.h"');if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize"))return"// ERROR: OLED is not initialized!\n";var a=Blockly.propc.valueToCode(this,"POINT_X",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"POINT_Y",Blockly.propc.ORDER_NONE),c=Blockly.propc.valueToCode(this,"RADIUS",Blockly.propc.ORDER_NONE),d=Blockly.propc.valueToCode(this,"COLOR",
Blockly.propc.ORDER_NONE);var e="TRUE"===this.getFieldValue("ck_fill")?"oledc_fillCircle(":"oledc_drawCircle(";e=e+(a+", "+b+", ")+(c+", ")+("oledc_color565(get8bitColor("+d+', "RED"), get8bitColor('+d+', "GREEN"), get8bitColor('+d+', "BLUE")) ');return e+=");"};
Blockly.Blocks.oled_draw_line={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_DRAW_LINE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("X_ONE").setCheck("Number").appendField("OLED draw line from 1 (x)");this.appendValueInput("Y_ONE").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");this.appendValueInput("X_TWO").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("to 2 (x)");this.appendValueInput("Y_TWO").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");
this.appendValueInput("COLOR").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("color");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?this.setWarningText("WARNING: You must use an OLED\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.oled_draw_line=function(){this.disabled||(Blockly.propc.definitions_.colormath='#include "colormath.h"');if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize"))return"// ERROR: OLED is not initialized!\n";var a=Blockly.propc.valueToCode(this,"X_ONE",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"Y_ONE",Blockly.propc.ORDER_NONE),c=Blockly.propc.valueToCode(this,"X_TWO",Blockly.propc.ORDER_NONE),d=Blockly.propc.valueToCode(this,"Y_TWO",Blockly.propc.ORDER_NONE),
e=Blockly.propc.valueToCode(this,"COLOR",Blockly.propc.ORDER_NONE);return""+("oledc_drawLine("+a+", "+b+", "+c+", "+d+", ")+("oledc_color565(get8bitColor("+e+', "RED"), get8bitColor('+e+', "GREEN"), get8bitColor('+e+', "BLUE")));')};
Blockly.Blocks.oled_draw_pixel={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_DRAW_PIXEL_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("X_AXIS").setCheck("Number").appendField("OLED draw pixel at");this.appendValueInput("Y_AXIS").setCheck("Number").appendField(",");this.appendValueInput("COLOR").setCheck("Number").appendField("color");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);
this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?this.setWarningText("WARNING: You must use an OLED\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.oled_draw_pixel=function(){this.disabled||(Blockly.propc.definitions_.colormath='#include "colormath.h"');if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize"))return"// ERROR: OLED is not initialized!\n";var a=Blockly.propc.valueToCode(this,"X_AXIS",Blockly.propc.ORDER_ATOMIC),b=Blockly.propc.valueToCode(this,"Y_AXIS",Blockly.propc.ORDER_ATOMIC),c=Blockly.propc.valueToCode(this,"COLOR",Blockly.propc.ORDER_NONE);return""+("oledc_drawPixel("+a+", "+b+
", ")+("oledc_color565(get8bitColor("+c+', "RED"), get8bitColor('+c+', "GREEN"), get8bitColor('+c+', "BLUE")));')};
Blockly.Blocks.oled_draw_triangle={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_DRAW_TRIANGLE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("POINT_X0").setCheck("Number").appendField("OLED draw triangle at 1 (x)");this.appendValueInput("POINT_Y0").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");this.appendValueInput("POINT_X1").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("2 (x)");this.appendValueInput("POINT_Y1").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");
this.appendValueInput("POINT_X2").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("3 (x)");this.appendValueInput("POINT_Y2").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");this.appendValueInput("COLOR").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("color");this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("fill").appendField(new Blockly.FieldCheckbox("TRUE"),"ck_fill");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");
this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?this.setWarningText("WARNING: You must use an OLED\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.oled_draw_triangle=function(){this.disabled||(Blockly.propc.definitions_.colormath='#include "colormath.h"');if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize"))return"// ERROR: OLED is not initialized!\n";var a=Blockly.propc.valueToCode(this,"POINT_X0",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"POINT_Y0",Blockly.propc.ORDER_NONE),c=Blockly.propc.valueToCode(this,"POINT_X1",Blockly.propc.ORDER_NONE),d=Blockly.propc.valueToCode(this,
"POINT_Y1",Blockly.propc.ORDER_NONE),e=Blockly.propc.valueToCode(this,"POINT_X2",Blockly.propc.ORDER_NONE),f=Blockly.propc.valueToCode(this,"POINT_Y2",Blockly.propc.ORDER_NONE),g=Blockly.propc.valueToCode(this,"COLOR",Blockly.propc.ORDER_NONE);var h="TRUE"===this.getFieldValue("ck_fill")?"oledc_fillTriangle(":"oledc_drawTriangle(";h=h+(a+", "+b+", ")+(c+", "+d+", ")+(e+", "+f+", ");return h+="oledc_color565(get8bitColor("+g+', "RED"), get8bitColor('+g+', "GREEN"), get8bitColor('+g+', "BLUE")));'};
Blockly.Blocks.oled_draw_rectangle={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_DRAW_RECTANGLE_TOOLTIP);this.appendValueInput("POINT_X").setCheck("Number").appendField("OLED draw rectangle at (x)");this.appendValueInput("POINT_Y").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");this.appendValueInput("RECT_WIDTH").setCheck(null).setAlign(Blockly.ALIGN_RIGHT).appendField("width");this.appendValueInput("RECT_HEIGHT").setCheck(null).setAlign(Blockly.ALIGN_RIGHT).appendField("height");
this.appendValueInput("RECT_ROUND").setCheck(null).setAlign(Blockly.ALIGN_RIGHT).appendField("roundness");this.appendValueInput("COLOR").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("color");this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("fill").appendField(new Blockly.FieldCheckbox("TRUE"),"ck_fill");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("protocols"));this.setWarningText(null)},
onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?this.setWarningText("WARNING: You must use an OLED\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.oled_draw_rectangle=function(){this.disabled||(Blockly.propc.definitions_.colormath='#include "colormath.h"');if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize"))return"// ERROR: OLED is not initialized!\n";var a=Blockly.propc.valueToCode(this,"POINT_X",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"POINT_Y",Blockly.propc.ORDER_NONE),c=Blockly.propc.valueToCode(this,"RECT_WIDTH",Blockly.propc.ORDER_NONE),d=Blockly.propc.valueToCode(this,
"RECT_HEIGHT",Blockly.propc.ORDER_NONE),e=Blockly.propc.valueToCode(this,"RECT_ROUND",Blockly.propc.ORDER_NONE),f=Blockly.propc.valueToCode(this,"COLOR",Blockly.propc.ORDER_NONE),g=this.getFieldValue("ck_fill");a="0"===e?("TRUE"===g?"oledc_fillRect(":"oledc_drawRect(")+(a+", "+b+", "+c+", "+d+", "):("TRUE"===g?"oledc_fillRoundRect(":"oledc_drawRoundRect(")+(a+", "+b+", "+c+", "+d+", "+e+", ");return a+("oledc_color565(get8bitColor("+f+', "RED"), get8bitColor('+f+', "GREEN"), get8bitColor('+f+', "BLUE")));\n')};
Blockly.Blocks.oled_text_size={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_TEXT_SIZE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("OLED text size").appendField(new Blockly.FieldDropdown([["small","SMALL"],["medium","MEDIUM"],["large","LARGE"]]),"size_select").appendField("font").appendField(new Blockly.FieldDropdown([["sans","FONT_SANS"],["serif","FONT_SERIF"],["script","FONT_SCRIPT"],["bubble","FONT_BUBBLE"]]),
"font_select");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?this.setWarningText("WARNING: You must use an OLED\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.oled_text_size=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize"))return"// ERROR: OLED is not initialized!\n";var a=this.getFieldValue("size_select"),b=this.getFieldValue("font_select");return""+("oledc_setTextSize("+a+");\n")+("oledc_setTextFont("+b+");\n")};
Blockly.Blocks.oled_text_color={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_TEXT_COLOR_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("FONT_COLOR").setCheck("Number").appendField("OLED font color");this.appendValueInput("BACKGROUND_COLOR").setCheck("Number").appendField("font background color");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?
this.setWarningText("WARNING: You must use an OLED\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.oled_text_color=function(){this.disabled||(Blockly.propc.definitions_.colormath='#include "colormath.h"');if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize"))return"// ERROR: OLED is not initialized!\n";var a=Blockly.propc.valueToCode(this,"FONT_COLOR",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"BACKGROUND_COLOR",Blockly.propc.ORDER_NONE);return"oledc_setTextColor("+("oledc_color565(get8bitColor("+a+', "RED"), get8bitColor('+a+', "GREEN"), get8bitColor('+
a+', "BLUE")), ')+("oledc_color565(get8bitColor("+b+', "RED"), get8bitColor('+b+', "GREEN"), get8bitColor('+b+', "BLUE")));')};Blockly.Blocks.oled_get_max_height={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_GET_MAX_HEIGHT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("OLED max height");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number")}};
Blockly.propc.oled_get_max_height=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?["0",Blockly.propc.ORDER_NONE]:["oledc_getHeight()",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.oled_get_max_width={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_GET_MAX_WIDTH_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("OLED max width");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number")}};
Blockly.propc.oled_get_max_width=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?["0",Blockly.propc.ORDER_NONE]:["oledc_getWidth()",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.oled_set_cursor={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_SET_CURSOR_TOOLTIP);this.appendValueInput("X_POS").setCheck("Number").appendField("OLED set cursor at (x)");this.appendValueInput("Y_POS").setCheck("Number").appendField("(y)");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("protocols"));this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?
this.setWarningText("WARNING: You must use an OLED\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};Blockly.propc.oled_set_cursor=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize"))return"// ERROR: OLED is not initialized!\n";var a=Blockly.propc.valueToCode(this,"X_POS",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"Y_POS",Blockly.propc.ORDER_NONE);return"oledc_setCursor("+a+", "+b+",0);"};
Blockly.Blocks.oled_print_text={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_PRINT_TEXT_TOOLTIP);this.appendValueInput("MESSAGE").setCheck("String").appendField("OLED print text ");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("protocols"));this.setWarningText(null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?this.setWarningText("WARNING: You must use an OLED\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.oled_print_text=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?"// ERROR: OLED is not initialized!\n":"oledc_drawText("+Blockly.propc.valueToCode(this,"MESSAGE",Blockly.propc.ORDER_NONE)+");"};
Blockly.Blocks.oled_print_number={helpUrl:Blockly.MSG_OLED_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_PRINT_NUMBER_TOOLTIP);this.appendValueInput("NUMIN").setCheck("Number").appendField("OLED print number ");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["Decimal","DEC"],["Hexadecimal","HEX"],["Binary","BIN"]]),"type");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("protocols"));this.setWarningText(null)},
onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")?this.setWarningText("WARNING: You must use an OLED\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.oled_print_number=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize"))return"// ERROR: OLED is not initialized!\n";var a=Blockly.propc.valueToCode(this,"NUMIN",Blockly.propc.ORDER_NONE),b=this.getFieldValue("type");return"oledc_drawNumber("+a+", "+b+");"};
Blockly.Blocks.oled_print_multiple={helpUrl:Blockly.MSG_TERMINAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_OLED_PRINT_MULTIPLE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("OLED print");this.appendValueInput("PRINT0").setAlign(Blockly.ALIGN_RIGHT).setCheck("String").appendField("text");this.appendValueInput("PRINT1").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("decimal number");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);
this.setInputsInline(!1);this.setMutator(new Blockly.Mutator("console_print_str console_print_dec console_print_hex console_print_bin console_print_float console_print_char".split(" ")));this.optionList_=["str","dec"];this.specDigits_=!1;this.setWarningText(null)},mutationToDom:Blockly.Blocks.console_print_multiple.mutationToDom,domToMutation:Blockly.Blocks.console_print_multiple.domToMutation,decompose:Blockly.Blocks.console_print_multiple.decompose,compose:Blockly.Blocks.console_print_multiple.compose,
saveConnections:Blockly.Blocks.console_print_multiple.saveConnections,onchange:function(){var a=null;this.workspace&&1>this.optionList_.length&&(a="OLED print multiple must have at least one term.");-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("OLED initialize")&&(a="WARNING: You must use an OLED\ninitialize block at the beginning of your program!");this.setWarningText(a)}};Blockly.propc.oled_print_multiple=Blockly.propc.console_print_multiple;
Blockly.Blocks.ws2812b_init={helpUrl:Blockly.MSG_WS2812B_HELPURL,init:function(){this.setTooltip(Blockly.MSG_WS2812B_INIT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("RGB-LED initialize PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital,function(a){this.sourceBlock_.onPinSet(a)}),"PIN").appendField("number of LEDs").appendField(new Blockly.FieldTextInput("4",Blockly.FieldTextInput.numberValidator),"LEDNUM").appendField("type").appendField(new Blockly.FieldDropdown([["WS2812",
"WS2812"]]),"TYPE");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.rgbPin=this.getFieldValue("PIN");this.onPinSet()},onchange:function(a){this.rgbPin=this.getFieldValue("PIN");if(a.oldXml||a.xml)this.onPinSet(null)},onPinSet:function(a){var b=this.rgbPin;this.rgbPin=a;for(var c=Blockly.getMainWorkspace().getAllBlocks(),d=0;d<c.length;d++){var e=c[d].rgbPins,f=c[d].onchange;e&&a?(e.call(c[d],b,a),f&&f.call(c[d],{xml:!0})):e&&e.call(c[d])}}};
Blockly.propc.ws2812b_init=function(){if(!this.disabled){var a=this.getFieldValue("PIN"),b=window.parseInt(this.getFieldValue("LEDNUM"));1>b&&(b=1);1500<b&&(b=1500);Blockly.propc.definitions_.ws2812b_def='#include "ws2812.h"';Blockly.propc.definitions_["ws2812b_sets"+a]="#define LED_PIN"+a+"   "+a+"\n#define LED_COUNT"+a+"   "+b;Blockly.propc.global_vars_["ws2812b_array"+a]="ws2812 *ws2812b"+a+";\nint RGBleds"+a+"["+b+"];\n";Blockly.propc.setups_["ws2812b_init"+a]="ws2812b"+a+" = ws2812b_open();\n"}return""};
Blockly.Blocks.ws2812b_set={helpUrl:Blockly.MSG_WS2812B_HELPURL,init:function(){this.setTooltip(Blockly.MSG_WS2812B_SET_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("LED").setCheck("Number").appendField("RGB-LED set LED number");this.appendValueInput("COLOR").setCheck("Number").appendField("to color");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null);this.rgb_pins=[];this.warnFlag=0;this.rgbPins()},
mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("pinmenu",JSON.stringify(this.rgb_pins));this.getInput("RGBPIN")&&a.setAttribute("rgbpin",this.getFieldValue("RGB_PIN"));return a},domToMutation:function(a){var b=a.getAttribute("rgbpin");this.rgb_pins=JSON.parse(a.getAttribute("pinmenu"));"null"===b&&(b=null);this.getInput("RGBPIN")&&this.removeInput("RGBPIN");b&&(this.appendDummyInput("RGBPIN").appendField("PIN").appendField(new Blockly.FieldDropdown(this.rgb_pins),
"RGB_PIN"),this.setFieldValue(b,"RGB_PIN"))},rgbPins:function(a,b){var c="-1";0<this.rgb_pins.length&&(c=this.rgb_pins[0][0]);this.rgb_pins.length=0;this.getInput("RGBPIN")&&(c=this.getFieldValue("RGB_PIN"));this.updateRGBpin();this.getInput("RGBPIN")&&this.removeInput("RGBPIN");1<this.rgb_pins.length&&(this.appendDummyInput("RGBPIN").appendField("PIN").appendField(new Blockly.FieldDropdown(this.rgb_pins),"RGB_PIN"),c===a||null===a?this.setFieldValue(b,"RGB_PIN"):this.getInput("RGBPIN")&&"-1"!==c&&
this.setFieldValue(c,"RGB_PIN"))},updateRGBpin:function(){for(var a=Blockly.getMainWorkspace().getAllBlocks(),b=this.rgb_pins.length=0;b<a.length;b++)if("ws2812b_init"===a[b].type){var c=a[b].rgbPin||a[b].getFieldValue("PIN");c&&this.rgb_pins.push([c,c])}this.rgb_pins=uniq_fast(this.rgb_pins)},onchange:function(a){if(a.oldXml||a.type===Blockly.Events.CREATE||"RGB_PIN"===a.name&&a.blockId===this.id||0<this.warnFlag)if(a=Blockly.getMainWorkspace().getAllBlocks(),-1===a.toString().indexOf("RGB-LED initialize"))this.setWarningText("WARNING: You must use an RGB-LED\ninitialize block at the beginning of your program!");
else if(this.setWarningText(null),this.warnFlag--,this.getInput("RGBPIN")){for(var b="",c=0;c<a.length;c++)"ws2812b_init"===a[c].type&&(b+=(a[c].rgbPin||a[c].getFieldValue("PIN"))+",");-1===b.indexOf(this.getFieldValue("RGB_PIN"))&&(this.setWarningText("WARNING: You must use choose a new PIN for this block!"),this.warnFlag=3*a.length)}}};
Blockly.propc.ws2812b_set=function(){this.updateRGBpin();if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("RGB-LED initialize"))return"// ERROR: RGB-LED is not initialized!\n";var a=Blockly.propc.valueToCode(this,"LED",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"COLOR",Blockly.propc.ORDER_NONE);this.disabled||(Blockly.propc.methods_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax) {if(__cVal < __cMin) __cVal = __cMin;\nif(__cVal > __cMax) __cVal = __cMax;\nreturn __cVal;\n}\n",
Blockly.propc.method_declarations_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax);\n");var c="0";0<this.rgb_pins.length&&(c=this.rgb_pins[0][0]);this.getInput("RGBPIN")&&(c=this.getFieldValue("RGB_PIN"));return"RGBleds"+c+"[constrain("+a+", 1, LED_COUNT"+c+") - 1] = "+b+";\n"};
Blockly.Blocks.ws2812b_set_multiple={helpUrl:Blockly.MSG_WS2812B_HELPURL,init:function(){this.setTooltip(Blockly.MSG_WS2812B_MULTIPLE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("START").setCheck("Number").appendField("RGB-LED set LEDs from");this.appendValueInput("END").setCheck("Number").appendField("to");this.appendValueInput("COLOR").setCheck("Number").appendField("to color");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,
null);this.setWarningText(null);this.rgb_pins=[];this.rgbPins()},mutationToDom:Blockly.Blocks.ws2812b_set.mutationToDom,domToMutation:Blockly.Blocks.ws2812b_set.domToMutation,rgbPins:Blockly.Blocks.ws2812b_set.rgbPins,updateRGBpin:Blockly.Blocks.ws2812b_set.updateRGBpin,onchange:Blockly.Blocks.ws2812b_set.onchange};
Blockly.propc.ws2812b_set_multiple=function(){this.updateRGBpin();if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("RGB-LED initialize"))return"// ERROR: RGB-LED is not initialized!\n";var a=Blockly.propc.valueToCode(this,"START",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"END",Blockly.propc.ORDER_NONE),c=Blockly.propc.valueToCode(this,"COLOR",Blockly.propc.ORDER_NONE),d="0";0<this.rgb_pins.length&&(d=this.rgb_pins[0][0]);this.getInput("RGBPIN")&&(d=this.getFieldValue("RGB_PIN"));
this.disabled||(Blockly.propc.methods_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax) {if(__cVal < __cMin) __cVal = __cMin;\nif(__cVal > __cMax) __cVal = __cMax;\nreturn __cVal;\n}\n",Blockly.propc.method_declarations_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax);\n");return""+("for(int __ldx = "+a+"; __ldx <= "+b+"; __ldx++) {")+("RGBleds"+d+"[constrain(__ldx, 1, LED_COUNT"+d+") - 1] = "+c+";}")};
Blockly.Blocks.ws2812b_update={helpUrl:Blockly.MSG_WS2812B_HELPURL,init:function(){this.setTooltip(Blockly.MSG_WS2812B_UPDATE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("RGB-LED update LEDs");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null);this.rgb_pins=[];this.rgbPins()},mutationToDom:Blockly.Blocks.ws2812b_set.mutationToDom,domToMutation:Blockly.Blocks.ws2812b_set.domToMutation,
rgbPins:Blockly.Blocks.ws2812b_set.rgbPins,updateRGBpin:Blockly.Blocks.ws2812b_set.updateRGBpin,onchange:Blockly.Blocks.ws2812b_set.onchange};
Blockly.propc.ws2812b_update=function(){this.updateRGBpin();if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("RGB-LED initialize"))return"// ERROR: RGB-LED is not initialized!\n";var a="0";0<this.rgb_pins.length&&(a=this.rgb_pins[0][0]);this.getInput("RGBPIN")&&(a=this.getFieldValue("RGB_PIN"));return"ws2812_set(ws2812b"+a+", LED_PIN"+a+", RGBleds"+a+", LED_COUNT"+a+");\n"};
Blockly.Blocks.wx_init={helpUrl:Blockly.MSG_SWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SWX_INIT_TOOLTIP);(new Blockly.FieldColour("#FFFFFF")).setColours(["#FFFFFF","#000000"]).setColumns(2);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Simple WX initialize").appendField("mode").appendField(new Blockly.FieldDropdown([["Terminal on USB","USB_PGM_TERM"],["Terminal on WX","USB_PGM"],["Term & Programming on WX","WX_ALL_COM"]]),"MODE").appendField(" DI").appendField(new Blockly.FieldDropdown([["WX Socket",
"30"]].concat(profile["default"].digital),function(a){this.sourceBlock_.updateShape_({PIN:a})}),"DI");this.appendDummyInput("DOPIN").appendField("DO").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DO");this.getInput("DOPIN").setVisible(!1);this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("DI");a.setAttribute("pin",b);return a},domToMutation:function(a){a=
a.getAttribute("pin");this.updateShape_({PIN:a})},updateShape_:function(a){"30"===a.PIN?this.getInput("DOPIN").setVisible(!1):this.getInput("DOPIN").setVisible(!0)}};
Blockly.propc.wx_init=function(){if(!this.diabled){var a=this.getFieldValue("DO"),b=this.getFieldValue("DI");"30"===b&&(a="31");this.getFieldValue("BKG");this.getFieldValue("TITLE");var c=this.getFieldValue("MODE");a=""+("wifi_start("+a+", "+b+", 115200, "+c+");\n")+'wifi_setBuffer(__wxBffr, sizeof(__wxBffr));\n__wsId = wifi_listen(WS, "/ws/a");\n';a+="while(!__wsHandle) {\n  wifi_poll(&__wxEvent, &__wxId, &__wxHandle);\n";a+="  if(__wxEvent == 'W' && __wxId == __wsId)  __wsHandle = __wxHandle;\n}";
Blockly.propc.definitions_.wx_def='#include "wifi.h"';Blockly.propc.global_vars_.wx_vars="int __wxEvent, __wxId, __wxHandle, __wsId, __wv[15], __wsHandle = 0;\nchar __wxBffr[136];\n";Blockly.propc.setups_.wx_init=a}return""};
Blockly.Blocks.wx_config_page={helpUrl:Blockly.MSG_SWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SWX_CONFIG_PAGE_TOOLTIP);var a=new Blockly.FieldColour("#FFFFFF");a.setColours(["#FFFFFF","#000000"]).setColumns(2);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Simple WX configure page title").appendField(new Blockly.FieldTextInput("title"),"TITLE").appendField(" background color").appendField(a,"BKG");this.setInputsInline(!1);this.setPreviousStatement(!0,
"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("Simple WX initialize"))this.setWarningText("WARNING: You must use a Simple WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("WX ")&&(b="WARNING: You cannot use Simple WX and\nAdvanced WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_config_page=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Simple WX initialize"))return"// ERROR: Simple WX is not initialized!\n";var a="#FFFFFF"===this.getFieldValue("BKG")?"1":"0",b=this.getFieldValue("TITLE");return'wifi_print(WS, __wsHandle, "S,'+a+","+b+'");\n'};
Blockly.Blocks.wx_set_widget={helpUrl:Blockly.MSG_SWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SWX_SET_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput("SET_1").appendField("Simple WX configure widget").appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"]]),"WIDGET").appendField("to a").appendField(new Blockly.FieldDropdown([["Button \u2794","0"],
["Switch \u2794","1"],["Slider \u2794","2"],["Send Value \u2794","3"],["Pick Color \u2794","4"],["\u2794 Show Value","5"],["\u2794 Gauge","6"],["\u2794 Bar Graph","7"],["\u2794 Show Color","8"],["\u2794 Light Bulb","9"],["Clear Widget","10"]],function(a){this.sourceBlock_.updateShape_({TYPE:a})}),"TYPE").appendField(" label").appendField(new Blockly.FieldTextInput("label"),"LABEL");this.appendDummyInput("SET_2").appendField("widget color").appendField(new Blockly.FieldColour("#ffffff"),"COLOR").appendField(" minimum").appendField(new Blockly.FieldTextInput("0",
Blockly.FieldTextInput.numberValidator),"MIN").appendField(" maximum").appendField(new Blockly.FieldTextInput("10",Blockly.FieldTextInput.numberValidator),"MAX").appendField(" initial value").appendField(new Blockly.FieldTextInput("5",Blockly.FieldTextInput.numberValidator),"INITIAL");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("Simple WX initialize"))this.setWarningText("WARNING: You must use a Simple WX\ninitialize block at the beginning of your program!");
else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("WX ")&&(b="WARNING: You cannot use Simple WX and\nAdvanced WX blocks together in your project!");this.setWarningText(b)}},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("TYPE");a.setAttribute("w_type",b);b=this.getFieldValue("COLOR");a.setAttribute("w_color",b);b=this.getFieldValue("MIN");a.setAttribute("w_min",b);b=this.getFieldValue("MAX");a.setAttribute("w_max",b);b=this.getFieldValue("INITIAL");
a.setAttribute("w_init",b);return a},domToMutation:function(a){var b=a.getAttribute("w_type"),c=a.getAttribute("w_color"),d=a.getAttribute("w_min"),e=a.getAttribute("w_max");a=a.getAttribute("w_init");this.updateShape_({TYPE:b,COLOR:c,MIN:d,MAX:e,INITIAL:a})},updateShape_:function(a){var b=a.TYPE;void 0===a.TYPE&&(b=this.getFieldValue("TYPE"));var c=a.MIN;void 0===a.MIN&&(c=this.getFieldValue("MIN"));var d=a.MAX;void 0===a.MAX&&(d=this.getFieldValue("MAX"));var e=a.COLOR;void 0===a.COLOR&&(e=this.getFieldValue("COLOR"));
var f=a.INITIAL;void 0===a.INITIAL&&(f=this.getFieldValue("INITIAL"));void 0!==this.getInput("SET_2")&&this.removeInput("SET_2");if("10"!==b){this.appendDummyInput("SET_2");var g=this.getInput("SET_2")}"2"===b||"6"===b||"7"===b?g.appendField("widget color").appendField(new Blockly.FieldColour("#ffffff"),"COLOR").appendField(" minimum").appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"MIN").appendField(" maximum").appendField(new Blockly.FieldTextInput("10",Blockly.FieldTextInput.numberValidator),
"MAX").appendField(" initial value").appendField(new Blockly.FieldTextInput("5",Blockly.FieldTextInput.numberValidator),"INITIAL"):"1"===b?g.appendField("widget color").appendField(new Blockly.FieldColour("#ffffff"),"COLOR").appendField(" off value").appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"MIN").appendField(" on value").appendField(new Blockly.FieldTextInput("10",Blockly.FieldTextInput.numberValidator),"MAX").appendField(" initial state").appendField(new Blockly.FieldDropdown([["on",
"on"],["off","off"]]),"INITIAL"):"0"===b||"5"===b||"9"===b?g.appendField("widget color").appendField(new Blockly.FieldColour("#ffffff"),"COLOR").appendField(" initial value").appendField(new Blockly.FieldTextInput("5",Blockly.FieldTextInput.numberValidator),"INITIAL"):"8"===b?g.appendField("widget color").appendField(new Blockly.FieldColour("#ffffff"),"COLOR").appendField(" initial color shown").appendField(new Blockly.FieldColour("#ffffff"),"INITIAL"):("3"===b||"4"===b)&&g.appendField("widget color").appendField(new Blockly.FieldColour("#ffffff"),
"COLOR");this.getField("TYPE")&&null!==b&&this.setFieldValue(b,"TYPE");this.getField("MIN")&&null!==c&&this.setFieldValue(c,"MIN");this.getField("MAX")&&null!==d&&this.setFieldValue(d,"MAX");this.getField("COLOR")&&null!==e&&this.setFieldValue(e,"COLOR");this.getField("INITIAL")&&null!==f&&(this.setFieldValue(f,"INITIAL"),"1"===b&&f===c&&this.setFieldValue("off","INITIAL"),"1"===b&&f===d&&this.setFieldValue("on","INITIAL"))}};
Blockly.propc.wx_set_widget=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Simple WX initialize"))return"// ERROR: Simple WX is not initialized!\n";var a=this.getFieldValue("WIDGET"),b=this.getFieldValue("LABEL"),c=this.getFieldValue("TYPE"),d=this.getFieldValue("COLOR").substr(1).toUpperCase(),e=window.parseInt(this.getFieldValue("MIN")||"0"),f=window.parseInt(this.getFieldValue("MAX")||"10");var g="8"===c?window.parseInt((this.getFieldValue("INITIAL")||"#FFFFFF").substr(1),
16).toString(10):"on"===this.getFieldValue("INITIAL")?f:"off"===this.getFieldValue("INITIAL")?e:window.parseInt(this.getFieldValue("INITIAL")||"5").toString(10);return""+('wifi_print(WS, __wsHandle, "W,'+a+","+c+","+b+",")+(e+","+f+","+g+","+d+'");\n')};
Blockly.Blocks.wx_send_widget={helpUrl:Blockly.MSG_SWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SWX_SEND_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("NUM").setCheck("Number").appendField("Simple WX send");this.appendDummyInput().appendField("to widget").appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"]]),"WIDGET");this.setInputsInline(!0);
this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("Simple WX initialize"))this.setWarningText("WARNING: You must use a Simple WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("WX ")&&(b="WARNING: You cannot use Simple WX and\nAdvanced WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_send_widget=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Simple WX initialize"))return"// ERROR: Simple WX is not initialized!\n";var a=Blockly.propc.valueToCode(this,"NUM",Blockly.propc.ORDER_NONE),b=this.getFieldValue("WIDGET");this.getFieldValue("TYPE");return'wifi_print(WS, __wsHandle, "D,'+b+',%d", '+a+");\n"};
Blockly.Blocks.wx_read_widgets={helpUrl:Blockly.MSG_SWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SWX_READ_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Simple WX read widgets");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("Simple WX initialize"))this.setWarningText("WARNING: You must use a Simple WX\ninitialize block at the beginning of your program!");
else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("WX ")&&(b="WARNING: You cannot use Simple WX and\nAdvanced WX blocks together in your project!");this.setWarningText(b)}}};Blockly.propc.wx_read_widgets=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Simple WX initialize")?"// ERROR: Simple WX is not initialized!\n":"wifi_print(WS, __wsHandle, \"U,0\");\n__wv[0] = 0;\nwhile(__wv[0] != 'V') {  __wv[0]++;\n  wifi_poll(&__wxEvent, &__wxId,&__wxHandle);\n  if(__wxEvent == 'W' && __wxId == __wsId)__wsHandle = __wxHandle;\n   if(__wxEvent == 'D') wifi_scan(WS, __wxHandle, \"%c%d%d%d%d%d%d%d%d%d%d%d%d%d%d\", &__wv[0], &__wv[1], &__wv[2], &__wv[3], &__wv[4], &__wv[5], &__wv[6], &__wv[7], &__wv[8], &__wv[9], &__wv[10], &__wv[11], &__wv[12], &__wv[13], &__wv[14]);\nif(__wxEvent == 'X') {__wsHandle = 0;\nwhile (!__wsHandle){wifi_poll( & __wxEvent, & __wxId, & __wxHandle);\nif (__wxEvent == 'W' && __wxId == __wsId) __wsHandle = __wxHandle;}break;}}"};
Blockly.Blocks.wx_get_widget={helpUrl:Blockly.MSG_SWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SWX_GET_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Simple WX widget").appendField(new Blockly.FieldDropdown([["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["10","10"],["11","11"],["12","12"],["device horizontal tilt","13"],["device vertical tilt","14"]]),"WIDGET").appendField("value");this.setOutput(!0,
"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setWarningText(null)},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("Simple WX initialize"))this.setWarningText("WARNING: You must use a Simple WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("WX ")&&(b="WARNING: You cannot use Simple WX and\nAdvanced WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_get_widget=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Simple WX initialize")?"// ERROR: Simple WX is not initialized!\n":["__wv["+this.getFieldValue("WIDGET")+"]",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.wx_evt_connected={helpUrl:Blockly.MSG_SWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SWX_GET_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Simple WX connected");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setWarningText(null)},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("Simple WX initialize"))this.setWarningText("WARNING: You must use a Simple WX\ninitialize block at the beginning of your program!");
else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("WX ")&&(b="WARNING: You cannot use Simple WX and\nAdvanced WX blocks together in your project!");this.setWarningText(b)}}};Blockly.propc.wx_evt_connected=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Simple WX initialize")?"// ERROR: Simple WX is not initialized!\n":["(__wxEvent != 'X')",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.wx_reconnect={helpUrl:Blockly.MSG_SWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SWX_GET_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Simple WX reconnect");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("Simple WX initialize"))this.setWarningText("WARNING: You must use a Simple WX\ninitialize block at the beginning of your program!");
else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("WX ")&&(b="WARNING: You cannot use Simple WX and\nAdvanced WX blocks together in your project!");this.setWarningText(b)}}};Blockly.propc.wx_reconnect=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Simple WX initialize")?"// ERROR: Simple WX is not initialized!\n":"__wsId = wifi_listen(WS, \"/ws/a\"); __wsHandle = 0;\nwhile(!__wsHandle) {\n  wifi_poll(&__wxEvent, &__wxId, &__wxHandle);\n  if(__wxEvent == 'W' && __wxId == __wsId)  __wsHandle = __wxHandle;\n}"};
Blockly.Blocks.wx_init_adv={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_INIT_ADV_TOOLTIP);(new Blockly.FieldColour("#FFFFFF")).setColours(["#FFFFFF","#000000"]).setColumns(2);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("WX initialize").appendField("mode").appendField(new Blockly.FieldDropdown([["Terminal on USB","USB_PGM_TERM"],["Terminal on WX","USB_PGM"],["Term & Programming on WX","WX_ALL_COM"]]),"MODE").appendField(" DI").appendField(new Blockly.FieldDropdown([["WX Socket",
"30"]].concat(profile["default"].digital),function(a){this.sourceBlock_.updateShape_({PIN:a})}),"DI");this.appendDummyInput("DOPIN").appendField("DO").appendField(new Blockly.FieldDropdown(profile["default"].digital),"DO");this.getInput("DOPIN").setVisible(!1);this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setWarningText(null)},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");
else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.setWarningText(b)}},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("DI");a.setAttribute("pin",b);return a},domToMutation:function(a){a=a.getAttribute("pin");this.updateShape_({PIN:a})},updateShape_:function(a){"30"===a.PIN?this.getInput("DOPIN").setVisible(!1):this.getInput("DOPIN").setVisible(!0)}};
Blockly.propc.wx_init_adv=function(){if(!this.disabled){var a=this.getFieldValue("DO"),b=this.getFieldValue("DI");"30"===b&&(a="31");this.getFieldValue("BKG");this.getFieldValue("TITLE");var c=this.getFieldValue("MODE");Blockly.propc.definitions_.wx_def='#include "wifi.h"';Blockly.propc.setups_.wx_init="wifi_start("+a+", "+b+", 115200, "+c+");\n"}return""};
Blockly.Blocks.wx_scan_multiple={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_SCAN_MULTIPLE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("WX scan").appendField(new Blockly.FieldDropdown([["POST","POST"],["Websocket","WS"],["Command","CMD"]],function(a){this.sourceBlock_.setPrefix_({ACTION:a})}),"CONNECTION").appendField("from handle").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"HANDLE");
this.appendDummyInput("PREFIX").appendField("string starts with").appendField(new Blockly.FieldTextInput("txt"),"START");this.optionList_=["dec","dec"];this.updateShape_();this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setMutator(new Blockly.Mutator(["wx_scan_dec","wx_scan_char"]));this.setWarningText(null)},mutationToDom:function(a){a=document.createElement("mutation");a.setAttribute("options",JSON.stringify(this.optionList_));return a},domToMutation:function(a){this.optionList_=
JSON.parse(a.getAttribute("options"));this.updateShape_()},decompose:function(a){var b=a.newBlock("wx_scan_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=0;d<this.optionList_.length;d++){var e=a.newBlock("wx_scan_"+this.optionList_[d]);e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}return b},compose:function(a){var b=a.getInputTargetBlock("STACK");this.optionList_.length=0;for(a=[];b;)"wx_scan_dec"===b.type?this.optionList_.push("dec"):"wx_scan_char"===b.type&&
this.optionList_.push("char"),a.push([b.userData_,b.cpuData_]),b=b.nextConnection&&b.nextConnection.targetBlock();this.updateShape_();for(b=0;b<this.optionList_.length;b++)void 0!==a[b][0]&&this.setFieldValue(a[b][1],"CPU"+b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;)a.cpuData_=this.getFieldValue("CPU"+b)||Blockly.LANG_VARIABLES_GET_ITEM,b++,a.userData_=this.getFieldValue("CPU"+b),a=a.nextConnection&&a.nextConnection.targetBlock()},updateShape_:function(){for(var a=
0;this.getInput("OPTION"+a);)this.removeInput("OPTION"+a),a++;for(a=0;a<this.optionList_.length;a++){var b="store character in";"dec"===this.optionList_[a]&&(b="store integer in");this.appendDummyInput("OPTION"+a).appendField(b,"TYPE"+a).appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"CPU"+a)}},setPrefix_:function(a){var b=!1;"POST"===a.ACTION&&(b=!0);this.getInput("PREFIX").setVisible(b);a=[];for(b=0;this.getInput("OPTION"+b);)a[b]=this.getFieldValue("CPU"+b),this.removeInput("OPTION"+
b),b++;for(var c=0;c<b;c++){var d="store character in";"dec"===this.optionList_[c]&&(d="store integer in");this.appendDummyInput("OPTION"+c).appendField(d,"TYPE"+c).appendField(new Blockly.FieldVariable(a[c]),"CPU"+c)}},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&
(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.workspace&&1>this.optionList_.length&&(b="WX scan must have at least one search term.");this.setWarningText(b)}},getVars:function(){for(var a=[this.getFieldValue("HANDLE")],b=0;b<this.optionList_.length;b++)a.push(this.getFieldValue("CPU"+b));return a},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("HANDLE"))&&this.setFieldValue(b,"HANDLE");for(var c=0;c<this.optionList_.length;c++)Blockly.Names.equals(a,
this.getFieldValue("CPU"+c))&&this.setFieldValue(b,"CPU"+c)}};Blockly.Blocks.wx_scan_container={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("scan");this.appendStatementInput("STACK");this.contextMenu=!1}};Blockly.Blocks.wx_scan_dec={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("integer");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.contextMenu=!1}};
Blockly.Blocks.wx_scan_char={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("character");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.contextMenu=!1}};
Blockly.propc.wx_scan_multiple=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();if(-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")){a=Blockly.propc.variableDB_.getName(this.getFieldValue("HANDLE"),Blockly.Variables.NAME_TYPE);var b=this.getFieldValue("CONNECTION"),c=this.getFieldValue("START").replace(/'/g,"\\'").replace(/"/g,'\\"');"POST"!==b&&(c="");a="wifi_scan("+b+", "+a+', "'+c;b="";for(c=0;this.getFieldValue("CPU"+c);)a=this.getFieldValue("TYPE"+c).includes("integer")?
a+"%d":a+"%c",b+=", &"+Blockly.propc.variableDB_.getName(this.getFieldValue("CPU"+c),Blockly.Variables.NAME_TYPE),c++;return a+('"'+b+");\n")}return"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.wx_print_multiple={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_PRINT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("WX print to").appendField(new Blockly.FieldDropdown([["GET","GET"],["TCP","TCP"],["Websocket","WS"],["Command","CMD"]]),"CONNECTION").appendField("handle").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"HANDLE");this.appendValueInput("PRINT0").setAlign(Blockly.ALIGN_RIGHT).setCheck("String").appendField("string");
this.appendValueInput("PRINT1").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("integer");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setMutator(new Blockly.Mutator("console_print_str console_print_dec console_print_hex console_print_bin console_print_float console_print_char".split(" ")));this.optionList_=["str","dec"];this.setWarningText(null)},mutationToDom:Blockly.Blocks.console_print_multiple.mutationToDom,domToMutation:Blockly.Blocks.serial_print_multiple.domToMutation,
decompose:Blockly.Blocks.console_print_multiple.decompose,compose:Blockly.Blocks.serial_print_multiple.compose,saveConnections:Blockly.Blocks.console_print_multiple.saveConnections,onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");
this.workspace&&1>this.optionList_.length&&(b="WX scan must have at least one search term.");this.setWarningText(b)}},getVars:function(){return[this.getFieldValue("HANDLE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("HANDLE"))&&this.setFieldValue(b,"HANDLE")}};Blockly.propc.wx_print_multiple=Blockly.propc.console_print_multiple;
Blockly.Blocks.wx_scan_string={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_SCAN_STRING_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("WX scan").appendField(new Blockly.FieldDropdown([["POST","POST"],["Websocket","WS"],["Command","CMD"]],function(a){this.sourceBlock_.setPrefix_({ACTION:a})}),"CONNECTION").appendField("from handle").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"HANDLE");this.appendDummyInput("PREFIX").appendField("string starts with").appendField(new Blockly.FieldTextInput("txt"),"START");this.appendDummyInput("STORE").appendField("store string in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VARNAME");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0)},setPrefix_:function(a){var b=!1;"POST"===a.ACTION&&(b=!0);this.getInput("PREFIX").setVisible(b);a=this.getFieldValue("VARNAME");this.removeInput("STORE");this.appendDummyInput("STORE").appendField("store string in").appendField(new Blockly.FieldVariable(a),
"VARNAME")},getVars:function(){return[this.getFieldValue("VARNAME"),this.getFieldValue("HANDLE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("HANDLE"))&&this.setFieldValue(b,"HANDLE");Blockly.Names.equals(a,this.getFieldValue("VARNAME"))&&this.setFieldValue(b,"VARNAME")},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");
else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_scan_string=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();if(-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")){a=Blockly.propc.variableDB_.getName(this.getFieldValue("HANDLE"),Blockly.Variables.NAME_TYPE);var b=this.getFieldValue("CONNECTION"),c=this.getFieldValue("START").replace(/'/g,"\\'").replace(/"/g,'\\"'),d=Blockly.propc.variableDB_.getName(this.getFieldValue("VARNAME"),Blockly.Variables.NAME_TYPE);Blockly.propc.vartype_[d]="char *";
"POST"!==b&&(c="");return"wifi_scan("+b+", "+a+', "'+c+'%s", &'+d+");\n"}return"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.wx_send_string={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_SEND_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("DATA").setAlign(Blockly.ALIGN_RIGHT).appendField("WX send string").setCheck("String");this.appendDummyInput().appendField("handle").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"HANDLE");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},
getVars:function(){return[this.getFieldValue("HANDLE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("HANDLE"))&&this.setFieldValue(b,"HANDLE")},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");
this.setWarningText(b)}}};Blockly.propc.wx_send_string=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();return-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")?(a=Blockly.propc.valueToCode(this,"DATA",Blockly.propc.ORDER_NONE),"wifi_send("+Blockly.propc.variableDB_.getName(this.getFieldValue("HANDLE"),Blockly.Variables.NAME_TYPE)+", "+a+", sizeof("+a+"));\n"):"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.wx_receive_string={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_RECEIVE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("WX receive store string in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"DATA").appendField("byte count in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"BYTES");this.appendValueInput("MAX").appendField("handle").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"HANDLE").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("max bytes");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setInputsInline(!1)},getVars:function(){return[this.getFieldValue("DATA"),this.getFieldValue("BYTES"),this.getFieldValue("HANDLE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("DATA"))&&this.setFieldValue(b,"DATA");Blockly.Names.equals(a,this.getFieldValue("BYTES"))&&this.setFieldValue(b,"BYTES");Blockly.Names.equals(a,
this.getFieldValue("HANDLE"))&&this.setFieldValue(b,"HANDLE")},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_receive_string=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();if(-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")){a=Blockly.propc.variableDB_.getName(this.getFieldValue("DATA"),Blockly.Variables.NAME_TYPE);var b=Blockly.propc.variableDB_.getName(this.getFieldValue("HANDLE"),Blockly.Variables.NAME_TYPE),c=Blockly.propc.valueToCode(this,"MAX",Blockly.propc.NONE)||"64",d=Blockly.propc.variableDB_.getName(this.getFieldValue("BYTES"),Blockly.Variables.NAME_TYPE);
Blockly.propc.vartype_[a]="char *";return d+" = wifi_recv("+b+", "+a+", "+c+");\n"}return"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.wx_poll={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_POLL_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("WX poll store event in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"EVENT").appendField("ID in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"ID").appendField("handle in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"HANDLE");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVars:function(){return[this.getFieldValue("ID"),this.getFieldValue("EVENT"),this.getFieldValue("HANDLE")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("ID"))&&this.setFieldValue(b,"ID");Blockly.Names.equals(a,this.getFieldValue("EVENT"))&&this.setFieldValue(b,"EVENT");Blockly.Names.equals(a,this.getFieldValue("HANDLE"))&&this.setFieldValue(b,"HANDLE")},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();
if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_poll=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();if(-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")){a=Blockly.propc.variableDB_.getName(this.getFieldValue("ID"),Blockly.Variables.NAME_TYPE);var b=Blockly.propc.variableDB_.getName(this.getFieldValue("EVENT"),Blockly.Variables.NAME_TYPE),c=Blockly.propc.variableDB_.getName(this.getFieldValue("HANDLE"),Blockly.Variables.NAME_TYPE);return"wifi_poll(&"+b+", &"+a+", &"+c+");\n"}return"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.wx_listen={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_LISTEN_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("PATH").setAlign(Blockly.ALIGN_RIGHT).appendField("WX connect").appendField(new Blockly.FieldDropdown([["HTTP","HTTP"],["Websocket","WS"],["TCP","TCP"]],function(a){this.sourceBlock_.setPrefix_({ACTION:a})}),"PROTOCOL").appendField("store ID in","TEXT").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"ID").appendField("path","LABEL").setCheck("String");this.appendValueInput("PORT").appendField("port").setCheck("Number");this.appendDummyInput("CONNVARS").appendField(new Blockly.FieldVariable("wxConnId1"),"ID1").appendField(new Blockly.FieldVariable("wxConnId2"),"ID2").appendField(new Blockly.FieldVariable("wxConnId3"),"ID3").appendField(new Blockly.FieldVariable("wxConnId4"),"ID4");this.getInput("PORT").setVisible(!1);this.getInput("CONNVARS").setVisible(!1);this.setInputsInline(!0);this.setPreviousStatement(!0,
"Block");this.setNextStatement(!0,null)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("PROTOCOL");a.setAttribute("action",b);return a},domToMutation:function(a){a=a.getAttribute("action");this.setPrefix_({ACTION:a})},setPrefix_:function(a){var b=!1;this.removeInput("CONNVARS");"TCP"===a.ACTION?(b=!0,this.setFieldValue("URL","LABEL"),this.setFieldValue("wxHandle","ID"),this.setFieldValue("store handle in","TEXT")):(this.setFieldValue("path","LABEL"),this.setFieldValue("wxConnId1",
"ID"),this.setFieldValue("store ID in","TEXT"),this.appendDummyInput("CONNVARS").appendField(new Blockly.FieldVariable("wxConnId1"),"ID1").appendField(new Blockly.FieldVariable("wxConnId2"),"ID2").appendField(new Blockly.FieldVariable("wxConnId3"),"ID3").appendField(new Blockly.FieldVariable("wxConnId4"),"ID4"),this.getInput("CONNVARS").setVisible(!1));this.getInput("PORT").setVisible(b)},getVars:function(){return[this.getFieldValue("ID"),this.getFieldValue("ID1"),this.getFieldValue("ID2"),this.getFieldValue("ID3"),
this.getFieldValue("ID4")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("ID"))&&this.setFieldValue(b,"ID");Blockly.Names.equals(a,this.getFieldValue("ID1"))&&this.setFieldValue(b,"ID1");Blockly.Names.equals(a,this.getFieldValue("ID2"))&&this.setFieldValue(b,"ID2");Blockly.Names.equals(a,this.getFieldValue("ID3"))&&this.setFieldValue(b,"ID3");Blockly.Names.equals(a,this.getFieldValue("ID4"))&&this.setFieldValue(b,"ID4")},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();
if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_listen=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();if(-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")){a=Blockly.propc.valueToCode(this,"PATH",Blockly.propc.ORDER_NONE);var b=this.getFieldValue("PROTOCOL"),c=Blockly.propc.variableDB_.getName(this.getFieldValue("ID"),Blockly.Variables.NAME_TYPE),d=Blockly.propc.valueToCode(this,"PORT",Blockly.propc.ORDER_NONE)||"80",e="";return"TCP"===b?e+(c+" = wifi_connect("+a+", "+d+");\n"):e+(c+" = wifi_listen("+
b+", "+a+");\n")}return"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.wx_join={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_GET_IP_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("WX join network SSID").appendField(new Blockly.FieldTextInput("myNetwork"),"SSID").appendField("passphrase").appendField(new Blockly.FieldTextInput("passphrase"),"PASS");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},
onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("WX initialize")?this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};Blockly.propc.wx_join=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();if(-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")){a=this.getFieldValue("SSID")||"";var b=this.getFieldValue("PASS")||"";return'wifi_join("'+a+'", "'+b+'");\n'}return"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.wx_code={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_CODE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("WX code").appendField(new Blockly.FieldDropdown([["ARG","0xE6"],["Connect","0xE4"],["Close","0xE8"],["Check","0xEE"],["Join","0xEF"],["Listen","0xE7"],["Path","0xEB"],["Poll","0xEC"],["Receive","0xE9"],["Reply","0xE5"],["Send","0xEA"],["Set","0xED"],["AP Mode","0xF3"],
["CMD","0xFE"],["GET","71"],["HTTP","0xF7"],["POST","80"],["Station Mode","0xF4"],["Station+AP Mode","0xF2"],["TCP","0xF5"],["Websocket","0xF6"],["GPIO_DI","1"],["GPIO_DO","3"],["GPIO_RTS","15"],["GPIO_CTS","13"],["GPIO_ASC","5"],["GPIO_DBG","2"],["GPIO_PGM","0"],["Invalid Request","1"],["Invalid Argument","2"],["Wrong Argument","3"],["No free listeners","4"],["No free connection","5"],["Lookup failed","6"],["Connection failed","7"],["Send failed","8"],["Invalid state","9"],["Invalid size","10"],
["Disconnected","11"],["Not implemented","12"],["Busy","13"],["Internal error","14"],["No error","0"],["Out of memory","-1"],["Undefined (NEG2)","-2"],["Timeout","-3"],["Routing problem","-4"],["Operation in progress","-5"],["Undefined (NEG6)","-6"],["Number too large","-7"],["Connection aborted","-8"],["Connection reset","-9"],["Connection closed","-10"],["Not connected","-11"],["Illegal argument","-12"],["Undefined (NEG13)","-13"],["UDP send error","-14"],["Already connected","-15"],["SSL handshake failed",
"-28"],["SSL application invalid","-61"]]),"CODE");this.setOutput(!0,"Number")},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_code=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();return-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")?[this.getFieldValue("CODE"),Blockly.propc.ORDER_NONE]:"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.wx_mode={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_MODE_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("WX ").appendField(new Blockly.FieldDropdown([["Set","SET"],["Leave and set","LEAVE"],["Check","CHECK"]],function(a){this.sourceBlock_.setPrefix_({ACTION:a})}),"ACTION").appendField("mode");this.appendDummyInput("CHECK").appendField("to").appendField(new Blockly.FieldDropdown([["AP",
"AP"],["Station","STA"],["Station + AP","STA_AP"]]),"MODE");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setInputsInline(!0)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("ACTION");a.setAttribute("action",b);return a},domToMutation:function(a){a=a.getAttribute("action");this.setPrefix_({ACTION:a})},setPrefix_:function(a){this.removeInput("CHECK");"LEAVE"===a.ACTION?this.appendDummyInput("CHECK").appendField("to").appendField(new Blockly.FieldDropdown([["AP",
"AP"],["Station + AP","STA_AP"]]),"MODE"):this.appendDummyInput("CHECK").appendField("to").appendField(new Blockly.FieldDropdown([["AP","AP"],["Station","STA"],["Station + AP","STA_AP"]]),"MODE");"CHECK"===a.ACTION?(this.getInput("CHECK").setVisible(!1),this.setPreviousStatement(!1,null),this.setNextStatement(!1,null),this.setOutput(!0,"Number")):(this.getInput("CHECK").setVisible(!0),this.setPreviousStatement(!0,"Block"),this.setNextStatement(!0,null),this.setOutput(!1))},onchange:function(){var a=
Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_mode=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();if(-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")){a=this.getFieldValue("MODE");var b=this.getFieldValue("ACTION");return"CHECK"===b?["wifi_mode(CHECK)",Blockly.propc.ORDER_NONE]:"LEAVE"===b?"wifi_leave("+a+");\n":"wifi_mode("+a+");\n"}return"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.wx_buffer={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_BUFFER_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("SIZE").setCheck("Number").appendField("WX buffer use default").appendField(new Blockly.FieldCheckbox("TRUE",function(a){this.sourceBlock_.setPrefix_({ACTION:a})}),"DEFAULT").appendField("size");this.appendDummyInput("BUF").appendField("set").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"BUFFER").appendField("as buffer");this.getInput("BUF").setVisible(!1);this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("DEFAULT");a.setAttribute("action",b);return a},domToMutation:function(a){a=a.getAttribute("action");this.setPrefix_({ACTION:a})},setPrefix_:function(a){var b=this.getFieldValue("BUFFER");this.removeInput("BUF");if("FALSE"===a.ACTION||!1===a.ACTION||
"false"===a.ACTION)this.appendDummyInput("BUF").appendField("set").appendField(new Blockly.FieldVariable(b||Blockly.LANG_VARIABLES_GET_ITEM),"BUFFER").appendField("as buffer"),this.getInput("BUF").setVisible(!0)},getVarType:function(){return"String"},getVars:function(){return[this.getFieldValue("BUFFER")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("BUFFER"))&&this.setFieldValue(b,"BUFFER")},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");
else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_buffer=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();if(-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")){a=Blockly.propc.valueToCode(this,"SIZE",Blockly.propc.NONE)||"64";var b=this.getFieldValue("DEFAULT"),c=Blockly.propc.variableDB_.getName(this.getFieldValue("BUFFER"),Blockly.Variables.NAME_TYPE);Blockly.propc.vartype_[c]="char *";var d="";return"TRUE"===b?d+("wifi_bufferSize("+a+");\n"):d+("wifi_setBuffer("+c+","+a+");\n")}return"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.wx_disconnect={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_DISCONNECT_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("WX disconnect").appendField(new Blockly.FieldDropdown([["HTTP","HTTP"],["Websocket","WS"],["TCP","TCP"]],function(a){this.sourceBlock_.setPrefix_({ACTION:a})}),"PROTOCOL").appendField("ID","TEXT").appendField(new Blockly.FieldVariable("wxId"),"ID");this.setInputsInline(!0);
this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("PROTOCOL");a.setAttribute("action",b);return a},domToMutation:function(a){a=a.getAttribute("action");this.setPrefix_({ACTION:a})},setPrefix_:function(a){"TCP"===a.ACTION?(this.setFieldValue("wxHandle","ID"),this.setFieldValue("handle","TEXT")):(this.setFieldValue("wxId","ID"),this.setFieldValue("ID","TEXT"))},getVars:function(){return[this.getFieldValue("ID")]},
renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("ID"))&&this.setFieldValue(b,"ID")},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_disconnect=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();return-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")?"wifi_disconnect("+Blockly.propc.variableDB_.getName(this.getFieldValue("ID"),Blockly.Variables.NAME_TYPE)+");\n":"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.wx_ip={helpUrl:Blockly.MSG_AWX_HELPURL,init:function(){this.setTooltip(Blockly.MSG_AWX_GET_IP_TOOLTIP);this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("WX").appendField(new Blockly.FieldDropdown([["Station","STA"],["AP","AP"]]),"MODE").appendField("IP address");this.setInputsInline(!0);this.setOutput(!0,"String")},onchange:function(){var a=Blockly.getMainWorkspace().getAllBlocks();if(-1===a.toString().indexOf("WX initialize"))this.setWarningText("WARNING: You must use a WX\ninitialize block at the beginning of your program!");
else{for(var b=null,c=0;c<a.length;c++)0===a[c].toString().indexOf("Simple WX")&&(b="WARNING: You cannot use Advanced WX and\nSimple WX blocks together in your project!");this.setWarningText(b)}}};
Blockly.propc.wx_ip=function(){var a=Blockly.getMainWorkspace().getAllBlocks().toString();return-1===a.indexOf("Simple WX initialize")&&-1<a.indexOf("WX initialize")?(a=this.getFieldValue("MODE"),this.disabled||(Blockly.propc.methods_.ip_address_func='char *wifi_ip_string(int __mode) {int __ip[4]; char __result = wifi_ip(__mode, __ip); char *ipStr; if(__result == \'E\') {ipStr = "Error          ";} else {sprint(ipStr, "%d.%d.%d.%d", __ip[0], __ip[1], __ip[2], __ip[3]);} return ipStr;}',Blockly.propc.method_declarations_.ip_address_func=
"char *wifi_ip_string(int __mode);\n"),["wifi_ip_string("+a+")",Blockly.propc.ORDER_NONE]):"// ERROR: WX is not initialized!\n"};
Blockly.Blocks.graph_output={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Graph");this.appendValueInput("PRINTa").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField(new Blockly.FieldTextInput("label"),"GRAPH_LABELa").appendField("value");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setMutator(new Blockly.Mutator(["graph_dec"]));this.optionList_=["dec"];this.graph_labels_=[]},mutationToDom:function(){var a=
document.createElement("mutation");a.setAttribute("options",JSON.stringify(this.optionList_));return a},domToMutation:function(a){this.optionList_=JSON.parse(a.getAttribute("options"));for(a=0;a<this.optionList_.length;a++)this.appendValueInput("PRINT"+a).setAlign(Blockly.ALIGN_RIGHT).appendField(new Blockly.FieldTextInput("label"),"GRAPH_LABEL"+a).appendField("value")},decompose:function(a){var b=Blockly.Block.obtain(a,"graphing_container");b.initSvg();for(var c=b.getInput("STACK").connection,d=
0;d<this.optionList_.length;d++){var e=a.newBlock("graph_dec");e.initSvg();c.connect(e.previousConnection);c=e.nextConnection}d=0;for(this.graph_labels_=[];this.getFieldValue("GRAPH_LABEL"+d);)this.graph_labels_.push(this.getFieldValue("GRAPH_LABEL"+d)),d++;return b},compose:function(a){for(var b=0;this.getInput("PRINT"+b);)this.removeInput("PRINT"+b),b++;b=0;this.optionList_.length=0;for(a=a.getInputTargetBlock("STACK");a;){this.optionList_.push("dec");var c=this.appendValueInput("PRINT"+b).setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField(new Blockly.FieldTextInput("label"),
"GRAPH_LABEL"+b).appendField("value");a.valueConnection_&&c.connection.connect(a.valueConnection_);b++;a=a.nextConnection&&a.nextConnection.targetBlock()}for(b=0;b<this.graph_labels_.length;b++)this.getFieldValue("GRAPH_LABEL"+b)&&this.setFieldValue(this.graph_labels_[b],"GRAPH_LABEL"+b)},saveConnections:function(a){a=a.getInputTargetBlock("STACK");for(var b=0;a;){var c=this.getInput("PRINT"+b);a.valueConnection_=c&&c.connection.targetConnection;a=a.nextConnection&&a.nextConnection.targetBlock();
b++}a=0;for(this.graph_labels_=[];this.getFieldValue("GRAPH_LABEL"+a);)this.graph_labels_.push(this.getFieldValue("GRAPH_LABEL"+a)),a++},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Graph initialize")?this.setWarningText("WARNING: You must use a Graph\ninitialize block at the beginning of your program!"):this.workspace&&1>this.optionList_.length?this.setWarningText("Graphing output must have at least one value."):10<this.optionList_.length?this.setWarningText("Graphing output only supports up to 10 values."):
this.setWarningText(null);this.getInput("PRINT0")&&this.getInput("PRINTa")&&this.removeInput("PRINTa")}};Blockly.Blocks.graphing_container={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("send");this.appendStatementInput("STACK");this.contextMenu=!1}};
Blockly.Blocks.graph_dec={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("value");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.contextMenu=!1}};
Blockly.propc.graph_output=function(){if(-1<Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Graph initialize")){this.getFieldValue("HANDLE");this.getFieldValue("CONNECTION");for(var a='print("%u',b="",c="",d=0;Blockly.propc.valueToCode(this,"PRINT"+d,Blockly.propc.ORDER_NONE)&&!(a+=",%d",b+=", "+Blockly.propc.valueToCode(this,"PRINT"+d,Blockly.propc.NONE||"0"),c+=this.getFieldValue("GRAPH_LABEL"+d),Blockly.propc.valueToCode(this,"PRINT"+(d+1),Blockly.propc.ORDER_NONE)&&9>d&&(c+=","),
d++,10<d););this.disabled||(Blockly.propc.serial_graphing_=!0,Blockly.propc.definitions_.graphing_labels="// GRAPH_LABELS_START:"+c+":GRAPH_LABELS_END //");return a+('\\r", (CNT >> 16)'+b+");\n")}return"// ERROR: Graphing is not initialized!"};
Blockly.Blocks.graph_settings={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Graph initialize  keep").appendField(new Blockly.FieldTextInput("40",Blockly.FieldTextInput.numberValidator),"XAXIS").appendField("seconds of data  y-axis ").appendField(new Blockly.FieldDropdown([["autoscale","AUTO"],["range","FIXED"]]),"YSETTING").appendField("minimum","LABELMIN").appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),
"YMIN").appendField(" maximum","LABELMAX").appendField(new Blockly.FieldTextInput("0",Blockly.FieldTextInput.numberValidator),"YMAX");"AUTO"===this.getFieldValue("YSETTING")?(this.getField("YMIN").setVisible(!1),this.setFieldValue("0","YMIN"),this.getField("YMAX").setVisible(!1),this.setFieldValue("0","YMAX"),this.getField("LABELMIN").setVisible(!1),this.getField("LABELMAX").setVisible(!1)):(this.getField("YMIN").setVisible(!0),this.getField("YMAX").setVisible(!0),this.getField("LABELMIN").setVisible(!0),
this.getField("LABELMAX").setVisible(!0));this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.render()},onchange:function(){"AUTO"===this.getFieldValue("YSETTING")?(this.getField("YMIN").setVisible(!1),this.setFieldValue("0","YMIN"),this.getField("YMAX").setVisible(!1),this.setFieldValue("0","YMAX"),this.getField("LABELMIN").setVisible(!1),this.getField("LABELMAX").setVisible(!1)):(this.getField("YMIN").setVisible(!0),this.getField("YMAX").setVisible(!0),
this.getField("LABELMIN").setVisible(!0),this.getField("LABELMAX").setVisible(!0));this.render()}};Blockly.propc.graph_settings=function(){if(!this.disabled){this.getFieldValue("RATE");var a=this.getFieldValue("XAXIS")||"10",b=this.getFieldValue("YMIN")||"0",c=this.getFieldValue("YMAX")||"100";10>parseInt(a)&&(a="10");Blockly.propc.definitions_.graphing_settings="// GRAPH_SETTINGS_START:100,"+a+",S,"+b+","+c+":GRAPH_SETTINGS_END //"}return""};
var xbee_settings=[["WR","Write",'Write parameter values to non-volatile memory so that parameter modifications persist through subsequent power-up or reset. Note: Once WR is issued, no additional characters should be sent to the module until after the response "OK\\r" is received.',[],null,null],["RE","Restore Defaults","Restore module parameters to factory defaults.",[],null,null],["FR","Software Reset","Responds immediately with an OK then performs a hard reset ~100ms later.",[],null,null],["CH",
"Channel","Set/Read the channel number used for transmitting and receiving data between RF modules (uses 802.15.4 protocol channel numbers).",[["12","12"],["13","13"],["14","14"],["15","15"],["16","16"],["17","17"],["18","18"],["19","19"],["20","20"],["21","21"],["22","22"],["23","23"]],12,"%d"],["ID","PAN ID","Set/Read the PAN (Personal Area Network) ID. Use 0xFFFF to broadcast messages to all PANs.",[["Min",0],["Max",65535]],13106,"%x"],["DH","Destination Address High","Set/Read the upper 32 bits of the 64-bit destination address. When combined with DL, it defines the destination address used for transmission. To transmit using a 16-bit address, set DH parameter to zero and DL less than 0xFFFF. 0x000000000000FFFF is the broadcast address for the PAN.",
[["Min",0],["Max",4294967295]],0,"%x"],["DL","Destination Address Low","Set/Read the lower 32 bits of the 64-bit destination address. When combined with DH, DL defines the destination address used for transmission. To transmit using a 16-bit address, set DH parameter to zero and DL less than 0xFFFF. 0x000000000000FFFF is the broadcast address for the PAN.",[["Min",0],["Max",4294967295]],0,"%x"],["MY","16-bit Source Address","Set/Read the RF module 16-bit source address. Set MY = 0xFFFF to disable reception of packets with 16-bit addresses. 64-bit source address (serial number) and broadcast address (0x000000000000FFFF) is always enabled.",
[["Min",0],["Max",65535]],0,"%x"],["SH","Serial Number High","Read high 32 bits of the RF module's unique IEEE 64-bit address. 64-bit source address is always enabled.",[["Min",0],["Max",4294967295]],-1,"%x"],["SL","Serial Number Low","Read low 32 bits of the RF module's unique IEEE 64-bit address. 64-bit source address is always enabled.",[["Min",0],["Max",4294967295]],-1,"%x"],["RR","XBee Retries","Set/Read the maximum number of retries the module will execute in addition to the 3 retries provided by the 802.15.4 MAC. For each XBee retry, the 802.15.4 MAC can execute up to 3 retries.",
[["Min",0],["Max",6]],0,"%d"],["RN","Random Delay Slots","Set/Read the minimum value of the back-off exponent in the CSMA-CA algorithm that is used for collision avoidance. If RN = 0, collision avoidance is disabled during the first iteration of the algorithm (802.15.4 - macMinBE).",[["Min",0],["Max",3]],0,"%d"],["MM","MAC Mode","Set/Read MAC Mode value. MAC Mode enables/disables the use of a Digi header in the 802.15.4 RF packet. When Modes 0 or 3 are enabled (MM=0,3), duplicate packet detection is enabled as well as certain AT commands. Please see the detailed MM description on page 47 for additional information.",
[["Digi Mode","0"],["802.15.4 (no ACKs)","1"],["802.15.4 (with ACKs)","2"],["Digi Mode (no ACKs)","3"]],0,"%d"],["NI","Node Identifier","Stores a string identifier. The register only accepts printable ASCII data. A string can not start with a space. Carriage return ends command. Command will automatically end when maximum bytes for the string have been entered. This string is returned as part of the ND (Node Discover) command. This identifier is also used with the DN (Destination Node) command.",
[["Length",20]],"","%s"],["ND","Node Discover","Discovers and reports all RF modules found. The following information is reported for each module discovered (the example cites use of Transparent operation (AT command format) - refer to the long ND command description regarding differences between Transparent and API operation). MY SH SL DB NI The amount of time the module allows for responses is determined by the NT parameter. In Transparent operation, command completion is designated by a (carriage return). ND also accepts a Node Identifier as a parameter. In this case, only a module matching the supplied identifier will respond. If ND self-response is enabled (NO=1) the module initiating the node discover will also output a response for itself.",
[["Length",20]],"","%s"],["NT","Node Discover Time","Set/Read the amount of time a node will wait for responses from other nodes when using the ND (Node Discover) command.",[["Min",1],["Max",252]],25,"%d"],["NO","Node Discover Options","Enables node discover self-response on the module. 0-1 0 DN ( v1.x80*) Networking {Identification} Destination Node. Resolves an NI (Node Identifier) string to a physical address. The following events occur upon successful command execution: 1. DL and DH are set to the address of the module with the matching Node Identifier. 2. \u201cOK\u201d is returned. 3. RF module automatically exits AT Command Mode If there is no response from a module within 200 msec or a parameter is not specified (left blank), the command is terminated and an \u201cERROR\u201d message is returned. 20-character ASCII string -",
[["Length",20]],"","%s"],["CE","Coordinator Enable","Set/Read the coordinator setting.",[["End Device","0"],["Coordinator","1"]],0,"%d"],["SC","Scan Channels","Set/Read list of channels to scan for all Active and Energy Scans as a bitfield. This affects scans initiated in command mode (AS, ED) and during End Device Association and Coordinator startup.",[["Bitfield",16],["Mask",8190]],8190,"%b"],["SD","Scan Duration","Set/Read the scan duration exponent. End Device - Duration of Active Scan during Association. Coordinator - If \u2018ReassignPANID\u2019 option is set on Coordinator [refer to A2 parameter], SD determines the length of time the Coordinator will scan channels to locate existing PANs. If \u2018ReassignChannel\u2019 option is set, SD determines how long the Coordinator will perform an Energy Scan to determine which channel it will operate on. \u2018Scan Time\u2019 is measured as (# of channels to scan] * (2 ^ SD) * 15.36ms). The number of channels to scan is set by the SC command. The XBee can scan up to 16 channels (SC = 0xFFFF). The XBee PRO can scan up to 13 channels (SC = 0x3FFE). Example: The values below show results for a 13 channel scan.",
[["00.18 sec","0"],["00.74 sec","2"],["02.95 sec","4"],["11.80 sec","6"],["47.19 sec","8"],["03.15 min","10"],["12.58 min","12"],["50.33 min","14"]],4,"%d"],["A1","End Device Association","Set/Read End Device association options. bit 0 - ReassignPanID 0 - Will only associate with Coordinator operating on PAN ID that matches module ID 1 - May associate with Coordinator operating on any PAN ID bit 1 - ReassignChannel 0 - Will only associate with Coordinator operating on matching CH Channel setting 1 - May associate with Coordinator operating on any Channel bit 2 - AutoAssociate 0 - Device will not attempt Association 1 - Device attempts Association until success Note: This bit is used only for Non-Beacon systems. End Devices in Beacon-enabled system must always associate to a Coordinator bit 3 - PollCoordOnPinWake 0 - Pin Wake will not poll the Coordinator for indirect (pending) data 1 - Pin Wake will send Poll Request to Coordinator to extract any pending data bits 4 - 7 are reserved",
[["Bitfield",0],["Mask",15]],0,"%b"],["A2","Coordinator Association","Set/Read Coordinator association options. bit 0 - ReassignPanID 0 - Coordinator will not perform Active Scan to locate available PAN ID. It will operate on ID (PAN ID). 1 - Coordinator will perform Active Scan to determine an available ID (PAN ID). If a PAN ID conflict is found, the ID parameter will change. bit 1 - ReassignChannel - 0 - Coordinator will not perform Energy Scan to determine free channel. It will operate on the channel determined by the CH parameter. 1 - Coordinator will perform Energy Scan to find a free channel, then operate on that channel. bit 2 - AllowAssociation - 0 - Coordinator will not allow any devices to associate to it. 1 - Coordinator will allow devices to associate to it. bits 3 - 7 are reserved",
[["Bitfield",3],["Mask",7]],0,"%b"],["AI","Association Indication","Read errors with the last association request: 0x00 - Successful Completion - Coordinator successfully started or End Device association complete 0x01 - Active Scan Timeout 0x02 - Active Scan found no PANs 0x03 - Active Scan found PAN, but the CoordinatorAllowAssociation bit is not set 0x04 - Active Scan found PAN, but Coordinator and End Device are not configured to support beacons 0x05 - Active Scan found PAN, but the Coordinator ID parameter does not match the ID parameter of the End Device 0x06 - Active Scan found PAN, but the Coordinator CH parameter does not match the CH parameter of the End Device 0x07 - Energy Scan Timeout 0x08 - Coordinator start request failed 0x09 - Coordinator could not start due to invalid parameter 0x0A - Coordinator Realignment is in progress 0x0B - Association Request not sent 0x0C - Association Request timed out - no reply was received 0x0D - Association Request had an Invalid Parameter 0x0E - Association Request Channel Access Failure. Request was not transmitted - CCA failure 0x0F - Remote Coordinator did not send an ACK after Association Request was sent 0x10 - Remote Coordinator did not reply to the Association Request, but an ACK was received after sending the request 0x11 - [reserved] 0x12 - Sync-Loss - Lost synchronization with a Beaconing Coordinator 0x13 - Disassociated - No longer associated to Coordinator 0xFF - RF Module is attempting to associate",
[["Min",0],["Max",19]],-1,"%x"],["DA","Force Disassociation","End Device will immediately disassociate from a Coordinator (if associated) and reattempt to associate.",[],null,null],["FP","Force Poll","Request indirect messages being held by a coordinator.",[],null,null],["AS","Active Scan Time","Send Beacon Request to Broadcast Address (0xFFFF) and Broadcast PAN (0xFFFF) on every channel. The parameter determines the time the radio will listen for Beacons on each channel. A PanDescriptor is created and returned for every Beacon received from the scan. Each PanDescriptor contains the following information: CoordAddress (SH, SL) CoordPanID (ID) CoordAddrMode 0x02 = 16-bit Short Address 0x03 = 64-bit Long Address Channel (CH parameter) SecurityUse ACLEntry SecurityFailure SuperFrameSpec (2 bytes): bit 15 - Association Permitted (MSB) bit 14 - PAN Coordinator bit 13 - Reserved bit 12 - Battery Life Extension bits 8-11 - Final CAP Slot bits 4-7 - Superframe Order bits 0-3 - Beacon Order GtsPermit RSSI (RSSI is returned as -dBm) TimeStamp (3 bytes) A carriage return is sent at the end of the AS command. The Active Scan is capable of returning up to 5 PanDescriptors in a scan. The actual scan time on each channel is measured as Time = [(2 ^SD PARAM) * 15.36] ms. Note the total scan time is this time multiplied by the number of channels to be scanned (16 for the XBee and 13 for the XBee-PRO). Also refer to SD command description.",
[["Min",0],["Max",6]],0,"%d"],["ED","Energy Scan Time","Send an Energy Detect Scan. This parameter determines the length of scan on each channel. The maximal energy on each channel is returned & each value is followed by a carriage return. An additional carriage return is sent at the end of the command. The values returned represent the detected energy level in units of -dBm. The actual scan time on each channel is measured as Time = [(2 ^ED) * 15.36] ms. Note the total scan time is this time multiplied by the number of channels to be scanned (refer to SD parameter).",
[["Min",0],["Max",6]],0,"%d"],["EE","AES Encryption Enable","Disable/Enable 128-bit AES encryption support. Use in conjunction with the KY command.",[["Min",0],["Max",1]],0,"%d"],["KY","AES Encryption Key","Set the 128-bit AES (Advanced Encryption Standard) key for encrypting/decrypting data. The KY register cannot be read.",[["Length",16]],"","%x"],["PL","RF Interfacing Power Level","Select/Read the power level at which the RF module transmits conducted power.",[["10 dBm","0"],["12 dBm","1"],["14 dBm",
"2"],["16 dBm","3"],["18 dBm","4"]],4,"%d"],["CA","RF Interfacing CCA Threshold","Set/read the CCA (Clear Channel Assessment) threshold. Prior to transmitting a packet, a CCA is performed to detect energy on the channel. If the detected energy is above the CCA Threshold, the module will not transmit the packet.",[["Min",36],["Max",80]],44,"%x"],["SM","Sleep Mode","Set/Read Sleep Mode configurations.",[["No Sleep","0"],["Pin Hibernate","1"],["Pin Doze","2"],["Cyclic sleep remote","4"],["Cyclic sleep remote w/ pin wake-up",
"5"]],0,"%d"]];
Blockly.Blocks.xbee_configure={helpUrl:Blockly.MSG_XBEE_HELPURL,init:function(){this.setColour(colorPalette.getColor("protocols"));for(var a=[],b=0;b<xbee_settings.length;b++)-1!==xbee_settings[b][4]&&a.push([xbee_settings[b][1],b.toString(10)]);this.appendDummyInput().appendField("XBee configuration").appendField(new Blockly.FieldDropdown([["set","set"],["read","read"]],function(a){"set"===a?(this.sourceBlock_.setOutput(!1,null),this.sourceBlock_.setPreviousStatement(!0,"Block"),this.sourceBlock_.setNextStatement(!0,null)):
(this.sourceBlock_.setOutput(!0,null),this.sourceBlock_.setPreviousStatement(!1),this.sourceBlock_.setNextStatement(!1));this.sourceBlock_.setParams(a)}),"ACTION").appendField(new Blockly.FieldDropdown(a,function(a){this.sourceBlock_.setParams(a)}),"SETTING");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},setParams:function(a){var b="";"set"===a||"read"===a?(b=a,a=parseInt(this.getFieldValue("SETTING"))):b=this.getFieldValue("ACTION");this.setTooltip(xbee_settings[a][2]);
this.getInput("SELECT")&&this.removeInput("SELECT");"set"===b?0!==xbee_settings[a][3].length&&("Min"===xbee_settings[a][3][0][0]?(this.appendDummyInput("SELECT").appendField("to").appendField(new Blockly.FieldTextInput("0",function(b){if(null===b)return this.sourceBlock_.setWarningText("WARNING: You cannot leave this block's value blank!"),null;b=b.replace(/O/ig,"0");b=b.replace(/,/g,"");b=parseFloat(b||0);if(isNaN(b))return this.sourceBlock_.setWarningText("WARNING: You must enter a number value!"),
null;b<xbee_settings[a][3][0][1]?this.sourceBlock_.setWarningText("WARNING: The value you entered is too small!\nAcceptable values are from "+xbee_settings[a][3][0][1]+" to "+xbee_settings[a][3][1][1]+"."):b>xbee_settings[a][3][1][1]?this.sourceBlock_.setWarningText("WARNING: The value you entered is too large!\nAcceptable values are from "+xbee_settings[a][3][0][1]+" to "+xbee_settings[a][3][1][1]+"."):this.sourceBlock_.setWarningText(null);return String(b)}),"VALUE"),xbee_settings[a][4]&&this.setFieldValue(xbee_settings[a][4].toString(),
"VALUE")):"Bitfield"!==xbee_settings[a][3][0][0]&&"Length"!==xbee_settings[a][3][0][0]&&(this.appendDummyInput("SELECT").appendField("to").appendField(new Blockly.FieldDropdown(xbee_settings[a][3]),"VALUE"),xbee_settings[a][4]&&this.setFieldValue(xbee_settings[a][4].toString(),"VALUE"))):xbee_settings[a][5]&&"%s"!==xbee_settings[a][5]&&(this.appendDummyInput("SELECT").appendField("as").appendField(new Blockly.FieldDropdown([["text","%s"],["a decimal number","%d"],["a hexadecimal number","%x"],["a binary number",
"%b"]]),"VALUE"),this.setFieldValue(xbee_settings[a][5].toString(),"VALUE"))}};Blockly.propc.xbee_configure=function(){return"// XBee configure is not yet ready and working"};Blockly.Blocks||(Blockly.Blocks={});Blockly.Blocks.joystick_input_yaxis={helpUrl:Blockly.MSG_JOYSTICK_HELPURL,init:function(){this.setTooltip(Blockly.MSG_JOYSTICK_INPUT_YAXIS_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Joystick y-axis A/D").appendField(new Blockly.FieldDropdown([["0","0"],["1","1"],["2","2"],["3","3"]]),"PINY");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.joystick_input_yaxis=function(){var a=this.getFieldValue("PINY");this.disabled||(Blockly.propc.definitions_["include abvolts"]='#include "abvolts.h"');return["ad_in("+a+") * 100 / 4096",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.joystick_input_xaxis={helpUrl:Blockly.MSG_JOYSTICK_HELPURL,init:function(){this.setTooltip(Blockly.MSG_JOYSTICK_INPUT_XAXIS_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Joystick x-axis A/D").appendField(new Blockly.FieldDropdown([["0","0"],["1","1"],["2","2"],["3","3"]]),"PINX");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.joystick_input_xaxis=function(){var a=this.getFieldValue("PINX");this.disabled||(Blockly.propc.definitions_["include abvolts"]='#include "abvolts.h"');return["ad_in("+a+") * 100 / 4096",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.sensor_ping={helpUrl:Blockly.MSG_PING_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SENSOR_PING_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Ping))) distance in").appendField(new Blockly.FieldDropdown([["inches","_inches"],["cm","_cm"]]),"UNIT").appendField("PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.sensor_ping=function(){var a=this.getFieldValue("PIN"),b=this.getFieldValue("UNIT");this.disabled||(Blockly.propc.definitions_["include ping"]='#include "ping.h"');return["ping"+b+"("+a+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.PIR_Sensor={helpUrl:Blockly.MSG_PIR_HELPURL,init:function(){this.setTooltip(Blockly.MSG_PIR_SENSOR_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("PIR Sensor PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN");this.setNextStatement(!1,null);this.setPreviousStatement(!1,null);this.setOutput(!0,"Number")}};Blockly.propc.PIR_Sensor=function(){return["input("+this.getFieldValue("PIN")+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.sound_impact_run={helpUrl:Blockly.MSG_SOUND_IMPACT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SOUND_IMPACT_RUN_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Sound Impact initialize PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN");this.setInputsInline(!0);this.setNextStatement(!0,null);this.setPreviousStatement(!0,"Block")}};
Blockly.propc.sound_impact_run=function(){var a=this.getTitleValue("PIN");this.disabled||(Blockly.propc.definitions_.sound_impact='#include "soundimpact.h"',Blockly.propc.setups_.sound_impact="int *__soundimpactcog = soundImpact_run("+a+");\n");return""};
Blockly.Blocks.sound_impact_get={helpUrl:Blockly.MSG_SOUND_IMPACT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SOUND_IMPACT_GET_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Sound Impact get count");this.setNextStatement(!1,null);this.setPreviousStatement(!1,null);this.setOutput(!0,"Number")},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Sound Impact initialize")?this.setWarningText("WARNING: You must use a sound impact sensor\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.sound_impact_get=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Sound Impact initialize")?"// ERROR: Missing sound impact sensor initialize block!":["soundImpact_getCount()",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.sound_impact_end={helpUrl:Blockly.MSG_SOUND_IMPACT_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SOUND_IMPACT_END_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Sound Impact close");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Sound Impact initialize")?this.setWarningText("WARNING: You must use a sound impact sensor\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.sound_impact_end=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Sound Impact initialize")?"// ERROR: Missing sound impact sensor initialize block!":"soundImpact_end(__soundimpactcog);\n"};
Blockly.Blocks.colorpal_enable={helpUrl:Blockly.MSG_COLORPAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_COLORPAL_ENABLE_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("ColorPal initialize PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital,function(a){this.sourceBlock_.onPinSet(a)}),"IO_PIN");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.colorPalPin=this.getFieldValue("IO_PIN");this.onPinSet()},onchange:function(a){this.colorPalPin=
this.getFieldValue("IO_PIN");if(a.oldXml||a.xml)this.onPinSet(null)},onPinSet:function(a){var b=this.colorPalPin;this.colorPalPin=a;for(var c=Blockly.getMainWorkspace().getAllBlocks(),d=0;d<c.length;d++){var e=c[d].colorpalPins,f=c[d].onchange;e&&a?(e.call(c[d],b,a),f&&f.call(c[d],{xml:!0})):e&&e.call(c[d])}}};
Blockly.propc.colorpal_enable=function(){var a=this.getFieldValue("IO_PIN");this.disabled||(Blockly.propc.definitions_.colorpal='#include "colorpal.h"',Blockly.propc.global_vars_["colorpal"+a]="colorPal *cpal"+a+";",Blockly.propc.setups_["colorpal"+a]="cpal"+a+" = colorPal_open("+a+");");return""};
Blockly.Blocks.colorpal_get_colors_raw={helpUrl:Blockly.MSG_COLORPAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_COLORPAL_GET_COLORS_RAW_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("ColorPal raw colors store R in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"R_STORAGE");this.appendDummyInput().appendField("G in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"G_STORAGE");this.appendDummyInput().appendField("B in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"B_STORAGE");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.cp_pins=[];this.warnFlag=0;this.colorpalPins()},mutationToDom:function(){var a=document.createElement("mutation");this.getInput("CPIN")&&a.setAttribute("cpin",this.getFieldValue("CP_PIN"));a.setAttribute("pinmenu",JSON.stringify(this.cp_pins));return a},domToMutation:function(a){var b=a.getAttribute("cpin");this.cp_pins=JSON.parse(a.getAttribute("pinmenu"));"null"===b&&(b=null);this.getInput("CPIN")&&
this.removeInput("CPIN");b&&(this.appendDummyInput("CPIN").appendField("PIN").appendField(new Blockly.FieldDropdown(this.cp_pins),"CP_PIN"),this.setFieldValue(b,"CP_PIN"))},colorpalPins:function(a,b){var c="-1";0<this.cp_pins.length&&(c=this.cp_pins[0][0]);this.cp_pins.length=0;this.getInput("CPIN")&&(c=this.getFieldValue("CP_PIN"));this.updateCpin();this.getInput("CPIN")&&this.removeInput("CPIN");1<this.cp_pins.length&&(this.appendDummyInput("CPIN").appendField("PIN").appendField(new Blockly.FieldDropdown(this.cp_pins),
"CP_PIN"),c===a||null===a?this.setFieldValue(b,"CP_PIN"):this.getInput("CPIN")&&"-1"!==c&&this.setFieldValue(c,"CP_PIN"))},updateCpin:function(){for(var a=Blockly.getMainWorkspace().getAllBlocks(),b=this.cp_pins.length=0;b<a.length;b++)if("colorpal_enable"===a[b].type){var c=a[b].colorPalPin||a[b].getFieldValue("IO_PIN");c&&this.cp_pins.push([c,c])}this.cp_pins=uniq_fast(this.cp_pins)},getVars:function(){return[this.getFieldValue("R_STORAGE"),this.getFieldValue("G_STORAGE"),this.getFieldValue("B_STORAGE")]},
renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("R_STORAGE"))?this.setFieldValue(b,"R_STORAGE"):Blockly.Names.equals(a,this.getFieldValue("G_STORAGE"))?this.setFieldValue(b,"G_STORAGE"):Blockly.Names.equals(a,this.getFieldValue("B_STORAGE"))&&this.setFieldValue(b,"B_STORAGE")},onchange:function(a){if(a.oldXml||a.type===Blockly.Events.CREATE||"CP_PIN"===a.name&&a.blockId===this.id||0<this.warnFlag)if(a=Blockly.getMainWorkspace().getAllBlocks(),-1===a.toString().indexOf("ColorPal initialize"))this.setWarningText("WARNING: You must use a ColorPal\ninitialize block at the beginning of your program!");
else if(this.setWarningText(null),this.warnFlag--,this.getInput("CPIN")){for(var b="",c=0;c<a.length;c++)"colorpal_enable"===a[c].type&&(b+=(a[c].colorPalPin||a[c].getFieldValue("IO_PIN"))+",");-1===b.indexOf(this.getFieldValue("CP_PIN"))&&(this.setWarningText("WARNING: You must use choose a new PIN for this block!"),this.warnFlag=3*a.length)}}};
Blockly.propc.colorpal_get_colors_raw=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("ColorPal initialize"))return"// ERROR: Missing colorPal initialize block!";var a=Blockly.propc.variableDB_.getName(this.getFieldValue("R_STORAGE"),Blockly.Variables.NAME_TYPE),b=Blockly.propc.variableDB_.getName(this.getFieldValue("G_STORAGE"),Blockly.Variables.NAME_TYPE),c=Blockly.propc.variableDB_.getName(this.getFieldValue("B_STORAGE"),Blockly.Variables.NAME_TYPE),d="0";0<this.cp_pins.length&&
(d=this.cp_pins[0][0]);this.getInput("CPIN")&&(d=this.getFieldValue("CP_PIN"));return"colorPal_getRGB(cpal"+d+", &"+a+", &"+b+", &"+c+");"};
Blockly.Blocks.colorpal_get_colors={helpUrl:Blockly.MSG_COLORPAL_HELPURL,init:function(){this.setTooltip(Blockly.MSG_COLORPAL_GET_COLORS_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("ColorPal store color in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"COLOR");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.cp_pins=[];this.warnFlag=0;this.colorpalPins()},mutationToDom:Blockly.Blocks.colorpal_get_colors_raw.mutationToDom,
domToMutation:Blockly.Blocks.colorpal_get_colors_raw.domToMutation,colorpalPins:Blockly.Blocks.colorpal_get_colors_raw.colorpalPins,updateCpin:Blockly.Blocks.colorpal_get_colors_raw.updateCpin,onchange:Blockly.Blocks.colorpal_get_colors_raw.onchange,getVars:function(){return[this.getFieldValue("COLOR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("COLOR"))&&this.setFieldValue(b,"COLOR")}};
Blockly.propc.colorpal_get_colors=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("ColorPal initialize"))return"// ERROR: Missing colorPal initialize block!";var a=Blockly.propc.variableDB_.getName(this.getFieldValue("COLOR"),Blockly.Variables.NAME_TYPE);this.disabled||(Blockly.propc.global_vars_.colorpal_rr="int cpRR = 0;",Blockly.propc.global_vars_.colorpal_gg="int cpGG = 0;",Blockly.propc.global_vars_.colorpal_bb="int cpBB = 0;");var b="0";0<this.cp_pins.length&&
(b=this.cp_pins[0][0]);this.getInput("CPIN")&&(b=this.getFieldValue("CP_PIN"));return"colorPal_getRGB(cpal"+b+", &cpRR, &cpGG, &cpBB);\n\t"+a+" = colorPalRRGGBB(cpRR, cpGG, cpBB);"};
Blockly.Blocks.fp_scanner_init={helpUrl:Blockly.MSG_FPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_FPS_INIT_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Fingerprint Scanner initialize RX").appendField(new Blockly.FieldDropdown(profile["default"].digital),"RXPIN").appendField("TX").appendField(new Blockly.FieldDropdown(profile["default"].digital),"TXPIN");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,
null)}};Blockly.propc.fp_scanner_init=function(){var a=this.getFieldValue("RXPIN"),b=this.getFieldValue("TXPIN");this.disabled||(Blockly.propc.global_vars_.fpScannerObj="fpScanner *fpScan;",Blockly.propc.definitions_.fpScannerDef='#include "fingerprint.h"',Blockly.propc.setups_.fpScanner="fpScan = fingerprint_open("+b+", "+a+");");return""};
Blockly.Blocks.fp_scanner_add={helpUrl:Blockly.MSG_FPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_FPS_ADD_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Fingerprint Scanner").appendField(new Blockly.FieldDropdown([["capture and save to","ADD"],["delete capture for","DEL"],["delete all captures","ALL"]],function(a){this.sourceBlock_.setAction_({ACTION:a})}),"ACTION");this.appendValueInput("USER").setCheck("Number").appendField("ID");this.setInputsInline(!0);
this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("ACTION");a.setAttribute("action",b);return a},domToMutation:function(a){a=a.getAttribute("action");this.setAction_({ACTION:a})},setAction_:function(a){var b=this.getInput("USER");"ALL"!==a.ACTION?b||this.appendValueInput("USER").setCheck("Number").appendField("ID"):b&&this.removeInput("USER")},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Fingerprint Scanner initialize")?
this.setWarningText("WARNING: You must use a Fingerprint Scanner\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.fp_scanner_add=function(){var a=this.getFieldValue("ACTION"),b="1";"ALL"!==a&&(b=Blockly.propc.valueToCode(this,"USER",Blockly.propc.NONE)||"1");var c="";-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Fingerprint Scanner initialize")?c="// ERROR: Fingerprint Scanner is not initialized!\n":("ADD"===a&&(c="fingerprint_add(fpScan, "+b+", 3, 0);\n"),"DEL"===a&&(c="fingerprint_deleteUser(fpScan, "+b+");\n"),"ALL"===a&&(c="fingerprint_deleteUser(fpScan, 0);\n"));return c};
Blockly.Blocks.fp_scanner_scan={helpUrl:Blockly.MSG_FPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_FPS_SCAN_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Fingerprint Scanner").appendField(new Blockly.FieldDropdown([["scan and identify","SCAN"],["scan and compare","COMP"],["count number of IDs","COUNT"]],function(a){this.sourceBlock_.setAction_({ACTION:a})}),"ACTION");this.setInputsInline(!0);this.setOutput(!0,"Number")},mutationToDom:function(){var a=
document.createElement("mutation"),b=this.getFieldValue("ACTION");a.setAttribute("action",b);return a},domToMutation:function(a){a=a.getAttribute("action");this.setAction_({ACTION:a})},setAction_:function(a){var b=this.getInput("USER");"COMP"===a.ACTION?b||this.appendValueInput("USER").setCheck("Number").appendField("to ID"):b&&this.removeInput("USER")},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Fingerprint Scanner initialize")?this.setWarningText("WARNING: You must use a Fingerprint Scanner\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};
Blockly.propc.fp_scanner_scan=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Fingerprint Scanner initialize"))return"// ERROR: Fingerprint Scanner is not initialized!\n";var a=this.getFieldValue("ACTION"),b="1";"COMP"===a&&(b=Blockly.propc.valueToCode(this,"USER",Blockly.propc.NONE)||"1");var c="0";"fpScanner *fpScan;"===Blockly.propc.global_vars_.fpScannerObj&&("SCAN"===a&&(Blockly.propc.global_vars_.fpScannerFunc="int fingerScanner(int __u) {int r;\nfingerprint_scan(fpScan, __u, &r);\nif (__u != 0 && r != 0) return 1;\n else return r;}",c=
"fingerScanner(0)"),"COMP"===a&&(Blockly.propc.global_vars_.fpScannerFunc="int fingerScanner(int __u) {int r;\nfingerprint_scan(fpScan, __u, &r);\nif (__u != 0 && r != 0) return 1;\n else return r;}",c="fingerScanner("+b+")"),"COUNT"===a&&(c="fingerprint_countUsers(fpScan)"));return[c,Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.MX2125_acceleration_xaxis={helpUrl:Blockly.MSG_MEMSIC_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MX2125_ACCELERATION_XAXIS_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Memsic acceleration x-axis PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PINX");this.setNextStatement(!1,null);this.setPreviousStatement(!1,null);this.setOutput(!0,"Number")}};
Blockly.propc.MX2125_acceleration_xaxis=function(){this.disabled||(Blockly.propc.definitions_.include_mx2125='#include "mx2125.h"');return["mx_accel("+this.getFieldValue("PINX")+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.MX2125_acceleration_yaxis={helpUrl:Blockly.MSG_MEMSIC_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MX2125_ACCELERATION_YAXIS_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Memsic acceleration y-axis PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PINY");this.setNextStatement(!1,null);this.setPreviousStatement(!1,null);this.setOutput(!0,"Number")}};
Blockly.propc.MX2125_acceleration_yaxis=function(){this.disabled||(Blockly.propc.definitions_.include_mx2125='#include "mx2125.h"');return["mx_accel("+this.getFieldValue("PINY")+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.MX2125_rotation={helpUrl:Blockly.MSG_MEMSIC_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MX2125_ROTATION_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Memsic rotation x-axis PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PINX").appendField("y-axis PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PINY");this.setInputsInline(!0);this.setNextStatement(!1,null);this.setPreviousStatement(!1,
null);this.setOutput(!0,"Number")}};Blockly.propc.MX2125_rotation=function(){this.disabled||(Blockly.propc.definitions_.include_mx2125='#include "mx2125.h"');return["mx_rotate("+this.getFieldValue("PINX")+", "+this.getFieldValue("PINY")+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.MX2125_tilt_xaxis={helpUrl:Blockly.MSG_MEMSIC_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MX2125_TILT_XAXIS_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Memsic tilt x-axis PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PINX");this.setNextStatement(!1,null);this.setPreviousStatement(!1,null);this.setOutput(!0,"Number")}};
Blockly.propc.MX2125_tilt_xaxis=function(){this.disabled||(Blockly.propc.definitions_.include_mx2125='#include "mx2125.h"');return["mx_tilt("+this.getFieldValue("PINX")+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.MX2125_tilt_yaxis={helpUrl:Blockly.MSG_MEMSIC_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MX2125_TILT_YAXIS_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Memsic tilt y-axis PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PINY");this.setNextStatement(!1,null);this.setPreviousStatement(!1,null);this.setOutput(!0,"Number")}};
Blockly.propc.MX2125_tilt_yaxis=function(){this.disabled||(Blockly.propc.definitions_.include_mx2125='#include "mx2125.h"');return["mx_tilt("+this.getFieldValue("PINY")+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.MMA7455_init={helpUrl:Blockly.MSG_ACCELEROMETER_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MMA7455_INIT_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Accelerometer initialize CS").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PINZ").appendField("DATA").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PINX").appendField("CLK").appendField(new Blockly.FieldDropdown(profile["default"].digital),
"PINY");this.setInputsInline(!1);this.setNextStatement(!0,null);this.setPreviousStatement(!0,"Block")}};Blockly.propc.MMA7455_init=function(){var a=this.getFieldValue("PINX"),b=this.getFieldValue("PINY"),c=this.getFieldValue("PINZ");this.disabled||(Blockly.propc.definitions_.include_mma7455='#include "mma7455.h"',Blockly.propc.global_vars_.mma_7455_tempVars="short int __tmpX, __tmpY, __tmpZ;",Blockly.propc.setups_.mma_7455="MMA7455_init("+a+", "+b+", "+c+");\n");return""};
Blockly.Blocks.MMA7455_acceleration={helpUrl:Blockly.MSG_ACCELEROMETER_HELPURL,init:function(){this.setTooltip(Blockly.MSG_MMA7455_ACCELERATION_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Accelerometer store x-axis in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"X_VAR").appendField(" y-axis in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"Y_VAR").appendField(" z-axis in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"Z_VAR");this.setInputsInline(!1);this.setNextStatement(!0,null);this.setPreviousStatement(!0,"Block")},getVars:function(){return[this.getFieldValue("X_VAR"),this.getFieldValue("Y_VAR"),this.getFieldValue("Z_VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("X_VAR"))?this.setFieldValue(b,"X_VAR"):Blockly.Names.equals(a,this.getFieldValue("Y_VAR"))?this.setFieldValue(b,"Y_VAR"):Blockly.Names.equals(a,this.getFieldValue("Z_VAR"))&&this.setFieldValue(b,"Z_VAR")},onchange:function(){-1===
Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Accelerometer initialize")?this.setWarningText("WARNING: You must use an Accelerometer\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.MMA7455_acceleration=function(){var a="";if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Accelerometer initialize"))a+="// ERROR: Missing Accelerometer initialize block!";else{var b=Blockly.propc.variableDB_.getName(this.getFieldValue("X_VAR"),Blockly.Variables.NAME_TYPE),c=Blockly.propc.variableDB_.getName(this.getFieldValue("Y_VAR"),Blockly.Variables.NAME_TYPE),d=Blockly.propc.variableDB_.getName(this.getFieldValue("Z_VAR"),Blockly.Variables.NAME_TYPE);a=a+"MMA7455_getxyz10(&__tmpX, &__tmpY, &__tmpZ);\n"+
(b+" = (int) __tmpX;\n"+c+" = (int) __tmpY;\n"+d+" = (int) __tmpZ;\n")}return a};
Blockly.Blocks.HMC5883L_init={helpUrl:Blockly.MSG_COMPASS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_HMC5883L_INIT_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Compass initialize SCL").appendField(new Blockly.FieldDropdown(profile["default"].digital),"SCL");this.appendDummyInput().appendField("SDA").appendField(new Blockly.FieldDropdown(profile["default"].digital),"SDA");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,
null)}};Blockly.propc.HMC5883L_init=function(){var a=this.getFieldValue("SCL"),b=this.getFieldValue("SDA");this.disabled||(Blockly.propc.definitions_.HMC5883L='#include "compass3d.h"',Blockly.propc.setups_.HMC5883L="i2c *compass_bus = i2c_newbus("+a+", "+b+", 0);\n\tcompass_init(compass_bus);");return""};
Blockly.Blocks.HMC5883L_read={helpUrl:Blockly.MSG_COMPASS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_HMC5883L_READ_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Compass heading store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"HEADING");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVars:function(){return[this.getFieldValue("HEADING")]},renameVar:function(a,b){Blockly.Names.equals(a,
this.getFieldValue("HEADING"))&&this.setFieldValue(b,"HEADING")},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Compass initialize")?this.setWarningText("WARNING: You must use a Compass\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.HMC5883L_read=function(){var a="";if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Compass initialize"))a+="// ERROR: Missing Compass initialize block!";else{var b=Blockly.propc.variableDB_.getName(this.getFieldValue("HEADING"),Blockly.Variables.NAME_TYPE);this.disabled||(Blockly.propc.global_vars_.compass_vars="int __compX, __compY, __compZ;\nfloat __compH;\n");a=a+"compass_read(bus, &__compX, &__compY, &__compZ);\n\t__compH = atan2(((float) __compY), (((float) __compX)) * 180.0/PI;\n\tif(__compH < 0.0) __compH = (360.0 + __compH);\n"+
("\t"+b+" = (int) __compH;\n")}return a};
Blockly.Blocks.lsm9ds1_init={helpUrl:Blockly.MSG_IMU_HELPURL,init:function(){this.setTooltip(Blockly.MSG_LSM9DS1_INIT_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("IMU initialize SCL").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN_SCL").appendField("SDIO").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN_SDIO").appendField("CS_AG").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN_CSAG").appendField("CS_M").appendField(new Blockly.FieldDropdown(profile["default"].digital),
"PIN_CSM");this.setInputsInline(!1);this.setNextStatement(!0,null);this.setPreviousStatement(!0,"Block")}};
Blockly.propc.lsm9ds1_init=function(){var a=this.getFieldValue("PIN_SCL"),b=this.getFieldValue("PIN_SDIO"),c=this.getFieldValue("PIN_CSAG"),d=this.getFieldValue("PIN_CSM");this.disabled||(Blockly.propc.definitions_.include_lsm9ds1='#include "lsm9ds1.h"',Blockly.propc.setups_.lsm9ds1_init="imu_init("+a+", "+b+", "+c+", "+d+");\n",Blockly.propc.global_vars_.lsm9ds1_vars="float __imuX, __imuY, __imuZ, __compI;\n");return""};
Blockly.Blocks.lsm9ds1_mag_calibrate={helpUrl:Blockly.MSG_IMU_HELPURL,init:function(){this.setTooltip(Blockly.MSG_LSM9DS1_INIT_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("IMU calibrate magnetometer");this.setInputsInline(!0);this.setNextStatement(!0,null);this.setPreviousStatement(!0,"Block")},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("IMU initialize")?this.setWarningText("WARNING: You must use an IMU\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.lsm9ds1_mag_calibrate=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("IMU initialize")?"// ERROR: Missing IMU initialize block!":"high(26);high(27);imu_calibrateMag();low(26);low(27);"};
Blockly.Blocks.lsm9ds1_read={helpUrl:Blockly.MSG_IMU_HELPURL,init:function(){this.setTooltip(Blockly.MSG_LSM9DS1_READ_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("IMU read").appendField(new Blockly.FieldDropdown([["accelerometer (100ths of g's)","Accel"],["gyroscope (100ths of deg/s)","Gyro"],["magnetometer (100ths of gauss)","Mag"]]),"SENSOR").appendField("store X-axis in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"X_VAR").appendField(" y-axis in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"Y_VAR").appendField(" z-axis in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"Z_VAR");this.setInputsInline(!1);this.setNextStatement(!0,null);this.setPreviousStatement(!0,"Block")},getVars:function(){return[this.getFieldValue("X_VAR"),this.getFieldValue("Y_VAR"),this.getFieldValue("Z_VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("X_VAR"))?this.setFieldValue(b,"X_VAR"):Blockly.Names.equals(a,this.getFieldValue("Y_VAR"))?this.setFieldValue(b,
"Y_VAR"):Blockly.Names.equals(a,this.getFieldValue("Z_VAR"))&&this.setFieldValue(b,"Z_VAR")},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("IMU initialize")?this.setWarningText("WARNING: You must use an IMU\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.lsm9ds1_read=function(){var a="";if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("IMU initialize"))a+="// ERROR: Missing IMU initialize block!";else{var b=this.getFieldValue("SENSOR"),c=Blockly.propc.variableDB_.getName(this.getFieldValue("X_VAR"),Blockly.Variables.NAME_TYPE),d=Blockly.propc.variableDB_.getName(this.getFieldValue("Y_VAR"),Blockly.Variables.NAME_TYPE),e=Blockly.propc.variableDB_.getName(this.getFieldValue("Z_VAR"),Blockly.Variables.NAME_TYPE);a=a+
("imu_read"+b+"Calculated(&__imuX, &__imuY, &__imuZ);\n")+(c+" = (int) (100.0 * __imuX);\n")+(d+" = (int) (100.0 * __imuY);\n");a+=e+" = (int) (100.0 * __imuZ);\n"}return a};
Blockly.Blocks.lsm9ds1_tilt={helpUrl:Blockly.MSG_IMU_HELPURL,init:function(){this.setTooltip(Blockly.MSG_LSM9DS1_TILT_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("IMU tilt").appendField(new Blockly.FieldDropdown([["x-axis","X"],["y-axis","Y"],["z-axis","Z"]],function(a){this.sourceBlock_.setAxes_({ACTION:a})}),"G_AXIS").appendField("points up/down");this.appendDummyInput("TILT1").appendField("store y-tilt in","A1").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"VAR1");this.appendDummyInput("TILT2").appendField("z-tilt in","A2").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VAR2");this.setInputsInline(!0);this.setNextStatement(!0,null);this.setPreviousStatement(!0,"Block")},mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("G_AXIS");a.setAttribute("action",b);return a},domToMutation:function(a){a=a.getAttribute("action");this.setAxes_({ACTION:a})},setAxes_:function(a){var b=this.getFieldValue("VAR1"),
c=this.getFieldValue("VAR2");this.removeInput("TILT1");this.removeInput("TILT2");"X"===a.ACTION?(this.appendDummyInput("TILT1").appendField("store y-tilt in","A1").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VAR1"),this.appendDummyInput("TILT2").appendField("z-tilt in","A2").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VAR2")):"Y"===a.ACTION?(this.appendDummyInput("TILT1").appendField("store x-tilt in","A1").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"VAR1"),this.appendDummyInput("TILT2").appendField("z-tilt in","A2").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VAR2")):(this.appendDummyInput("TILT1").appendField("store x-tilt in","A1").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VAR1"),this.appendDummyInput("TILT2").appendField("y-tilt in","A2").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VAR2"));this.setFieldValue(b,"VAR1");this.setFieldValue(c,"VAR2")},getVars:function(){return[this.getFieldValue("VAR1"),
this.getFieldValue("VAR2")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR1"))&&this.setFieldValue(b,"VAR1");Blockly.Names.equals(a,this.getFieldValue("VAR2"))&&this.setFieldValue(b,"VAR2")},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("IMU initialize")?this.setWarningText("WARNING: You must use an IMU\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.lsm9ds1_tilt=function(){var a="";if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("IMU initialize"))a+="// ERROR: Missing IMU initialize block!";else{var b="__imu"+this.getFieldValue("A1")[6].toUpperCase(),c="__imu"+this.getFieldValue("A2")[0].toUpperCase(),d="__imu"+this.getFieldValue("G_AXIS"),e=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR1"),Blockly.Variables.NAME_TYPE),f=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR2"),Blockly.Variables.NAME_TYPE);
a=a+"imu_readAccelCalculated(&__imuX, &__imuY, &__imuZ);\n"+(e+" = (int) (atan2("+b+", "+d+") * 180.0/PI);\n")+(f+" = (int) (atan2("+c+", "+d+") * 180.0/PI);\n")}return a};
Blockly.Blocks.lsm9ds1_heading={helpUrl:Blockly.MSG_IMU_HELPURL,init:function(){this.setTooltip(Blockly.MSG_LSM9DS1_HEADING_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("IMU heading").appendField(new Blockly.FieldDropdown([["z-axis points forward","__imuZ"],["z-axis points backward","(-1.0*__imuZ)"],["y-axis points forward","__imuY"],["y axis points backward","(-1.0*__imuY)"],["x-axis points forward","(-1.0*__imuX)"],["x-axis points backward","__imuX"]],
function(a){this.sourceBlock_.setAxes_({ACTION:a})}),"FB_AXIS").appendField(" ");this.appendDummyInput("MENU2").appendField(new Blockly.FieldDropdown([["y-axis points left","__imuY"],["y-axis points right","(-1.0*__imuY)"],["x-axis points left","(-1.0*__imuX)"],["x-axis points right","__imuX"]]),"LR_AXIS").appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VAR");this.setInputsInline(!0);this.setNextStatement(!0,null);this.setPreviousStatement(!0,"Block")},
mutationToDom:function(){var a=document.createElement("mutation"),b=this.getFieldValue("FB_AXIS");a.setAttribute("action",b);return a},domToMutation:function(a){a=a.getAttribute("action");this.setAxes_({ACTION:a})},setAxes_:function(a){var b=this.getFieldValue("VAR");this.removeInput("MENU2");var c=a.ACTION[a.ACTION.length-1];")"===c&&(c=a.ACTION[a.ACTION.length-2]);"X"===c?this.appendDummyInput("MENU2").appendField(new Blockly.FieldDropdown([["y-axis points left","__imuY"],["y-axis points right",
"(-1.0*__imuY)"],["z-axis points left","__imuZ"],["z-axis points right","(-1.0*__imuZ)"]]),"LR_AXIS").appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VAR"):"Y"===c?this.appendDummyInput("MENU2").appendField(new Blockly.FieldDropdown([["x-axis points left","(-1.0*__imuX)"],["x-axis points right","__imuX"],["z-axis points left","__imuZ"],["z-axis points right","(-1.0*__imuZ)"]]),"LR_AXIS").appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),
"VAR"):this.appendDummyInput("MENU2").appendField(new Blockly.FieldDropdown([["y-axis points left","__imuY"],["y-axis points right","(-1.0*__imuY)"],["x-axis points left","(-1.0*__imuX)"],["x-axis points right","__imuX"]]),"LR_AXIS").appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"VAR");this.setFieldValue(b,"VAR")},getVars:function(){return[this.getFieldValue("VAR")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("VAR"))&&this.setFieldValue(b,
"VAR")},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("IMU initialize")?this.setWarningText("WARNING: You must use an IMU\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.lsm9ds1_heading=function(){var a="";if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("IMU initialize"))a+="// ERROR: Missing IMU initialize block!";else{var b=this.getFieldValue("FB_AXIS"),c=this.getFieldValue("LR_AXIS"),d=Blockly.propc.variableDB_.getName(this.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE);a=a+"imu_readMagCalculated(&__imuX, &__imuY, &__imuZ);\n"+("__compI = atan2("+c+", "+b+") * 180.0/PI;\n")+"if(__compI < 0.0) __compI = (360.0 + __compI);\n"+
(d+" = (int) __compI;\n")}return a};
Blockly.Blocks.GPS_init={helpUrl:Blockly.MSG_GPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GPS_INIT_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("GPS module initialize TX").appendField(new Blockly.FieldDropdown(profile["default"].digital),"TXPIN").appendField("baud").appendField(new Blockly.FieldDropdown([["9600","9600"],["2400","2400"],["4800","4800"],["19200","19200"]]),"BAUD");this.setNextStatement(!0,null);this.setPreviousStatement(!0,"Block")}};
Blockly.propc.GPS_init=function(){var a=this.getFieldValue("TXPIN"),b=this.getFieldValue("BAUD");this.disabled||(Blockly.propc.definitions_["include GPS"]='#include "gps.h"');return"gps_open("+a+", 32, "+b+");\npause(100);"};
Blockly.Blocks.GPS_hasFix={helpUrl:Blockly.MSG_GPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GPS_HASFIX_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("GPS has valid satellite fix");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.GPS_hasFix=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?"// ERROR: Missing GPS initalize block!":["gps_fixValid()",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.GPS_latitude={helpUrl:Blockly.MSG_GPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GPS_LAT_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("GPS latitude (\u00b5\u00b0)");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.GPS_latitude=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?"// ERROR: Missing GPS initalize block!":["(int) (gps_latitude() * 1000000)",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.GPS_longitude={helpUrl:Blockly.MSG_GPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GPS_LONG_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("GPS longitude (\u00b5\u00b0)");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.GPS_longitude=function(){Blockly.propc.definitions_["include GPS"]='#include "gps.h"';return["(int) (gps_longitude() * 1000000)",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.GPS_heading={helpUrl:Blockly.MSG_GPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GPS_HEADING_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("GPS heading (\u00b0)");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.GPS_heading=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?"// ERROR: Missing GPS initalize block!":["(int) gps_heading()",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.GPS_altitude={helpUrl:Blockly.MSG_GPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GPS_ALTITUDE_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("GPS altitude (cm)");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.GPS_altitude=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?"// ERROR: Missing GPS initalize block!":["(int) (gps_altitude() * 100)",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.GPS_satsTracked={helpUrl:Blockly.MSG_GPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GPS_SATS_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("GPS number of satellites");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.GPS_satsTracked=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?"// ERROR: Missing GPS initalize block!":["gps_satsTracked()",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.GPS_velocity={helpUrl:Blockly.MSG_GPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GPS_VELOCITY_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("GPS speed in").appendField(new Blockly.FieldDropdown([["mph","MPH"],["knots","KNOTS"]]),"VELOCITYUNITS");this.setOutput(!0,"Number");this.setNextStatement(!1,null);this.setPreviousStatement(!1,null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?
this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};Blockly.propc.GPS_velocity=function(){return-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?"// ERROR: Missing GPS initalize block!":["(int) gps_velocity("+this.getFieldValue("VELOCITYUNITS")+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.GPS_date_time={helpUrl:Blockly.MSG_GPS_HELPURL,init:function(){this.setTooltip(Blockly.MSG_GPS_VELOCITY_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("GPS current ").appendField(new Blockly.FieldDropdown([["year","GPS_UNIT_YEAR"],["month","GPS_UNIT_MONTH"],["day","GPS_UNIT_DAY"],["hour","GPS_UNIT_HOUR"],["minute","GPS_UNIT_MINUTE"],["second","GPS_UNIT_SECOND"]],function(a){var b=this.sourceBlock_.getField("ZONE_LABEL"),c=this.sourceBlock_.getField("ZONE_VALUE");
"GPS_UNIT_HOUR"===a||"GPS_UNIT_DAY"===a||"GPS_UNIT_MONTH"===a||"GPS_UNIT_YEAR"===a?(b.setVisible(!0),c.setVisible(!0)):(b.setVisible(!1),c.setVisible(!1));this.sourceBlock_.render()}),"TIME_UNIT").appendField("time zone","ZONE_LABEL").appendField(new Blockly.FieldDropdown([["UTC+0","0"],["UTC-1","-1"],["UTC-2","-2"],["UTC-3","-3"],["UTC-4","-4"],["UTC-5","-5"],["UTC-6","-6"],["UTC-7","-7"],["UTC-8","-8"],["UTC-9","-9"],["UTC-10","-10"],["UTC-11","-11"],["UTC-12","-12"],["UTC+14","14"],["UTC+13","13"],
["UTC+12","12"],["UTC+11","11"],["UTC+10","10"],["UTC+9","9"],["UTC+8","8"],["UTC+7","7"],["UTC+6","6"],["UTC+5","5"],["UTC+4","4"],["UTC+3","3"],["UTC+2","2"],["UTC+1","1"]]),"ZONE_VALUE");this.setOutput(!0,"Number");this.setNextStatement(!1,null);this.setPreviousStatement(!1,null);this.getField("ZONE_LABEL").setVisible(!1);this.getField("ZONE_VALUE").setVisible(!1)},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("unit",this.getFieldValue("TIME_UNIT"));return a},
domToMutation:function(a){a=a.getAttribute("unit");"GPS_UNIT_HOUR"===a||"GPS_UNIT_DAY"===a||"GPS_UNIT_MONTH"===a||"GPS_UNIT_YEAR"===a?(this.getField("ZONE_LABEL").setVisible(!0),this.getField("ZONE_VALUE").setVisible(!0)):(this.getField("ZONE_LABEL").setVisible(!1),this.getField("ZONE_VALUE").setVisible(!1))},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize")?this.setWarningText("WARNING: You must use a GPS module\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};
Blockly.propc.GPS_date_time=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("GPS module initialize"))return"// ERROR: Missing GPS initalize block!";var a=this.getFieldValue("TIME_UNIT"),b="0";if("GPS_UNIT_HOUR"===a||"GPS_UNIT_DAY"===a||"GPS_UNIT_MONTH"===a||"GPS_UNIT_YEAR"===a)b=this.getFieldValue("ZONE_VALUE");Blockly.propc.definitions_["include GPS"]='#include "gps.h"';Blockly.propc.definitions_.GPS_dateTime_units="#define GPS_UNIT_YEAR     1\n#define GPS_UNIT_DAY      2\n#define GPS_UNIT_MONTH    3\n#define GPS_UNIT_HOUR     4\n#define GPS_UNIT_MINUTE   5\n#define GPS_UNIT_SECOND   6\n";this.disabled||
(Blockly.propc.methods_.gps_time_func="int gps_dateTimeByUnit(char __u, int __z){int __gpsTime = gps_rawTime();int __gpsDate = gps_rawDate();\nint __monthDays[13] = {31, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};\nint __gpsDay = __gpsDate / 10000;\nint __gpsMonth = __gpsDate / 100 - (__gpsDate / 10000) * 100;\nint __gpsYear = __gpsDate - (__gpsDate / 100) * 100;\nif (__gpsYear % 4 == 0) __monthDays[2] = 29;\nint __gpsHour = __gpsTime / 10000 + __z;\nif (__gpsHour < 0) { __gpsHour += 24; __gpsDay--; }\nif (__gpsHour > 23) { __gpsHour -= 24; __gpsDay++; }\nif (__gpsDay > __monthDays[__gpsMonth]) { __gpsDay = 1; __gpsMonth++; }\nif (__gpsDay < 1) { __gpsMonth--; __gpsDay = __monthDays[__gpsMonth]; }\nif (__gpsMonth < 1) { __gpsYear--; __gpsMonth = 12; }\nif (__gpsMonth > 12) { __gpsYear++; __gpsMonth = 1; }\nswitch (__u){case GPS_UNIT_DAY:return __gpsDay;break;\ncase GPS_UNIT_MONTH:\nreturn __gpsMonth;break;\ncase GPS_UNIT_YEAR:\nreturn __gpsYear;break;\ncase GPS_UNIT_HOUR:\nreturn __gpsHour;break;\ncase GPS_UNIT_MINUTE:\nreturn __gpsTime / 100 - (__gpsTime / 10000) * 100;break;\ncase GPS_UNIT_SECOND:\nreturn __gpsTime - (__gpsTime / 100) * 100;break;\ndefault:\nreturn -1;break;}}",
Blockly.propc.method_declarations_.gps_time_func="int gps_dateTimeByUnit(char __u, int __z);\n");return["gps_dateTimeByUnit("+a+", "+b+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.rfid_get={helpUrl:Blockly.MSG_RFID_HELPURL,init:function(){this.setTooltip(Blockly.MSG_RFID_GET_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("RFID store reading in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"BUFFER");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVars:function(){return[this.getFieldValue("BUFFER")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("BUFFER"))&&
this.setFieldValue(b,"BUFFER")},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("RFID initialize")?this.setWarningText("WARNING: You must use an RFID\ninitialize block at the beginning of your program!"):this.setWarningText(null)}};
Blockly.propc.rfid_get=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("RFID initialize"))return"// ERROR: Missing RFID initalize block!";var a=Blockly.propc.variableDB_.getName(this.getFieldValue("BUFFER"),Blockly.Variables.NAME_TYPE);this.disabled||(Blockly.propc.global_vars_.rfid_buffer="char *rfidBfr;",Blockly.propc.definitions_.rfidser='#include "rfidser.h"');return'rfidBfr = rfid_get(rfid, 500);\n\tsscan(&rfidBfr[2], "%x", &'+a+");\n\tif("+a+" == 237) "+a+" = 0;"};
Blockly.Blocks.rfid_disable={helpUrl:Blockly.MSG_RFID_HELPURL,init:function(){this.setTooltip(Blockly.MSG_RFID_DISABLE_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("RFID").appendField(new Blockly.FieldDropdown([["disable","DISABLE"],["enable","ENABLE"]]),"ACTION");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("RFID initialize")?this.setWarningText("WARNING: You must use an RFID\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.rfid_disable=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("RFID initialize"))return"// ERROR: Missing RFID initalize block!";var a=this.getFieldValue("ACTION");this.disabled||(Blockly.propc.definitions_.rfidser='#include "rfidser.h"');return"ENABLE"===a?"rfid_enable(rfid);":"rfid_disable(rfid);"};
Blockly.Blocks.rfid_enable={helpUrl:Blockly.MSG_RFID_HELPURL,init:function(){this.setTooltip(Blockly.MSG_RFID_ENABLE_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("RFID initialize EN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN_IN");this.appendDummyInput().appendField("SOUT").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN_OUT");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,
null)}};Blockly.propc.rfid_enable=function(){if(!this.disbaled){var a=this.getFieldValue("PIN_IN"),b=this.getFieldValue("PIN_OUT");Blockly.propc.definitions_.rfidser='#include "rfidser.h"';Blockly.propc.global_vars_.rfidser="rfidser *rfid;";Blockly.propc.setups_.rfidser_setup="rfid = rfid_open("+b+","+a+");"}return""};
Blockly.Blocks.rfid_close={helpUrl:Blockly.MSG_RFID_HELPURL,init:function(){this.setTooltip(Blockly.MSG_RFID_CLOSE_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("RFID close");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},onchange:function(){-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("RFID initialize")?this.setWarningText("WARNING: You must use an RFID\ninitialize block at the beginning of your program!"):
this.setWarningText(null)}};Blockly.propc.rfid_close=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("RFID initialize"))return"// ERROR: Missing RFID initalize block!";this.disabled||(Blockly.propc.definitions_.rfidser='#include "rfidser.h"');return"rfidser_close(rfid);\n"};
Blockly.Blocks.sirc_get={helpUrl:Blockly.MSG_SONY_REMOTE_HELPURL,init:function(){this.setTooltip(Blockly.MSG_SIRC_GET_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Sony Remote value received from PIN").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN");this.setInputsInline(!0);this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number")}};
Blockly.propc.sirc_get=function(){var a=this.getFieldValue("PIN");this.disabled||(Blockly.propc.definitions_.sirc='#include "sirc.h"',Blockly.propc.setups_.sirc="sirc_setTimeout(70);\n");return["sirc_button("+a+")",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.keypad_initialize={helpUrl:Blockly.MSG_KEYPAD_HELPURL,init:function(){this.setTooltip(Blockly.MSG_KEYPAD_INIT_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("4x4 Keypad initialize PINS left").appendField(new Blockly.FieldDropdown(profile["default"].digital),"P0").appendField(new Blockly.FieldDropdown(profile["default"].digital),"P1").appendField(new Blockly.FieldDropdown(profile["default"].digital),"P2").appendField(new Blockly.FieldDropdown(profile["default"].digital),
"P3").appendField("|").appendField(new Blockly.FieldDropdown(profile["default"].digital),"P4").appendField(new Blockly.FieldDropdown(profile["default"].digital),"P5").appendField(new Blockly.FieldDropdown(profile["default"].digital),"P6").appendField(new Blockly.FieldDropdown(profile["default"].digital),"P7").appendField("right");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.keypadPins_="0,1,2,3,4,5,6,7,";this.onchange()},onchange:function(){this.keypadPins_=
"";for(var a=0;8>a;a++)this.keypadPins_+=this.getFieldValue("P"+a)+",";a=Blockly.getMainWorkspace().getAllBlocks();for(var b=0;b<a.length;b++){var c=a[b].keypadSetPins;c&&c.call(a[b])}}};
Blockly.propc.keypad_initialize=function(){this.disabled||(Blockly.propc.methods_["4x4keypad"]="int keypad_button(int __a, int __b, int __c, int __d, int __e, int __f, int __g, int __h) {int __press = 0, __k, __j, __keytimeout = CNT + CLKFREQ/10;\nint __keypad[] = {__a, __b, __c, __d, __e, __f, __g, __h};\nint __keyval[] = {1,4,7,15,2,5,8,0,3,6,9,14,10,11,12,13};\nwhile(CNT < __keytimeout) {for(__k = 4; __k < 8; __k++) input(__keypad[__k]);\nfor(__k = 0; __k < 4; __k++) {for(__j = 0; __j < 4; __j++) low(__keypad[__j]);\nhigh(__keypad[__k]);\nfor(__j = 4; __j < 8; __j++) {__press = input(__keypad[__j]);\nif(__press) break;}if(__press) return __keyval[__k | ((__j - 4) << 2)];}}return -1;}",Blockly.propc.method_declarations_["4x4keypad"]=
"int keypad_button(int __a, int __b, int __c, int __d, int __e, int __f, int __g, int __h);\n");return""};
Blockly.Blocks.keypad_read={helpUrl:Blockly.MSG_KEYPAD_HELPURL,init:function(){this.setTooltip(Blockly.MSG_KEYPAD_READ_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("4x4 Keypad").appendField("","PINS");this.getField("PINS").setVisible(!1);this.setOutput(!0,null);this.keypadSetPins_="";this.keypadSetPins()},onchange:function(){this.keypadSetPins()},keypadSetPins:function(){for(var a="WARNING: You must use a 4X4 Keypad initialize\nblock at the beginning of your program!",
b=Blockly.getMainWorkspace().getAllBlocks(),c=0;c<b.length;c++){var d=b[c].keypadPins_;if(d){this.keypadSetPins_=d;this.setFieldValue(d,"PINS");a=null;break}}this.setWarningText(a)}};Blockly.propc.keypad_read=function(){if(-1===Blockly.getMainWorkspace().getAllBlocks().toString().indexOf("Keypad initialize"))return"// ERROR: Missing Keypad initalize block!";var a=this.getFieldValue("PINS");a=a.substr(0,a.length-1);return["keypad_button("+a+")",Blockly.propc.ORDER_ATOMIC]};Blockly.Blocks||(Blockly.Blocks={});
Blockly.Blocks.heb_toggle_led={init:function(){this.setColour(colorPalette.getColor("functions"));this.appendDummyInput().appendField("LED set state of").appendField(new Blockly.FieldDropdown([["0 - P27","0"],["1 - P26","1"],["2 - P25","2"],["3 - P15","3"],["4 - P16","4"],["5 - P17","5"]]),"LED_#").appendField("state").appendField(new Blockly.FieldDropdown([["on/high","1"],["off/low","0"]]),"STATE");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_toggle_led=function(){var a=this.getFieldValue("LED_#"),b=this.getFieldValue("STATE");Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"led("+a+", "+b+");\n"};
Blockly.Blocks.heb_toggle_led_open={init:function(){this.setColour(colorPalette.getColor("functions"));this.appendDummyInput().appendField("LED set state of");this.appendValueInput("LED_NUM").setCheck("Number");this.appendValueInput("LED_STATE").appendField("state").setCheck("Number");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_toggle_led_open=function(){var a=Blockly.propc.valueToCode(this,"LED_NUM",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"LED_STATE",Blockly.propc.ORDER_NONE);Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"led("+a+", "+b+");\n"};
Blockly.Blocks.heb_color_val={init:function(){this.setColour(colorPalette.getColor("programming"));var a=new Blockly.FieldColour("#FFFFFF");a.setColours("#FFFFFF #FFFF00 #00FFFF #FF00FF #000000 #00FF00 #0000FF #FF0000".split(" ")).setColumns(4);this.appendDummyInput().appendField("color (Badge)").appendField(a,"RGB");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.heb_color_val=function(){var a=this.getFieldValue("RGB").replace(/F/g,"1").replace(/f/g,"1").replace("#","");return["0b"+a[0]+a[2]+a[4],Blockly.propc.ORDER_NONE]};
Blockly.Blocks.heb_set_led_rgb={init:function(){this.setColour(colorPalette.getColor("functions"));this.appendValueInput("RGB").setCheck("Number").appendField("RGB LED set state of").appendField(new Blockly.FieldDropdown([["left LED","L"],["right LED","R"],["both LEDs","B"]]),"SIDE").appendField("to");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_set_led_rgb=function(){var a=this.getFieldValue("SIDE"),b=Blockly.propc.valueToCode(this,"RGB",Blockly.propc.ORDER_NONE),c="";"B"===a&&(a=b,c="s");Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"rgb"+c+"("+a+", "+b+");\n"};
Blockly.Blocks.heb_print_numeric_var={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("VALUE").setCheck("Number").appendField("Display print number");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_print_numeric_var=function(){var a=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_NONE);Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return a.startsWith('"')&&a.endsWith('"')?"oledprint("+a+");\n":'oledprint("%d", '+a+");\n"};
Blockly.Blocks.heb_print_string_var={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("VALUE").setCheck("String").appendField("Display print text");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_print_string_var=function(){var a=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_NONE);Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"oledprint("+a+");\n"};
Blockly.Blocks.heb_cursor_position_large={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Display set font size").appendField(new Blockly.FieldDropdown([["Large","LARGE"],["Small","SMALL"]]),"SIZE");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_cursor_position_large=function(){var a=this.getFieldValue("SIZE");Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"text_size("+a+");\n"};
Blockly.Blocks.heb_cursor_position_small={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("COLS").setCheck("Number").appendField("Display set cursor column");this.appendValueInput("ROWS").setCheck("Number").appendField("row");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_cursor_position_small=function(){var a=Blockly.propc.valueToCode(this,"COLS",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"ROWS",Blockly.propc.ORDER_NONE);Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"cursor("+a+", "+b+");\n"};
Blockly.Blocks.heb_oled_point={init:function(){var a=new Blockly.FieldColour("#FFFFFF");a.setColours(["#FFFFFF","#000000"]).setColumns(2);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("X0").setCheck("Number").appendField("Display draw pixel at (x)");this.appendValueInput("Y0").setCheck("Number").appendField("(y)");this.appendDummyInput().appendField("color").appendField(a,"COLOR");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_oled_point=function(){var a=Blockly.propc.valueToCode(this,"X0",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"Y0",Blockly.propc.ORDER_NONE),c=this.getFieldValue("COLOR");Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"point("+a+", "+b+", "+("#000000"===c?"0":"1")+");\n"};
Blockly.Blocks.heb_oled_line={init:function(){var a=new Blockly.FieldColour("#FFFFFF");a.setColours(["#FFFFFF","#000000"]).setColumns(2);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("X0").setCheck("Number").appendField("Display draw line from 1 (x)");this.appendValueInput("Y0").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");this.appendValueInput("X1").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("to 2 (x)");this.appendValueInput("Y1").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");
this.appendDummyInput().setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("color").appendField(a,"COLOR");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_oled_line=function(){var a=Blockly.propc.valueToCode(this,"X0",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"Y0",Blockly.propc.ORDER_NONE),c=Blockly.propc.valueToCode(this,"X1",Blockly.propc.ORDER_NONE),d=Blockly.propc.valueToCode(this,"Y1",Blockly.propc.ORDER_NONE),e=this.getFieldValue("COLOR");Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"line("+a+", "+b+", "+c+", "+d+", "+("#000000"===e?"0":
"1")+");\n"};
Blockly.Blocks.heb_oled_circle={init:function(){var a=new Blockly.FieldColour("#FFFFFF");a.setColours(["#FFFFFF","#000000"]).setColumns(2);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("X0").setCheck("Number").appendField("Display draw circle at (x)");this.appendValueInput("Y0").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");this.appendValueInput("R").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("radius");this.appendDummyInput().setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("filled").appendField(new Blockly.FieldCheckbox("TRUE"),"FILL");
this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("color").appendField(a,"COLOR");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_oled_circle=function(){var a=Blockly.propc.valueToCode(this,"X0",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"Y0",Blockly.propc.ORDER_NONE),c=Blockly.propc.valueToCode(this,"R",Blockly.propc.ORDER_NONE),d=this.getFieldValue("FILL"),e=this.getFieldValue("COLOR");Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"circle"+("TRUE"===d?"Filled":"")+"("+a+", "+b+", "+c+", "+("#000000"===e?"0":"1")+");\n"};
Blockly.Blocks.heb_oled_box={init:function(){var a=new Blockly.FieldColour("#FFFFFF");a.setColours(["#FFFFFF","#000000"]).setColumns(2);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("X0").setCheck("Number").appendField("Display draw rectangle at 1 (x)");this.appendValueInput("Y0").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");this.appendValueInput("W").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("width");this.appendValueInput("H").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("height");
this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("filled").appendField(new Blockly.FieldCheckbox("TRUE"),"FILL");this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("color").appendField(a,"COLOR");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_oled_box=function(){var a=Blockly.propc.valueToCode(this,"X0",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"Y0",Blockly.propc.ORDER_NONE),c=Blockly.propc.valueToCode(this,"W",Blockly.propc.ORDER_NONE),d=Blockly.propc.valueToCode(this,"H",Blockly.propc.ORDER_NONE),e=this.getFieldValue("FILL"),f=this.getFieldValue("COLOR");Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"box"+("TRUE"===e?"Filled":
"")+"("+a+", "+b+", ("+a+"+"+c+"-1),"+("("+b+"+"+d+"-1), "+("#000000"===f?"0":"1")+");\n")};
Blockly.Blocks.heb_oled_triangle={init:function(){var a=new Blockly.FieldColour("#FFFFFF");a.setColours(["#FFFFFF","#000000"]).setColumns(2);this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("X0").setCheck("Number").appendField("Display draw triangle from 1 (x)");this.appendValueInput("Y0").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");this.appendValueInput("X1").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("to 2 (x)");this.appendValueInput("Y1").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");
this.appendValueInput("X2").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("to 3 (x)");this.appendValueInput("Y2").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("(y)");this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("filled").appendField(new Blockly.FieldCheckbox("TRUE"),"FILL");this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("color").appendField(a,"COLOR");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,
null)}};
Blockly.propc.heb_oled_triangle=function(){var a=Blockly.propc.valueToCode(this,"X0",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"Y0",Blockly.propc.ORDER_NONE),c=Blockly.propc.valueToCode(this,"X1",Blockly.propc.ORDER_NONE),d=Blockly.propc.valueToCode(this,"Y1",Blockly.propc.ORDER_NONE),e=Blockly.propc.valueToCode(this,"X2",Blockly.propc.ORDER_NONE),f=Blockly.propc.valueToCode(this,"Y2",Blockly.propc.ORDER_NONE),g=this.getFieldValue("FILL"),h=this.getFieldValue("COLOR");Blockly.propc.definitions_.badgetools='#include "badgetools.h"';
Blockly.propc.setups_.badgetools="badge_setup();";return"triangle"+("TRUE"===g?"Filled":"")+"("+a+", "+b+", "+c+", "+(d+", "+e+", "+f+", "+("#000000"===h?"0":"1")+");\n")};Blockly.Blocks.heb_clear_screen={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Display clear screen");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_clear_screen=function(){Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"clear();\n"};Blockly.Blocks.heb_rotate={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("Display rotate 180\u00b0");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_rotate=function(){Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"rotate180();\n"};Blockly.Blocks.heb_ir_send_signal={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("MESSAGE").setCheck("String").appendField("IR send text");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_ir_send_signal=function(){var a=Blockly.propc.valueToCode(this,"MESSAGE",Blockly.propc.ORDER_NONE);Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"send("+a+");\n"};
Blockly.Blocks.heb_ir_read_signal={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("IR receive store message in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"BUFFER").appendField("length in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_GET_ITEM),"LENGTH");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setInputsInline(!0)},getVars:function(){return[this.getFieldValue("BUFFER"),
this.getFieldValue("LENGTH")]},renameVar:function(a,b){Blockly.Names.equals(a,this.getFieldValue("BUFFER"))&&this.setFieldValue(b,"BUFFER");Blockly.Names.equals(a,this.getFieldValue("LENGTH"))&&this.setFieldValue(b,"LENGTH")}};
Blockly.propc.heb_ir_read_signal=function(){var a=Blockly.propc.variableDB_.getName(this.getFieldValue("BUFFER"),Blockly.Variables.NAME_TYPE),b=Blockly.propc.variableDB_.getName(this.getFieldValue("LENGTH"),Blockly.Variables.NAME_TYPE);Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";Blockly.propc.vartype_[a]="char";Blockly.propc.varlength_[a]=128;return b+"= receive("+a+");\n"};
Blockly.Blocks.heb_ir_clear_buffer={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput().appendField("IR clear buffer");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};Blockly.propc.heb_ir_clear_buffer=function(){Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"irclear();\n"};
Blockly.Blocks.heb_badge_eeprom_store={init:function(){this.setColour(colorPalette.getColor("input"));this.appendValueInput("CONTACT").setCheck("String").appendField("EEPROM store contact");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_badge_eeprom_store=function(){var a=Blockly.propc.valueToCode(this,"CONTACT",Blockly.propc.ORDER_NONE);Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return'store(new char[]{"'+a+'"});\n'};
Blockly.Blocks.heb_badge_eeprom_is_stored={init:function(){this.setColour(colorPalette.getColor("input"));this.appendValueInput("CONTACT").setCheck("Number").appendField("EEPROM contact");this.appendDummyInput().appendField("already stored");this.setOutput(!0,"Number");this.setInputsInline(!0);this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.heb_badge_eeprom_is_stored=function(){var a=Blockly.propc.valueToCode(this,"CONTACT",Blockly.propc.ORDER_NONE);Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return['stored(new char[]{"'+a+'"})',Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.heb_badge_eeprom_retrieve={init:function(){this.setColour(colorPalette.getColor("input"));this.appendValueInput("INDEX").setCheck("Number").appendField("EEPROM get contact at index");this.appendDummyInput().appendField("store in").appendField(new Blockly.FieldVariable(Blockly.LANG_VARIABLES_SET_ITEM),"BUFFER");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},getVarType:function(){return"String"},getVars:function(){return[this.getFieldValue("BUFFER")]},renameVar:function(a,
b){Blockly.Names.equals(a,this.getFieldValue("BUFFER"))&&this.setFieldValue(b,"BUFFER")}};
Blockly.propc.heb_badge_eeprom_retrieve=function(){var a=Blockly.propc.valueToCode(this,"INDEX",Blockly.propc.ORDER_NONE),b=Blockly.propc.variableDB_.getName(this.getFieldValue("BUFFER"),Blockly.Variables.NAME_TYPE);Blockly.propc.methods_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax) {if(__cVal < __cMin) __cVal = __cMin;\nif(__cVal > __cMax) __cVal = __cMax;\nreturn __cVal;\n}\n";Blockly.propc.method_declarations_.constrain_function="int constrain(int __cVal, int __cMin, int __cMax);\n";
Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"retrieve("+b+", constrain("+a+", 0, contacts_count() - 1));\n"};Blockly.Blocks.heb_count_contacts={init:function(){this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("EEPROM count contacts");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.heb_count_contacts=function(){Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return["contacts_count()",Blockly.propc.ORDER_NONE]};Blockly.Blocks.heb_erase_all_contacts={init:function(){this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("EEPROM erase all contacts");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_erase_all_contacts=function(){Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return"contacts_eraseAll();\n"};
Blockly.Blocks.heb_badge_axis_acceleration={init:function(){this.setColour(colorPalette.getColor("io"));this.appendDummyInput().appendField("Accelerometer get").appendField(new Blockly.FieldDropdown([["x-axis","AX"],["y-axis","AY"],["z-axis","AZ"]]),"AXIS");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.heb_badge_axis_acceleration=function(){var a=this.getFieldValue("AXIS");Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return["accel("+a+")",Blockly.propc.ORDER_NONE]};Blockly.Blocks.heb_badge_was_shaken={init:function(){this.setColour(colorPalette.getColor("io"));this.appendDummyInput().appendField("Accelerometer was shaken?");this.setOutput(!0,"Number");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null)}};
Blockly.propc.heb_badge_was_shaken=function(){Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";return["accel_shaken()",Blockly.propc.ORDER_NONE]};
Blockly.Blocks.heb_touchpad_status={init:function(){this.setColour(colorPalette.getColor("io"));this.appendDummyInput().appendField("Touchpad is").appendField(new Blockly.FieldDropdown([["0 - P27","0"],["1 - P26","1"],["2 - P25","2"],["3 - P15","3"],["4 - P16","4"],["5 - P17","5"],["6 - Center Button","6"],["Any button","-1"]]),"TOUCHPAD").appendField("pressed?");this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number")}};
Blockly.propc.heb_touchpad_status=function(){var a=this.getFieldValue("TOUCHPAD");Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";var b="";return["-1"===a?b+"buttons()":b+("button("+a+")"),Blockly.propc.ORDER_NONE]};
Blockly.Blocks.heb_text_to_speech_say={init:function(){this.setColour(colorPalette.getColor("heb"));this.appendValueInput("STRING").setCheck("String").appendField("TTS say");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_text_to_speech_say=function(){var a=Blockly.propc.valueToCode(this,"STRING",Blockly.propc.ORDER_NONE);Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";Blockly.propc.definitions_.TTS='#include "text2speech.h"';Blockly.propc.global_vars_.TTS="talk *tts_talk;";Blockly.propc.setups_.TTS="tts_talk = talk_run(9, 10);\ntalk_set_speaker(tts_talk, 1, 100);";return"talk_say(tts_talk, "+a+");\n"};
Blockly.Blocks.heb_text_to_speech_spell={init:function(){this.setColour(colorPalette.getColor("heb"));this.appendValueInput("STRING").setCheck("String").appendField("TTS spell");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)}};
Blockly.propc.heb_text_to_speech_spell=function(){var a=Blockly.propc.valueToCode(this,"STRING",Blockly.propc.ORDER_NONE);Blockly.propc.definitions_.badgetools='#include "badgetools.h"';Blockly.propc.setups_.badgetools="badge_setup();";Blockly.propc.definitions_.TTS='#include "text2speech.h"';Blockly.propc.global_vars_.TTS="talk *tts_talk;";Blockly.propc.setups_.TTS="tts_talk = talk_run(9, 10);\ntalk_set_speaker(tts_talk, 1, 100);";return"talk_spell(tts_talk, "+a+");\n"};Blockly.Blocks.scribbler_loop={init:function(){this.appendDummyInput().appendField("loop");this.appendStatementInput("LOOP");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(colorPalette.getColor("programming"));this.setHelpUrl(Blockly.MSG_S3_SIMPLE_CONTROL_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_LOOP_TOOLTIP)}};
Blockly.propc.scribbler_loop=function(){var a=Blockly.propc.statementToCode(this,"LOOP");Blockly.propc.INFINITE_LOOP_TRAP&&(a=Blockly.propc.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+a);return"while(1) {\n"+a+"}\n"};
Blockly.Blocks.scribbler_limited_loop={init:function(){this.appendDummyInput().appendField("loop").appendField(new Blockly.FieldTextInput("10",Blockly.FieldTextInput.numberValidator),"LOOP_COUNT").appendField("times");this.appendStatementInput("LOOP");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(colorPalette.getColor("programming"));this.setHelpUrl(Blockly.MSG_S3_SIMPLE_CONTROL_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_LIMITED_LOOP_TOOLTIP)}};
Blockly.propc.scribbler_limited_loop=function(){var a=Blockly.propc.statementToCode(this,"LOOP");Blockly.propc.INFINITE_LOOP_TRAP&&(a=Blockly.propc.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+this.id+"'")+a);return"for (int __n = 0; __n < "+(this.getFieldValue("LOOP_COUNT")||"0")+"; __n++) {\n"+a+"}\n"};
Blockly.Blocks.scribbler_exit_loop={init:function(){this.appendDummyInput().appendField("exit loop");this.setPreviousStatement(!0,"Block");this.setColour(colorPalette.getColor("programming"));this.setHelpUrl(Blockly.MSG_S3_SIMPLE_CONTROL_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_EXIT_LOOP_TOOLTIP)}};Blockly.propc.scribbler_exit_loop=function(){return"break;\n"};
Blockly.Blocks.scribbler_simple_wait={init:function(){this.appendDummyInput().appendField("wait").appendField(new Blockly.FieldTextInput("5",Blockly.FieldTextInput.numberValidator),"WAITTIME").appendField(new Blockly.FieldDropdown([["seconds","1000"],["tenths of a second","100"],["milliseconds","1"]]),"TIMESCALE");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("programming"));this.setHelpUrl(Blockly.MSG_S3_SIMPLE_CONTROL_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_SIMPLE_WAIT_TOOLTIP);
this.onchange()},onchange:function(){var a=Number(this.getFieldValue("WAITTIME")||"1");1===Number(this.getFieldValue("TIMESCALE"))&&15E3<a?this.setWarningText("WARNING: If the units are in milliseconds,\nthe wait time must be less than 15000"):this.setWarningText(null)}};Blockly.propc.scribbler_simple_wait=function(){var a=this.getFieldValue("WAITTIME")||"1",b=this.getFieldValue("TIMESCALE");return"1"!==b?"for(int __i = 0; __i < "+a+"; __i++) pause("+b+");\n":"pause("+a+");\n"};
Blockly.Blocks.scribbler_wait={init:function(){this.appendValueInput("WAITTIME","Number").appendField("N,0,0,0","RANGEVALS0").appendField("wait").setCheck("Number");this.appendDummyInput().appendField(new Blockly.FieldDropdown([["seconds","1000"],["tenths of a second","100"],["milliseconds","1"]],function(a){this.sourceBlock_.newUnit(a)}),"TIMESCALE");this.getField("RANGEVALS0").setVisible(!1);this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("programming"));
this.setHelpUrl(Blockly.MSG_S3_CONTROL_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_WAIT_TOOLTIP)},newUnit:function(a){var b=this.getInput("WAITTIME").connection.targetBlock(),c="N,0,0,0";"1"!==a&&(c="R,0,15000,0");this.setFieldValue(c,"RANGEVALS0");b&&b.onchange&&b.onchange.call(b)}};
Blockly.propc.scribbler_wait=function(){var a=Blockly.propc.valueToCode(this,"WAITTIME",Blockly.propc.ORDER_NONE)||"1",b=this.getFieldValue("TIMESCALE");return"1"!==b?"for(int __i = 0; __i < "+a+"; __i++) pause("+b+");\n":"pause("+a+");\n"};
Blockly.Blocks.scribbler_if_line={init:function(){this.appendDummyInput().appendField("if the Scribbler").appendField(new Blockly.FieldDropdown([["is","IS"],["is not","IS_NOT"]],function(a){this.sourceBlock_.checkForWas(a)}),"LINE_CONDITION").appendField("over").appendField(new Blockly.FieldDropdown([["the center","CENTER"],["the left edge","LEFT"],["the right edge","RIGHT"],["any part","DETECTED"]]),"LINE_POSITION").appendField("of a").appendField(new Blockly.FieldDropdown([["black","BLACK"],["white",
"WHITE"]]),"LINE_COLOR").appendField("line");this.appendStatementInput("IF_LINE").appendField();this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_SIMPLE_SENSORS_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_IF_LINE_TOOLTIP)},checkForWas:function(a){"WAS"===a||"WAS_NOT"===a?(this.setColour("#FF8800"),this.setWarningText('WARNING: "was" ans "was not" conditions have been deprecated.\nPlease choose "is" or "is not".\nUse a variable block to keep track of the state of this sensor instead.')):
(this.setColour(colorPalette.getColor("input")),this.setWarningText(null))},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("state",this.getFieldValue("LINE_CONDITION"));return a},domToMutation:function(a){a=a.getAttribute("state");this.checkForWas(a)}};
Blockly.propc.scribbler_if_line=function(){var a=this.getFieldValue("LINE_CONDITION"),b=this.getFieldValue("LINE_POSITION"),c=this.getFieldValue("LINE_COLOR");return"if(s3_simpleLine(S3_"+a+", S3_"+b+", S3_"+c+")) {\n"+Blockly.propc.statementToCode(this,"IF_LINE")+"\n}"};
Blockly.Blocks.scribbler_simple_line={init:function(){this.appendDummyInput().appendField("line sensor").appendField(new Blockly.FieldDropdown([["is","IS"],["is not","IS_NOT"]],function(a){this.sourceBlock_.checkForWas(a)}),"LINE_CONDITION").appendField("over").appendField(new Blockly.FieldDropdown([["the center","CENTER"],["the left edge","LEFT"],["the right edge","RIGHT"],["any part","DETECTED"]]),"LINE_POSITION").appendField("of a").appendField(new Blockly.FieldDropdown([["black","BLACK"],["white",
"WHITE"]]),"LINE_COLOR").appendField("line");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_LINE_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_IF_LINE_TOOLTIP)},checkForWas:function(a){"WAS"===a||"WAS_NOT"===a?(this.setColour("#FF8800"),this.setWarningText('WARNING: "was" ans "was not" conditions have been deprecated.\nPlease choose "is" or "is not".\nUse a variable block to keep track of the state of this sensor instead.')):(this.setColour(colorPalette.getColor("input")),
this.setWarningText(null))},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("state",this.getFieldValue("LINE_CONDITION"));return a},domToMutation:function(a){a=a.getAttribute("state");this.checkForWas(a)}};Blockly.propc.scribbler_simple_line=function(){var a=this.getFieldValue("LINE_CONDITION"),b=this.getFieldValue("LINE_POSITION"),c=this.getFieldValue("LINE_COLOR");return["s3_simpleLine(S3_"+a+", S3_"+b+", S3_"+c+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.scribbler_if_obstacle={init:function(){this.appendDummyInput().appendField("if an obstacle").appendField(new Blockly.FieldDropdown([["is","IS"],["is not","IS_NOT"]],function(a){this.sourceBlock_.checkForWas(a)}),"OBSTACLE_CONDITION").appendField(new Blockly.FieldDropdown([["in front of","CENTER"],["to the left of","LEFT"],["to the right of","RIGHT"],["detected by","DETECTED"]]),"OBSTACLE_POSITION").appendField("the Scribbler");this.appendStatementInput("IF_OBSTACLE").appendField();
this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_SIMPLE_SENSORS_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_IF_OBSTACLE_TOOLTIP)},checkForWas:function(a){void 0===a&&(a=this.getFieldValue("OBSTACLE_CONDITION"));"WAS"===a||"WAS_NOT"===a?(this.setColour("#FF8800"),this.setWarningText('WARNING: "was" ans "was not" conditions have been deprecated.\nPlease choose "is" or "is not".\nUse a variable block to keep track of the state of this sensor instead.')):
(this.setColour(colorPalette.getColor("input")),this.setWarningText(null))},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("state",this.getFieldValue("OBSTACLE_CONDITION"));return a},domToMutation:function(a){a=a.getAttribute("state");this.checkForWas(a)}};
Blockly.propc.scribbler_if_obstacle=function(){var a=this.getFieldValue("OBSTACLE_CONDITION"),b=this.getFieldValue("OBSTACLE_POSITION");return"if(s3_simpleObstacle(S3_"+a+", S3_"+b+")) {\n"+Blockly.propc.statementToCode(this,"IF_OBSTACLE")+"\n}"};
Blockly.Blocks.scribbler_simple_obstacle={init:function(){this.appendDummyInput().appendField("obstacle").appendField(new Blockly.FieldDropdown([["is","IS"],["is not","IS_NOT"]],function(a){this.sourceBlock_.checkForWas(a)}),"OBSTACLE_CONDITION").appendField("detected").appendField(new Blockly.FieldDropdown([["in front","CENTER"],["to the left","LEFT"],["to the right","RIGHT"],["on either side","DETECTED"]]),"OBSTACLE_POSITION");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("input"));
this.setHelpUrl(Blockly.MSG_S3_SIMPLE_SENSORS_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_IF_OBSTACLE_TOOLTIP)},checkForWas:function(a){"WAS"===a||"WAS_NOT"===a?(this.setColour("#FF8800"),this.setWarningText('WARNING: "was" ans "was not" conditions have been deprecated.\nPlease choose "is" or "is not".\nUse a variable block to keep track of the state of this sensor instead.')):(this.setColour(colorPalette.getColor("input")),this.setWarningText(null))},mutationToDom:function(){var a=document.createElement("mutation");
a.setAttribute("state",this.getFieldValue("OBSTACLE_CONDITION"));return a},domToMutation:function(a){a=a.getAttribute("state");this.checkForWas(a)}};Blockly.propc.scribbler_simple_obstacle=function(){var a=this.getFieldValue("OBSTACLE_CONDITION"),b=this.getFieldValue("OBSTACLE_POSITION");return["s3_simpleObstacle(S3_"+a+", S3_"+b+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.scribbler_if_light={init:function(){this.appendDummyInput().appendField("if the most light").appendField(new Blockly.FieldDropdown([["is","IS"],["is not","IS_NOT"]],function(a){this.sourceBlock_.checkForWas(a)}),"LIGHT_CONDITION").appendField(new Blockly.FieldDropdown([["in front","CENTER"],["to the left","LEFT"],["to the right","RIGHT"],["on all sides","DETECTED"]]),"LIGHT_POSITION").appendField("of the Scribbler");this.appendStatementInput("IF_LIGHT").appendField();this.setPreviousStatement(!0,
"Block");this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_SIMPLE_SENSORS_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_IF_LIGHT_TOOLTIP)},checkForWas:function(a){"WAS"===a||"WAS_NOT"===a?(this.setColour("#FF8800"),this.setWarningText('WARNING: "was" ans "was not" conditions have been deprecated.\nPlease choose "is" or "is not".\nUse a variable block to keep track of the state of this sensor instead.')):(this.setColour(colorPalette.getColor("input")),
this.setWarningText(null))},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("state",this.getFieldValue("LIGHT_CONDITION"));return a},domToMutation:function(a){a=a.getAttribute("state");this.checkForWas(a)}};Blockly.propc.scribbler_if_light=function(){var a=this.getFieldValue("LIGHT_CONDITION"),b=this.getFieldValue("LIGHT_POSITION");return"if(s3_simpleLight(S3_"+a+", S3_"+b+")) {\n"+Blockly.propc.statementToCode(this,"IF_LIGHT")+"\n}"};
Blockly.Blocks.scribbler_simple_light={init:function(){this.appendDummyInput().appendField("light sensed is").appendField(new Blockly.FieldDropdown([["brightest","IS"],["darkest","IS_NOT"]],function(a){this.sourceBlock_.checkForWas(a)}),"LIGHT_CONDITION").appendField(" ").appendField(new Blockly.FieldDropdown([["in front","CENTER"],["to the left","LEFT"],["to the right","RIGHT"]]),"LIGHT_POSITION");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_LIGHT_HELPURL);
this.setTooltip(Blockly.MSG_S3_SCRIBBLER_IF_LIGHT_TOOLTIP)},checkForWas:function(a){"WAS"===a||"WAS_NOT"===a?(this.setColour("#FF8800"),this.setWarningText('WARNING: "was" ans "was not" conditions have been deprecated.\nPlease choose "is" or "is not".\nUse a variable block to keep track of the state of this sensor instead.')):(this.setColour(colorPalette.getColor("input")),this.setWarningText(null))},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("state",this.getFieldValue("LIGHT_CONDITION"));
return a},domToMutation:function(a){a=a.getAttribute("state");this.checkForWas(a)}};Blockly.propc.scribbler_simple_light=function(){var a=this.getFieldValue("LIGHT_CONDITION"),b=this.getFieldValue("LIGHT_POSITION");return["s3_simpleLight(S3_"+a+", S3_"+b+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.scribbler_if_stalled={init:function(){this.appendDummyInput().appendField("if the Scribbler").appendField(new Blockly.FieldDropdown([["is","IS"],["is not","IS_NOT"]],function(a){this.sourceBlock_.checkForWas(a)}),"STALLED_CONDITION").appendField("stuck");this.appendStatementInput("IF_STALLED").appendField();this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_SIMPLE_SENSORS_HELPURL);
this.setTooltip(Blockly.MSG_S3_SCRIBBLER_IF_STALLED_TOOLTIP)},checkForWas:function(a){"WAS"===a||"WAS_NOT"===a?(this.setColour("#FF8800"),this.setWarningText('WARNING: "was" ans "was not" conditions have been deprecated.\nPlease choose "is" or "is not".\nUse a variable block to keep track of the state of this sensor instead.')):(this.setColour(colorPalette.getColor("input")),this.setWarningText(null))},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("state",this.getFieldValue("STALLED_CONDITION"));
return a},domToMutation:function(a){a=a.getAttribute("state");this.checkForWas(a)}};Blockly.propc.scribbler_if_stalled=function(){return"if(s3_simpleStalled(S3_"+this.getFieldValue("STALLED_CONDITION")+")) {\n"+Blockly.propc.statementToCode(this,"IF_STALLED")+"\n}"};
Blockly.Blocks.scribbler_if_button={init:function(){this.appendDummyInput().appendField("if the red button").appendField(new Blockly.FieldDropdown([["is","IS"],["is not","IS_NOT"]],function(a){this.sourceBlock_.checkForWas(a)}),"BUTTON_CONDITION").appendField("pressed");this.appendStatementInput("IF_BUTTON");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(colorPalette.getColor("input"))},checkForWas:function(a){"WAS"===a||"WAS_NOT"===a?(this.setColour("#FF8800"),
this.setWarningText('WARNING: "was" ans "was not" conditions have been deprecated.\nPlease choose "is" or "is not".\nUse a variable block to keep track of the state of this sensor instead.')):(this.setColour(colorPalette.getColor("input")),this.setWarningText(null))},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("state",this.getFieldValue("BUTTON_CONDITION"));return a},domToMutation:function(a){a=a.getAttribute("state");this.checkForWas(a)}};
Blockly.propc.scribbler_if_button=function(){return"if(s3_simpleButton(S3_"+this.getFieldValue("BUTTON_CONDITION")+")) {\n"+Blockly.propc.statementToCode(this,"IF_BUTTON")+"\n}"};
Blockly.Blocks.scribbler_if_random={init:function(){this.appendDummyInput().appendField("if a virtual coin flip is").appendField(new Blockly.FieldDropdown([["heads",""],["tails","_NOT"]]),"RANDOM_INVERT");this.appendStatementInput("IF_RANDOM");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0);this.setInputsInline(!0);this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_SIMPLE_SENSORS_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_IF_RANDOM_TOOLTIP)}};
Blockly.propc.scribbler_if_random=function(){return"if(s3_simpleRandom(S3_IS"+this.getFieldValue("RANDOM_INVERT")+")) {\n"+Blockly.propc.statementToCode(this,"IF_RANDOM")+"\n}"};
Blockly.Blocks.scribbler_drive={init:function(){this.appendDummyInput().appendField("drive").appendField(new Blockly.FieldDropdown([["forward",""],["backward","-"]]),"DRIVE_DIRECTION").appendField("and").appendField(new Blockly.FieldDropdown([["sharply to the left","SHARP_LEFT"],["gently to the left","GENTLE_LEFT"],["slightly to the left","SLIGHT_LEFT"],["straight","STRAIGHT"],["slightly to the right","SLIGHT_RIGHT"],["gently to the right","GENTLE_RIGHT"],["sharply to the right","SHARP_RIGHT"]]),
"DRIVE_ANGLE").appendField("at").appendField(new Blockly.FieldDropdown([["full","255"],["a quick","191"],["a gentle","127"],["a slow","63"]]),"DRIVE_SPEED").appendField("speed");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("io"));this.setHelpUrl(Blockly.MSG_S3_SIMPLE_ACTIONS_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_DRIVE_TOOLTIP)}};
Blockly.propc.scribbler_drive=function(){var a=this.getFieldValue("DRIVE_DIRECTION"),b=this.getFieldValue("DRIVE_ANGLE"),c=this.getFieldValue("DRIVE_SPEED");return"s3_simpleDrive(S3_"+b+", "+a+c+");\n"};
Blockly.Blocks.scribbler_spin={init:function(){this.appendDummyInput().appendField("rotate").appendField(new Blockly.FieldDropdown([["\u21bb",""],["\u21ba","-"]]),"SPIN_DIRECTION").appendField("for").appendField(new Blockly.FieldAngle(90),"SPIN_ANGLE").appendField("at").appendField(new Blockly.FieldDropdown([["full","15"],["a quick","7"],["a gentle","3"],["a slow","1"]]),"SPIN_SPEED").appendField("speed");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("io"));
this.setHelpUrl(Blockly.MSG_S3_SIMPLE_ACTIONS_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_SPIN_TOOLTIP)}};Blockly.propc.scribbler_spin=function(){var a=this.getFieldValue("SPIN_DIRECTION"),b=this.getFieldValue("SPIN_ANGLE"),c=this.getFieldValue("SPIN_SPEED");return"s3_simpleSpin("+a+b+", "+c+", 0);\n"};
Blockly.Blocks.scribbler_stop={init:function(){this.appendDummyInput().appendField("stop driving");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("io"));this.setHelpUrl(Blockly.MSG_S3_SIMPLE_ACTIONS_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_STOP_TOOLTIP)}};Blockly.propc.scribbler_stop=function(){return"s3_simpleStop();\n"};
Blockly.Blocks.scribbler_LED={init:function(){this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("change these LEDs:   ").appendField(new Blockly.FieldCheckbox("TRUE"),"LEFT_LED").appendField("  ").appendField(new Blockly.FieldCheckbox("TRUE"),"CENTER_LED").appendField("  ").appendField(new Blockly.FieldCheckbox("TRUE"),"RIGHT_LED").appendField("  ");var a=new Blockly.FieldColour("#000000"),b=new Blockly.FieldColour("#000000"),c=new Blockly.FieldColour("#000000");a.setColours(["#FF0000",
"#00FF00","#FF7F00","#000000"]).setColumns(2);b.setColours(["#FF0000","#00FF00","#FF7F00","#000000"]).setColumns(2);c.setColours(["#FF0000","#00FF00","#FF7F00","#000000"]).setColumns(2);this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("to these colors:  ").appendField(a,"LEFT_COLOR").appendField(b,"CENTER_COLOR").appendField(c,"RIGHT_COLOR").appendField(" ");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("io"));this.setHelpUrl(Blockly.MSG_S3_LEDS_HELPURL);
this.setTooltip(Blockly.MSG_S3_SCRIBBLER_LED_TOOLTIP)}};
Blockly.propc.scribbler_LED=function(){var a=this.getFieldValue("LEFT_COLOR"),b=this.getFieldValue("CENTER_COLOR"),c=this.getFieldValue("RIGHT_COLOR"),d="";"TRUE"===this.getFieldValue("LEFT_LED")&&(d+="s3_setLED(S3_LEFT, S3_COLOR_"+a.substr(1,6).toUpperCase()+");\n");"TRUE"===this.getFieldValue("CENTER_LED")&&(d+="s3_setLED(S3_CENTER, S3_COLOR_"+b.substr(1,6).toUpperCase()+");\n");"TRUE"===this.getFieldValue("RIGHT_LED")&&(d+="s3_setLED(S3_RIGHT, S3_COLOR_"+c.substr(1,6).toUpperCase()+");\n");return d};
Blockly.Blocks.scribbler_play={init:function(){this.appendDummyInput().appendField("play a").appendField(new Blockly.FieldDropdown([["soprano","4"],["tenor","8"],["middle","16"],["low","32"],["deep","64"]]),"NOTE_OCTAVE").appendField(new Blockly.FieldDropdown([["A\u266d","3322"],["A","3520"],["A\u266f/B\u266d","3729"],["B","3951"],["C","4186"],["C\u266f/D\u266d","4435"],["D","4699"],["D\u266f/E\u266d","4978"],["E","5274"],["F","5588"],["F\u266f/G\u266d","5920"],["G","6272"],["G\u266f","6645"]]),"NOTE_FREQUENCY").appendField("for a").appendField(new Blockly.FieldDropdown([["sixteenth",
"63"],["dotted sixteenth","94"],["eighth","125"],["dotted eighth","188"],["quarter","250"],["dotted quarter","375"],["half","500"],["dotted half","750"],["whole","1000"],["dotted whole","1500"]]),"NOTE_DURATION").appendField("note at a").appendField(new Blockly.FieldDropdown([["loud","50"],["medium","30"],["quiet","15"]]),"NOTE_VOLUME").appendField("volume");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("io"));this.setHelpUrl(Blockly.MSG_S3_SOUND_HELPURL);
this.setTooltip(Blockly.MSG_S3_SCRIBBLER_PLAY_TOOLTIP)}};Blockly.propc.scribbler_play=function(){var a=this.getFieldValue("NOTE_OCTAVE"),b=this.getFieldValue("NOTE_FREQUENCY"),c=this.getFieldValue("NOTE_DURATION"),d=this.getFieldValue("NOTE_VOLUME");return"s3_simplePlay(("+b+" / "+a+"), "+c+", "+d+");\n"};
Blockly.Blocks.move_motors={init:function(){this.appendDummyInput().appendField("drive at speeds of (%)");this.appendValueInput("LEFT_MOTOR_SPEED").appendField("R,-100,100,0","RANGEVALS0").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("left motor");this.appendValueInput("RIGHT_MOTOR_SPEED").appendField("R,-100,100,0","RANGEVALS1").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("right motor");this.appendValueInput("MOTOR_DURATION").appendField("R,0,15000,0","RANGEVALS2").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("for (milliseconds, 0 is continuous)",
"OPS");this.getField("RANGEVALS0").setVisible(!1);this.getField("RANGEVALS1").setVisible(!1);this.getField("RANGEVALS2").setVisible(!1);this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("io"));this.setHelpUrl(Blockly.MSG_S3_MOTORS_HELPURL);this.setTooltip(Blockly.MSG_S3_MOVE_MOTORS_TOOLTIP)}};
Blockly.propc.move_motors=function(){var a=Blockly.propc.valueToCode(this,"LEFT_MOTOR_SPEED",Blockly.propc.ORDER_ATOMIC)||"0",b=Blockly.propc.valueToCode(this,"RIGHT_MOTOR_SPEED",Blockly.propc.ORDER_ATOMIC)||"0",c=Blockly.propc.valueToCode(this,"MOTOR_DURATION",Blockly.propc.ORDER_ATOMIC)||"0";return"s3_motorSet("+a+", "+b+", "+c+");\n"};
Blockly.Blocks.move_motors_distance={init:function(){this.appendDummyInput().appendField("drive distances in ").appendField(new Blockly.FieldDropdown([["inches"," * 100000 / 1933"],["tenths of an inch"," * 10000 / 1933"],["centimeters"," * 10000 / 491"],["millimeters"," * 1000 / 491"],["encoder counts",""]],function(a){this.sourceBlock_.newUnit(a)}),"MULTIPLIER");this.appendValueInput("LEFT_MOTOR_DISTANCE").appendField("R,-633,633,0","RANGEVALS0").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("left motor distance");
this.appendValueInput("RIGHT_MOTOR_DISTANCE").appendField("R,-633,633,0","RANGEVALS1").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("right motor distance");this.appendValueInput("MOTOR_SPEED").appendField("R,-100,100,0","RANGEVALS2").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("at speed (%)");this.getField("RANGEVALS0").setVisible(!1);this.getField("RANGEVALS1").setVisible(!1);this.getField("RANGEVALS2").setVisible(!1);this.setInputsInline(!1);this.setPreviousStatement(!0,
"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("io"));this.setHelpUrl(Blockly.MSG_S3_MOTORS_HELPURL);this.setTooltip(Blockly.MSG_S3_MOVE_MOTORS_DISTANCE_TOOLTIP);this.newUnit(this.getFieldValue("MULTIPLIER"))},newUnit:function(a){var b=this.getInput("RIGHT_MOTOR_DISTANCE").connection,c=this.getInput("LEFT_MOTOR_DISTANCE").connection.targetBlock();b=b.targetBlock();var d="R,-633,633,0";" * 10000 / 1933"===a?d="R,-6333,6333,0":" * 10000 / 491"===a?d="R,-1608,1608,0":" * 1000 / 491"===
a?d="R,-16088,16088,0":""===a&&(d="R,-32767,32767,0");this.setFieldValue(d,"RANGEVALS0");this.setFieldValue(d,"RANGEVALS1");c&&c.onchange&&c.onchange.call(c);b&&b.onchange&&b.onchange.call(b)}};
Blockly.propc.move_motors_distance=function(){var a=this.getFieldValue("MULTIPLIER"),b=Blockly.propc.valueToCode(this,"LEFT_MOTOR_DISTANCE",Blockly.propc.ORDER_ATOMIC)||"0",c=Blockly.propc.valueToCode(this,"RIGHT_MOTOR_DISTANCE",Blockly.propc.ORDER_ATOMIC)||"0",d=Blockly.propc.valueToCode(this,"MOTOR_SPEED",Blockly.propc.ORDER_ATOMIC)||"0";return"s3_motorSetDistance("+b+a+", "+c+a+", "+d+");\n"};
Blockly.Blocks.move_motors_xy={init:function(){this.appendDummyInput().appendField("drive to a location");this.appendValueInput("X_DISTANCE").appendField("R,-20755429,20755429,0","RANGEVALS0").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("change (+/\u2212) in X");this.appendValueInput("Y_DISTANCE").appendField("R,-20755429,20755429,0","RANGEVALS1").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("change (+/\u2212) in Y");this.appendValueInput("MOTOR_SPEED").appendField("R,-100,100,0",
"RANGEVALS2").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("at speed (%)");this.appendDummyInput().setAlign(Blockly.ALIGN_RIGHT).appendField("in").appendField(new Blockly.FieldDropdown([["inches"," * 100000 / 1933"],["tenths of an inch"," * 10000 / 1933"],["centimeters"," * 10000 / 491"],["millimeters"," * 1000 / 491"],["encoder counts",""]],function(a){this.sourceBlock_.newUnit(a)}),"MULTIPLIER");this.getField("RANGEVALS0").setVisible(!1);this.getField("RANGEVALS1").setVisible(!1);
this.getField("RANGEVALS2").setVisible(!1);this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("io"));this.setHelpUrl(Blockly.MSG_S3_MOTORS_HELPURL);this.setTooltip(Blockly.MSG_S3_MOVE_MOTORS_XY_TOOLTIP)},newUnit:function(a){var b=this.getInput("X_DISTANCE").connection,c=this.getInput("Y_DISTANCE").connection.targetBlock();b=b.targetBlock();var d="R,-633,633,0";" * 10000 / 1933"===a?d="R,-6334,6334,0":" * 10000 / 491"===
a?d="R,-1608,1608,0":" * 1000 / 491"===a?d="R,-16089,16089,0":""===a&&(d="R,-32768,32767,0");this.setFieldValue(d,"RANGEVALS0");this.setFieldValue(d,"RANGEVALS1");c&&c.onchange&&c.onchange.call(c);b&&b.onchange&&b.onchange.call(b)}};
Blockly.propc.move_motors_xy=function(){var a=this.getFieldValue("MULTIPLIER"),b=Blockly.propc.valueToCode(this,"X_DISTANCE",Blockly.propc.ORDER_ATOMIC)||"0",c=Blockly.propc.valueToCode(this,"Y_DISTANCE",Blockly.propc.ORDER_ATOMIC)||"0",d=Blockly.propc.valueToCode(this,"MOTOR_SPEED",Blockly.propc.ORDER_ATOMIC)||"0";return"s3_motorGotoXY("+b+a+", "+c+a+", "+d+");\n"};
Blockly.Blocks.move_motors_angle={init:function(){this.appendDummyInput().appendField("drive a turn");this.appendValueInput("ROTATE_ANGLE").appendField("R,-1080,1080,0","RANGEVALS0").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("that is (+/\u2212 degrees)");this.appendValueInput("ROTATE_RADIUS").appendField("R,-85,85,0","RANGEVALS1").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("around a radius in (+/\u2212)").appendField(new Blockly.FieldDropdown([["inches of"," * 100000 / 1933"],
["tenths of an inch of"," * 10000 / 1933"],["centimeters of"," * 10000 / 491"],["millimeters of"," * 1000 / 491"],["encoder counts of",""]],function(a){this.sourceBlock_.newUnit(a)}),"RADIUS_MULTIPLIER");this.appendValueInput("ROTATE_SPEED").appendField("R,-100,100,0","RANGEVALS2").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("at speed (%)");this.getField("RANGEVALS0").setVisible(!1);this.getField("RANGEVALS1").setVisible(!1);this.getField("RANGEVALS2").setVisible(!1);this.setInputsInline(!1);
this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("io"));this.setHelpUrl(Blockly.MSG_S3_MOTORS_HELPURL);this.setTooltip(Blockly.MSG_S3_MOVE_MOTORS_ANGLE_TOOLTIP)},newUnit:function(a){var b=this.getInput("ROTATE_RADIUS").connection.targetBlock(),c="R,-85,85,0";" * 10000 / 1933"===a?c="R,-850,850,0":" * 10000 / 491"===a?c="R,-216,216,0":" * 1000 / 491"===a?c="R,-2160,2160,0":""===a&&(c="R,-4400,4400,0");this.setFieldValue(c,"RANGEVALS1");b&&b.onchange&&
b.onchange.call(b)}};Blockly.propc.move_motors_angle=function(){var a=this.getFieldValue("RADIUS_MULTIPLIER"),b=Blockly.propc.valueToCode(this,"ROTATE_ANGLE",Blockly.propc.ORDER_ATOMIC),c=Blockly.propc.valueToCode(this,"ROTATE_RADIUS",Blockly.propc.ORDER_ATOMIC),d=Blockly.propc.valueToCode(this,"ROTATE_SPEED",Blockly.propc.ORDER_ATOMIC);return"s3_motorSetRotate("+b+", "+c+a+", "+d+");\n"};
Blockly.Blocks.play_polyphony={init:function(){this.appendDummyInput().appendField("play tones");this.appendValueInput("FREQUENCY_1").appendField("R,0,2000,0","RANGEVALS0").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("tone 1 (Hz)");this.appendValueInput("FREQUENCY_2").appendField("R,0,2000,0","RANGEVALS1").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("tone 2 (Hz)");this.appendValueInput("POLYPHONY_DURATION").appendField("R,0,15000,0","RANGEVALS2").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("for (milliseconds)");
this.appendValueInput("POLYPHONY_VOLUME").appendField("R,0,100,0","RANGEVALS3").setAlign(Blockly.ALIGN_RIGHT).setCheck("Number").appendField("at volume (%)");this.getField("RANGEVALS0").setVisible(!1);this.getField("RANGEVALS1").setVisible(!1);this.getField("RANGEVALS2").setVisible(!1);this.getField("RANGEVALS3").setVisible(!1);this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("io"));this.setHelpUrl(Blockly.MSG_S3_SOUND_HELPURL);
this.setTooltip(Blockly.MSG_S3_PLAY_POLYPHONY_TOOLTIP)}};
Blockly.propc.play_polyphony=function(){var a=Blockly.propc.valueToCode(this,"FREQUENCY_1",Blockly.propc.ORDER_ATOMIC)||"522",b=Blockly.propc.valueToCode(this,"FREQUENCY_2",Blockly.propc.ORDER_ATOMIC)||"784",c=Blockly.propc.valueToCode(this,"POLYPHONY_DURATION",Blockly.propc.ORDER_ATOMIC)||"250";return"s3_setVolume(("+(Blockly.propc.valueToCode(this,"POLYPHONY_VOLUME",Blockly.propc.ORDER_ATOMIC)||"50")+" / 2));\ns3_playNote("+a+", "+b+", "+c+");\n"};
Blockly.Blocks.line_sensor={init:function(){this.appendDummyInput("").appendField("line sensor").appendField(new Blockly.FieldDropdown([["left reflectivity","LEFT"],["right reflectivity","RIGHT"]]),"LINE_SENSOR_CHOICE");this.setInputsInline(!1);this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_LINE_HELPURL);this.setTooltip(Blockly.MSG_S3_LINE_SENSOR_TOOLTIP)}};
Blockly.propc.line_sensor=function(){return["s3_lineSensor(S3_"+this.getFieldValue("LINE_SENSOR_CHOICE")+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.obstacle_sensor={init:function(){this.appendDummyInput("").appendField("obstacle detected").appendField(new Blockly.FieldDropdown([["on the left","LEFT"],["on the right","RIGHT"],["in front","&&"],["by either sensor","||"]]),"OBSTACLE_SENSOR_CHOICE");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_OBSTACLE_HELPURL);this.setTooltip(Blockly.MSG_S3_OBSTACLE_SENSOR_TOOLTIP)}};
Blockly.propc.obstacle_sensor=function(){var a=this.getFieldValue("OBSTACLE_SENSOR_CHOICE");return"LEFT"===a||"RIGHT"===a?["s3_readObstacle(S3_"+a+")",Blockly.propc.ORDER_ATOMIC]:["(s3_readObstacle(S3_LEFT) "+a+" s3_readObstacle(S3_RIGHT))",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.stall_sensor={init:function(){this.appendDummyInput("").appendField("stall sensor").appendField(new Blockly.FieldDropdown([["tail wheel is not spinning","!s3_tailWheelMoving()"],["tail wheel is spinning","s3_tailWheelMoving()"],["drive wheels are stopped","!s3_motorsMoving()"],["drive wheels are turning","s3_motorsMoving()"],["Scribbler is stuck","s3_simpleStalled(S3_IS)"],["Scribbler is not stuck","s3_simpleStalled(S3_IS_NOT)"]]),"STALL_SENSOR_CHOICE");this.setOutput(!0,"Number");
this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_STALL_HELPURL);this.setTooltip(Blockly.MSG_S3_STALL_SENSOR_TOOLTIP)}};Blockly.propc.stall_sensor=function(){return[this.getFieldValue("STALL_SENSOR_CHOICE"),Blockly.propc.ORDER_ATOMIC]};Blockly.Blocks.button_pressed={init:function(){this.appendDummyInput("").appendField("the red botton is currently pressed");this.appendDummyInput("").appendField("(true or false)");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("input"))}};
Blockly.Blocks.spinning_sensor={init:function(){this.appendDummyInput("").appendField("drive wheels stalled");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_STALL_HELPURL);this.setTooltip(Blockly.MSG_S3_SPINNING_SENSOR_TOOLTIP)}};Blockly.propc.spinning_sensor=function(){this.getFieldValue("LGHT_SENSOR_CHOICE");return["!s3_motorsMoving()",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.light_sensor={init:function(){this.appendDummyInput("").appendField("light sensor").appendField(new Blockly.FieldDropdown([["left reading","LEFT"],["center reading","CENTER"],["right reading","RIGHT"]]),"LGHT_SENSOR_CHOICE");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_LIGHT_HELPURL);this.setTooltip(Blockly.MSG_S3_LIGHT_SENSOR_TOOLTIP)}};
Blockly.propc.light_sensor=function(){return["s3_lightSensor(S3_"+this.getFieldValue("LGHT_SENSOR_CHOICE")+")",Blockly.propc.ORDER_ATOMIC]};Blockly.Blocks.reset_button_presses={init:function(){this.appendDummyInput("").appendField("reset button presses on last reset");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_RESET_BUTTON_HELPURL);this.setTooltip(Blockly.MSG_S3_RESET_BUTTON_PRESSES_TOOLTIP)}};
Blockly.propc.reset_button_presses=function(){return["s3_resetButtonCount()",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.scribbler_stop_servo={init:function(){"Scribbler Robot"===profile["default"].description?(this.setHelpUrl(Blockly.MSG_S3_SERVO_HELPURL),this.setColour(colorPalette.getColor("robot")),this.pinSet=profile["default"].digital):(this.setHelpUrl(Blockly.MSG_SERVO_HELPURL),this.setColour(colorPalette.getColor("output")),this.pinSet=profile["default"].digital.concat([["other","other"]]));this.setTooltip(Blockly.MSG_S3_SCRIBBLER_STOP_SERVO_TOOLTIP);this.addPinMenu("servo PIN","VALUE");this.appendDummyInput("VALUE").appendField("disable");
this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null)},addPinMenu:function(a,b){this.appendDummyInput("SET_PIN").appendField(a,"LABEL").appendField(new Blockly.FieldDropdown(this.pinSet,function(a){this.sourceBlock_.setToOther(a,b)}),"SERVO_PIN");this.moveBefore=b;this.otherPin=!1},setToOther:function(a,b){if("other"===a){this.otherPin=!0;var c=this.getFieldValue("LABEL");this.removeInput("SET_PIN");this.appendValueInput("SERVO_PIN").appendField(c).setCheck("Number").appendField("A,"+
profile["default"].digital.toString(),"RANGEVALS0");this.getField("RANGEVALS0").setVisible(!1);b&&this.moveInputBefore("SERVO_PIN",b)}},mutationToDom:function(){var a=document.createElement("mutation");a.setAttribute("otherpin",this.otherPin);return a},domToMutation:function(a){"true"===a.getAttribute("otherpin")&&this.setToOther("other",this.moveBefore)}};
Blockly.propc.scribbler_stop_servo=function(){var a=this.otherPin?Blockly.propc.valueToCode(this,"SERVO_PIN",Blockly.propc.ORDER_ATOMIC)||"0":this.getFieldValue("SERVO_PIN");for(var b="",c=Blockly.getMainWorkspace().getAllBlocks(),d=0;d<c.length;d++)"fb360_init"!==c[d].type||c[d].getFieldValue("PIN")!==a&&c[d].getFieldValue("FB")!==a||(b="360");return""===b?(Blockly.propc.definitions_["include servo"]='#include "servo.h"',"servo_disable("+a+");\n"):"servo360_enable("+a+", 0);\n"};
Blockly.Blocks.scribbler_ping={init:function(){this.appendDummyInput("").appendField("Ping))) sensor on").appendField(new Blockly.FieldDropdown(profile["default"].digital),"PIN").appendField("distance in").appendField(new Blockly.FieldDropdown([["inches","_inches"],["centimeters","_cm"]]),"SCALE");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("input"));this.setHelpUrl(Blockly.MSG_S3_PING_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_PING_TOOLTIP)}};
Blockly.propc.scribbler_ping=function(){var a=this.getFieldValue("PIN"),b=this.getFieldValue("SCALE");Blockly.propc.definitions_["include ping"]='#include "ping.h"';return["ping"+b+"("+a+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.analog_input={init:function(){this.appendDummyInput("").appendField("check analog PIN").appendField(new Blockly.FieldDropdown(profile["default"].analog),"ANALOG_PIN");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("io"));this.setHelpUrl(Blockly.MSG_S3_IO_HELPURL);this.setTooltip(Blockly.MSG_S3_ANALOG_INPUT_TOOLTIP)}};Blockly.propc.analog_input=function(){return["s3_readADC(S3_ADC_A"+(this.getFieldValue("ANALOG_PIN")||"0")+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.scribbler_boolean={init:function(){this.appendDummyInput("").appendField(new Blockly.FieldDropdown([["true","1"],["false","0"]]),"BOOL");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("math"));this.setHelpUrl(Blockly.MSG_S3_MATH_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_BOOLEAN_TOOLTIP)}};Blockly.propc.scribbler_boolean=function(){return[this.getFieldValue("BOOL"),Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.scribbler_random_boolean={init:function(){this.appendDummyInput("").appendField("random true/false");this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("math"));this.setHelpUrl(Blockly.MSG_S3_MATH_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_RANDOM_BOOLEAN_TOOLTIP)}};Blockly.propc.scribbler_random_boolean=function(){Blockly.propc.setups_.random_seed="srand(INA + CNT);\n";return["(rand() % 2)",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.scribbler_random_number={init:function(){this.appendValueInput("A").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("random number from");this.appendValueInput("B").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("to");this.setInputsInline(!0);this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("math"));this.setHelpUrl(Blockly.MSG_S3_MATH_HELPURL);this.setTooltip(Blockly.MSG_S3_SCRIBBLER_RANDOM_NUMBER_TOOLTIP)}};
Blockly.Blocks.factory_reset={init:function(){this.appendDummyInput().appendField("restore s3 demo");this.setColour(colorPalette.getColor("programming"));this.setHelpUrl(Blockly.MSG_S3_FACTORY_RESET_HELPURL);this.setTooltip(Blockly.MSG_S3_FACTORY_RESET_TOOLTIP)}};Blockly.propc.factory_reset=function(){Blockly.propc.definitions_.s3_factory_reset="#pragma load_default_scribbler_binary";return""};
Blockly.Blocks.scribbler_serial_send_text={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput("").appendField(new Blockly.FieldDropdown([["Terminal","T"],["WX module","W"],["XBee","X"]]),"OUTPUT").appendField("send text").appendField("\u201c").appendField(new Blockly.FieldTextInput(""),"MESSAGE_TEXT").appendField("\u201d");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setHelpUrl(Blockly.MSG_S3_COMMUNICATE_HELPURL);this.setTooltip(Blockly.MSG_S3_SERIAL_SEND_TEXT_TOOLTIP)}};
Blockly.propc.scribbler_serial_send_text=function(){Blockly.propc.serial_terminal_=!0;Blockly.propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);";return'print("'+this.getFieldValue("MESSAGE_TEXT").replace(/"/g,'\\"').replace(/%/g,"%%")+'");\n'};
Blockly.Blocks.scribbler_serial_send_char={init:function(){this.appendValueInput("CHAR_VALUE").appendField(new Blockly.FieldDropdown([["Terminal","T"],["WX module","W"],["XBee","X"]]),"OUTPUT").appendField("send character").setCheck("Number");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("protocols"));this.setHelpUrl(Blockly.MSG_S3_COMMUNICATE_HELPURL);this.setTooltip(Blockly.MSG_S3_SERIAL_SEND_CHAR_TOOLTIP)}};
Blockly.propc.scribbler_serial_send_char=function(){Blockly.propc.serial_terminal_=!0;Blockly.propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);";return'print("%c", '+Blockly.propc.valueToCode(this,"CHAR_VALUE",Blockly.propc.ORDER_ATOMIC)+");\n"};
Blockly.Blocks.scribbler_serial_send_decimal={init:function(){this.appendValueInput("DECIMAL_VALUE").setCheck("Number").appendField(new Blockly.FieldDropdown([["Terminal","T"],["WX module","W"],["XBee","X"]]),"OUTPUT").appendField("send number");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("protocols"));this.setHelpUrl(Blockly.MSG_S3_COMMUNICATE_HELPURL);this.setTooltip(Blockly.MSG_S3_SERIAL_SEND_DECIMAL_TOOLTIP)}};
Blockly.propc.scribbler_serial_send_decimal=function(){Blockly.propc.serial_terminal_=!0;Blockly.propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);";return'print("%d", '+(Blockly.propc.valueToCode(this,"DECIMAL_VALUE",Blockly.propc.ORDER_ATOMIC)||0)+");\n"};
Blockly.Blocks.scribbler_serial_send_ctrl={init:function(){this.appendDummyInput().appendField(new Blockly.FieldDropdown([["Terminal","T"],["WX module","W"],["XBee","X"]]),"OUTPUT").appendField("send command").appendField(new Blockly.FieldDropdown([["carriage return","13"],["new line","10"],["backspace","127"],["clear screen","256"]]),"SERIAL_CHAR");this.setInputsInline(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setColour(colorPalette.getColor("protocols"));this.setHelpUrl(Blockly.MSG_S3_COMMUNICATE_HELPURL);
this.setTooltip(Blockly.MSG_S3_SERIAL_SEND_CTRL_TOOLTIP)}};Blockly.propc.scribbler_serial_send_ctrl=function(){Blockly.propc.serial_terminal_=!0;Blockly.propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);";var a=this.getFieldValue("SERIAL_CHAR");return"256"===a?"term_cmd(CLS);\n":'print("%c", '+a+");\n"};
Blockly.Blocks.scribbler_serial_rx_byte={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendDummyInput("").appendField(new Blockly.FieldDropdown([["Terminal","T"],["WX module","W"],["XBee","X"]]),"OUTPUT").appendField("receive character");this.setOutput(!0,"Number");this.setHelpUrl(Blockly.MSG_S3_COMMUNICATE_HELPURL);this.setTooltip(Blockly.MSG_S3_SERIAL_RX_BYTE_TOOLTIP)}};
Blockly.propc.scribbler_serial_rx_byte=function(){Blockly.propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);";return["getChar()",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.scribbler_serial_cursor_xy={init:function(){this.setColour(colorPalette.getColor("protocols"));this.appendValueInput("Y").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("Terminal set cursor position to row");this.appendValueInput("X").setCheck("Number").setAlign(Blockly.ALIGN_RIGHT).appendField("column");this.setInputsInline(!0);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setHelpUrl(Blockly.MSG_S3_COMMUNICATE_HELPURL);this.setTooltip(Blockly.MSG_S3_SERIAL_CURSOR_XY_TOOLTIP)}};
Blockly.propc.scribbler_serial_cursor_xy=function(){Blockly.propc.serial_terminal_=!0;Blockly.propc.setups_.s3_serial_baud="simpleterm_reopen(31,30,0,9600);";var a=Blockly.propc.valueToCode(this,"Y",Blockly.propc.ORDER_NONE),b=Blockly.propc.valueToCode(this,"X",Blockly.propc.ORDER_NONE);0>Number(a)?a=0:255<Number(a)&&(a=255);0>Number(b)?b=0:255<Number(b)&&(b=255);return"term_cmd(CRSRXY, "+b+", "+a+");\n"};
Blockly.Blocks.sirc_s3_get={helpUrl:Blockly.MSG_S3_SIRC_HELPURL,init:function(){this.setTooltip(Blockly.MSG_S3_SCRIBBLER_SIRC_TOOLTIP);var a=[["Onboard IR sensor","SCRIBBLER_OBS_RX"]].concat(profile["default"].digital);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("Sony Remote value").appendField(new Blockly.FieldDropdown(a),"PIN");this.setInputsInline(!0);this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number")}};
Blockly.propc.sirc_s3_get=function(){var a=this.getFieldValue("PIN");Blockly.propc.definitions_.sirc='#include "sirc.h"';Blockly.propc.setups_.sirc="sirc_setTimeout(70);\n";return["sirc_button("+a+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.mic_s3_get={helpUrl:Blockly.MSG_S3_MIC_HELPURL,init:function(){this.setTooltip(Blockly.MSG_S3_SCRIBBLER_MIC_TOOLTIP);this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("microphone volume detected");this.setInputsInline(!0);this.setPreviousStatement(!1,null);this.setNextStatement(!1,null);this.setOutput(!0,"Number")}};Blockly.propc.mic_s3_get=function(){Blockly.propc.setups_.s3_mic="s3_enableMic();";return["s3_readMic()",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.s3_eeprom_read={helpUrl:Blockly.MSG_S3_MEMORY_HELPURL,init:function(){this.setTooltip(Blockly.MSG_S3_SCRIBBLER_MEMORY_READ_TOOLTIP);this.appendValueInput("ADDR").setCheck("Number").appendField("R,0,7936,0","RANGEVALS0").appendField("memory read from address");this.getField("RANGEVALS0").setVisible(!1);this.setInputsInline(!0);this.setOutput(!0,"Number");this.setColour(colorPalette.getColor("input"))}};
Blockly.propc.s3_eeprom_read=function(){return["s3_memoryRead("+Blockly.propc.valueToCode(this,"ADDR",Blockly.propc.ORDER_NONE)+")",Blockly.propc.ORDER_ATOMIC]};
Blockly.Blocks.s3_eeprom_write={helpUrl:Blockly.MSG_S3_MEMORY_HELPURL,init:function(){this.setTooltip(Blockly.MSG_S3_SCRIBBLER_MEMORY_WRITE_TOOLTIP);this.appendValueInput("VALUE").setCheck("Number").appendField("memory write");this.appendValueInput("ADDR").setCheck("Number").appendField("R,0,7936,0","RANGEVALS0").appendField("to address");this.getField("RANGEVALS0").setVisible(!1);this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setInputsInline(!0);this.setColour(colorPalette.getColor("input"))}};
Blockly.propc.s3_eeprom_write=function(){var a=Blockly.propc.valueToCode(this,"VALUE",Blockly.propc.ORDER_NONE);return"s3_memoryWrite("+Blockly.propc.valueToCode(this,"ADDR",Blockly.propc.ORDER_NONE)+", "+a+");\n"};Blockly.Blocks.calibrate_line_sensor={init:function(){this.setColour(colorPalette.getColor("input"));this.appendDummyInput().appendField("line sensor calibrate");this.setPreviousStatement(!0,"Block");this.setNextStatement(!0,null);this.setHelpUrl(Blockly.MSG_S3_LINE_HELPURL);this.setTooltip(Blockly.MSG_S3_LINE_CALIBRATE_TOOLTIP)}};
Blockly.propc.calibrate_line_sensor=function(){Blockly.propc.methods_.s3_calibrate_line_sensor="void s3_calibrate_line_sensor(void) {int __lineSenCal[4];\n__lineSenCal[0] = s3_lineSensor(S3_LEFT);\n__lineSenCal[1] = s3_lineSensor(S3_RIGHT);\n__lineSenCal[2] = s3_lineSensor(S3_LEFT);\n__lineSenCal[3] = s3_lineSensor(S3_RIGHT);\nint __calibrate_timer = CNT + (CLKFREQ/1000) * 3672;\ns3_motorSet(75, -75, 0);\nwhile(CNT < __calibrate_timer) {int __tempLineSen = s3_lineSensor(S3_LEFT);\nif (__tempLineSen < __lineSenCal[0]) __lineSenCal[0] = __tempLineSen;\nif (__tempLineSen > __lineSenCal[2]) __lineSenCal[2] = __tempLineSen;\n__tempLineSen = s3_lineSensor(S3_RIGHT);\nif (__tempLineSen < __lineSenCal[1]) __lineSenCal[1] = __tempLineSen;\nif (__tempLineSen > __lineSenCal[3]) __lineSenCal[3] = __tempLineSen;}s3_motorSet(0, 0, 0);\nif (__lineSenCal[2] > __lineSenCal[0]) __lineSenCal[0] = __lineSenCal[2];\nif (__lineSenCal[3] < __lineSenCal[1]) __lineSenCal[1] = __lineSenCal[3];\nscribbler_set_line_threshold((__lineSenCal[0] + __lineSenCal[1]) / 2);\nscribbler_write_line_threshold();\n}";
Blockly.propc.method_declarations_.s3_calibrate_line_sensor="void s3_calibrate_line_sensor(void);";return"s3_calibrate_line_sensor();"};